{"version":3,"sources":["api/constructMenuJSON.js","api/client.js","notification.js","api/offlineStorage.js","inputPopup/index.jsx","mkNote/mkEditor/templates.js","inputPopup/InputPopupWrapper.jsx","mkNote/mkEditor/index.jsx","mkNote/mkDisplay/index.jsx","mkNote/index.jsx","dirModule/index.jsx","welcome/index.jsx","app/Routes.jsx","app/index.jsx","initialNote.js","index.js"],"names":["constructMenu","arr","root","map","queue","unit","parent_id","undefined","push","length","pop","children","id","child","sort","a","b","name","getMenu","getContent","createNote","createDir","deleteDir","deleteNote","renameDir","renameNote","updateNote","notify","type","msg","description","notification","message","myDB","ROOT_ID","initialization","openDB","upgrade","db","oldVersion","newVersion","transaction","createObjectStore","keyPath","terminated","console","log","get","time","Date","toISOString","create_time","last_update","put","getAll","dirs","notes","nodeTable","o","rootNode","Promise","reject","data","Error","value","uuid","obj","add","delete","text","title","contextText","noteId","contentId","content","note","content_id","tx","all","objectStore","done","offlineAPI","InputPopup","props","handleOk","callback","async","afterSuccess","maxLength","state","trim","setState","confirmLoading","then","res","handleCancel","e","onCancel","onChange","target","initialValue","this","visible","placeholder","onOk","onPressEnter","React","Component","defaultProps","templetes","heading_1","heading_2","heading_3","heading_4","ul","ol","check","line","table","InputPopupWrapper","show","hide","renderModal","key","Math","random","newContent","cloneElement","onClick","options","lineNumbers","readOnly","mode","theme","scrollbarStyle","lineWrapping","MkEditor","code","componentDidMount","window","codeMirror","editorRef","current","getCodeMirror","doc","getDoc","setValue","getValue","insertTextAtCursor","cursor","getCursor","replaceRange","handleInsert","headingMenu","Item","listMenu","incFontSize","fontSize","resetFontSize","decFontSize","createRef","shrink","expand","className","style","overlay","trigger","bind","ref","MkDisplay","source","escapeHtml","Loading","LoadingOutlined","spin","MkNote","getNewContent","ready","changed","onEditorChange","sizeChange","v","sizeConfig","prevProps","nextProps","location","pathname","slice","indicator","max","defaultValue","included","tooltipVisible","withRouter","DirModule","renderChildren","dirId","history","arrD","arrN","localeCompare","textAlign","FolderOpenTwoTone","renderRenameButtonForNotebook","renderDeleteButtonForNotebook","onDirDelete","FileMarkdownTwoTone","twoToneColor","renderRenameButtonForNote","renderDeleteButtonForNote","onNoteDelete","unshift","RollbackOutlined","color","handleDelete","onConfirm","danger","size","handleRename","oldName","updateFunction","directory","dirName","files","Welcome","FolderOutlined","FileMarkdownOutlined","FolderAddOutlined","FileAddOutlined","to","xmlns","width","height","viewBox","x","y","ry","stroke","strokeWidth","fill","d","RootWrapper","rootDir","DirWrapper","useParams","MkNoteWrapper","Routes","rootKey","fetchMenuFromRear","exact","path","Sider","Layout","SubMenu","Menu","App","info","renderedMenu","renderMenu","node","isRoot","icon","onTitleClick","isSidebarCollapsed","moveSideMenu","popupClassName","collapsed","setNewFolderPopupVisibility","newFolderPopupVisible","setNewNotePopupVisibility","newNotePopupVisible","onItemSelect","item","selectedKeys","domEvent","saveCurrent","isNotePage","indexOf","getOpenKeys","parentId","getDirId","openNotebooks","isDirPage","openKeys","collapsible","onCollapse","BackwardFilled","reverseArrow","selectable","onSelect","HomeOutlined","SaveOutlined","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.af7cb55c.chunk.js","sourcesContent":["export default function constructMenu (arr) {\n  const map = {};\n  const queue = [];\n  let root;\n\n  for (let unit of arr) {\n    if (unit.parent_id === null || unit.parent_id === undefined) {\n      root = unit;\n      queue.push(root);\n    } else {\n      if (!!map[unit.parent_id]) {\n        map[unit.parent_id].push(unit);\n      } else {\n        map[unit.parent_id] = [unit];\n      }\n    }\n  }\n\n  //BFS\n  while (queue.length > 0) {\n    const unit = queue.pop();\n    unit.children = [];\n    if (map[unit.id]) {\n      for (let child of map[unit.id]) {\n        unit.children.push(child);\n        queue.push(child);\n      }\n    }\n  }\n\n  root.children.sort((a, b) => a.name - b.name);\n\n  return root;\n}","import serverAPI from './serverStorage';\nimport offlineAPI from './offlineStorage';\nimport { offline } from '../config';\n\nlet getMenu;\nlet getContent;\nlet createNote;\nlet createDir;\nlet deleteDir;\nlet deleteNote;\nlet renameDir;\nlet renameNote;\nlet updateNote;\n\nif (!!offline) {\n  getMenu = offlineAPI.getMenu;\n  getContent = offlineAPI.getContent;\n  createNote = offlineAPI.createNote;\n  createDir = offlineAPI.createDir;\n  deleteDir = offlineAPI.deleteDir;\n  deleteNote = offlineAPI.deleteNote;\n  renameDir = offlineAPI.renameDir;\n  renameNote = offlineAPI.renameNote;\n  updateNote = offlineAPI.updateNote;\n} else {\n  getMenu = serverAPI.getMenu;\n  getContent = serverAPI.getContent;\n  createNote = serverAPI.createNote;\n  createDir = serverAPI.createDir;\n  deleteDir = serverAPI.deleteDir;\n  deleteNote = serverAPI.deleteNote;\n  renameDir = serverAPI.renameDir;\n  renameNote = serverAPI.renameNote;\n  updateNote = serverAPI.updateNote;\n}\n\n\nexport {\n  getMenu,\n  getContent,\n  createNote,\n  createDir,\n  deleteDir,\n  deleteNote,\n  renameDir,\n  renameNote,\n  updateNote\n};\n\n","import { notification } from 'antd';\n\nexport const notify = (type, msg, description) => {\n  notification[type]({\n    message: msg,\n    description: !!description? description : null\n  });\n};\n","import constructMenu from './constructMenuJSON';\nimport { openDB } from 'idb';\nimport {v4 as uuid} from 'uuid';\n\nlet myDB = null;\nconst ROOT_ID = '00000000-0000-0000-0000-000000000000';\n\nconst initialization = async () => {\n  return await openDB('myDB', 1, {\n    async upgrade(db, oldVersion, newVersion, transaction) {\n      if (oldVersion === 0){\n        db.createObjectStore('dirs', {keyPath: 'id'});\n        db.createObjectStore('notes', {keyPath: 'id'});\n        db.createObjectStore('contents', {keyPath: 'id'});\n      }\n      return;\n    },\n    terminated() {\n     console.log('terminated')\n    },\n  });\n}\n\nconst getMenu = async () => {\n   \n  console.log('fetching menu...')\n  if (!myDB) console.log('DB is not ready, need to connect');\n\n  try {\n    if (!myDB) myDB = await initialization();\n  } catch (e) {\n    console.log(e)\n  }\n\n  try {\n    let root = await myDB.get('dirs', ROOT_ID);\n\n    if (!root) {\n      const time = new Date().toISOString();\n      const root = {\n        id: ROOT_ID,\n        parent_id: null,\n        name: 'root',\n        create_time: time,\n        last_update: time,\n        type: 'ROOT',\n      }\n      await myDB.put('dirs', root);\n    }\n\n    const dirs = await myDB.getAll('dirs');\n    const notes = await myDB.getAll('notes');\n    const arr = [...dirs, ...notes];\n    const nodeTable = {};\n\n    for (let o of arr) {\n      nodeTable[o.id] = o;\n    }\n\n    return { nodeTable, rootNode: constructMenu(arr)};\n  } catch (e) {\n    console.log(e);\n    return Promise.reject();\n  }\n}\n\nconst createDir = async (data) => {\n\n  if (!myDB) throw new Error('local DB not available');\n\n  try {\n    \n    const name = data.value;\n\n    // check name duplication\n    const dirs = await myDB.getAll('dirs');\n    for (const d of dirs) {\n      if (d.name === name) return Promise.reject('name duplication');\n    }\n\n    const id = uuid();\n    const parent_id = ROOT_ID;\n    const time = new Date().toISOString();\n    const create_time = time;\n    const last_update = time;\n    const type = 'DIR';\n    const obj = { id, name, parent_id, create_time, last_update, type };\n    await myDB.add('dirs', obj);\n    return `${name} created`;\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to create notebook');\n  }\n}\n\nconst renameDir = async (id, data) => {\n  try {\n    const obj = await myDB.get('dirs', id);\n    if (!obj) throw new Error('notebook does not exist');\n    obj.name = data.value;\n    const time = new Date().toISOString();\n    obj.last_update = time;\n    await myDB.put('dirs', obj);\n    return \"notebook updated\";\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('update failed');\n  }\n}\n\nconst deleteDir = async (id) => {\n  try {\n    await myDB.delete('dirs', id);\n    return \"notebook deleted\";\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('delete failed');\n  }\n}\n\nconst createNote = async (text, parent_id, data) => {\n  try {\n\n    const title = data.value;\n\n    // check name duplication\n    const notes = await myDB.getAll('notes');\n    for (const n of notes) {\n      if (n.name === title) return Promise.reject('name duplication');\n    }\n\n    const contextText = `# ${data.value} \\n----\\n` + text;\n    const noteId = uuid();\n    const contentId = uuid();\n    const time = new Date().toISOString();\n    const create_time = time;\n    const last_update = time;\n\n    const content = {\n      id: contentId,\n      text: contextText,\n      create_time: create_time,\n      last_update: last_update,\n    };\n\n    const note = {\n      id: noteId,\n      parent_id: parent_id,\n      content_id: contentId,\n      name: title,\n      type: 'MKD',\n      create_time: create_time,\n      last_update: last_update,\n    };\n\n    const tx = myDB.transaction(['notes', 'contents'], 'readwrite');\n\n    await Promise.all([\n      tx.objectStore('contents').add(content),\n      tx.objectStore('notes').add(note),\n      tx.done,\n    ]);\n    return `${title} created`; \n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to create new note');\n  }\n}\n\nconst getContent = async (noteId) => {\n  try {\n    const note = await myDB.get('notes', noteId);\n    if (!note) throw new Error('note does not exist');\n\n    const contentId = note.content_id;\n    const content = await myDB.get('contents', contentId);\n    if (!content) throw new Error('note does not exist');\n\n    return {text: content.text};\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to get the content');\n  }\n}\n\nconst deleteNote = async (noteId) => {\n  try {\n    const note = await myDB.get('notes', noteId);\n    const contentId = note.content_id;\n\n    await myDB.delete('notes', noteId);\n    await myDB.delete('contents', contentId);\n\n    return `note deleted`; \n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to delete note');\n  }\n}\n\nconst renameNote = async (id, data) => {\n  try {\n    const note = await myDB.get('notes', id);\n    if (!note) throw new Error('note does not exist');\n    note.name = data.value;\n    const time = new Date().toISOString();\n    note.last_update = time;\n    await myDB.put('notes', note);\n    return `note updated`; \n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to update note');\n  }\n}\n\nconst updateNote = async (id, text) => {\n  try {\n    const note = await myDB.get('notes', id);\n    if (!note) throw new Error('note does not exist');\n    const time = new Date().toISOString();\n    note.last_update = time;\n\n    const content = await myDB.get('contents', note.content_id);\n    content.text = text;\n\n    const tx = myDB.transaction(['notes', 'contents'], 'readwrite');\n\n    await Promise.all([\n      tx.objectStore('contents').put(content),\n      tx.objectStore('notes').put(note),\n      tx.done,\n    ]);\n    return `note updated`; \n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to update note');\n  }\n}\n\nexport default {\n  getMenu,\n  getContent,\n  createNote,\n  createDir,\n  deleteDir,\n  deleteNote,\n  renameDir,\n  renameNote,\n  updateNote,\n};","import { Modal, Input } from 'antd';\nimport React from 'react';\nimport { notify } from '../notification';\nimport PropTypes from 'prop-types';\n\nclass InputPopup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmLoading: false,\n      value: this.props.initialValue,\n    }\n  }\n\n  // callback will be triggered first, if this callback is async, 'afterSuccess' will be triggered after a successful callback\n  handleOk = () => {\n\n    const { callback, async, afterSuccess, maxLength } = this.props;\n    const { value } = this.state;\n\n    if (value === null || value.trim().length === 0) { \n      notify('error', 'invalid input');\n      return;\n    }\n\n    if (value.trim().length > maxLength) {\n      const max = maxLength ? maxLength : 1000;\n      notify('error', 'input should be shorter than ' + max);\n      return;\n    }\n\n    if (async) {\n      // the callback function is a async function\n      this.setState({ confirmLoading: true });\n      callback({ value })\n      .then(\n        (res) => {\n          this.setState({ confirmLoading: false });\n          notify('success', res);\n          this.handleCancel();\n          if (typeof afterSuccess === 'function') afterSuccess();\n        }, \n        (e) => { \n          notify('error', e)\n          this.setState({ confirmLoading: false }); \n        }\n      );\n    } else {\n      callback({ value });\n      this.handleCancel();\n      if (typeof afterSuccess === 'function') afterSuccess();\n    }\n  };\n\n  handleCancel = () => {\n    const { onCancel } = this.props;\n    onCancel();\n  };\n\n  onChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  render() {\n\n    const { confirmLoading, value } = this.state;\n    const { title, visible, placeholder } = this.props;\n\n    return (\n        <Modal\n          title={title}\n          visible={visible}\n          onOk={this.handleOk}\n          confirmLoading={confirmLoading}\n          onCancel={this.handleCancel}\n        >\n          <Input \n            value={value} \n            placeholder={placeholder}\n            onChange={this.onChange}\n            onPressEnter={this.handleOk}\n          />\n        </Modal>\n    );\n  }\n}\n\nInputPopup.propTypes = {\n  visible: PropTypes.bool.isRequired,\n  title: PropTypes.string,   \n  initialValue: PropTypes.string,\n  placeholder: PropTypes.string,   \n  onCancel: PropTypes.func.isRequired,\n  callback: PropTypes.func.isRequired,   \n  async: PropTypes.bool,  \n  afterSuccess: PropTypes.func, \n  maxLength: PropTypes.number,\n};\n\nInputPopup.defaultProps = {\n  title: '',   \n  initialValue: '',\n  placeholder: '',  \n  async: false,  \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default InputPopup;","const templetes = {\n    heading_1: '# heading',\n    heading_2: '## heading',\n    heading_3: '### heading',\n    heading_4: '#### heading',\n    ul: '- item\\n- item\\n- item\\n',\n    ol: '1. item\\n2. item\\n3. item\\n',\n    check: '\\n- [x]  item\\n- [ ]  item\\n- [ ]  item\\n',\n    line: '\\n---------------',\n    table:  \"|       | col-1 | col-2 | col-3 | col-4 | col-5 |\\n\" +\n            \"|-     -|-     -|-     -|-     -|-     -|-     -|\\n\" +\n            \"| row-1 |       |       |       |       |       |\\n\" +\n            \"| row-2 |       |       |       |       |       |\\n\" +\n            \"| row-3 |       |       |       |       |       |\\n\",\n}\nexport default templetes; ","import React from 'react';\nimport InputPopup from './index';\nimport PropTypes from 'prop-types';\n\nclass InputPopupWrapper extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false\n    }\n  }\n\n  show = () => {\n    this.setState({ visible: true });\n  }\n\n  hide = () => {\n    this.setState({ visible: false });\n  }\n\n  renderModal = () => {\n\n    const { title, initialValue, placeholder, callback, async, afterSuccess, maxLength } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <InputPopup\n        visible={visible} \n        title={title}\n        initialValue={initialValue}\n        placeholder={placeholder}\n        onCancel={this.hide}\n        callback={callback}\n        async={async}\n        afterSuccess={afterSuccess}\n        maxLength={maxLength}\n        key={Math.random()}\n    />);\n  }\n\n  render() {\n\n    const { content } = this.props;\n    const newContent = React.cloneElement(content, {\n      onClick: this.show,\n    });\n\n    return (\n      <>\n        {newContent}\n        {this.renderModal()}\n      </>\n    );\n  }\n}\n\nInputPopupWrapper.propTypes = {\n  title: PropTypes.string,   \n  initialValue: PropTypes.string,\n  placeholder: PropTypes.string,   \n  callback: PropTypes.func.isRequired,   \n  async: PropTypes.bool,  \n  afterSuccess: PropTypes.func, \n  content: PropTypes.node.isRequired,\n  maxLength: PropTypes.number,\n};\n\nInputPopupWrapper.defaultProps = {\n  title: '',   \n  initialValue: '',\n  placeholder: '',  \n  async: false,  \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default InputPopupWrapper;","import React from 'react';\nimport CodeMirror from 'react-codemirror';\nimport templetes from './templates.js';\nimport { Menu, Dropdown } from 'antd';\nimport 'codemirror/mode/markdown/markdown';\nimport PropTypes from 'prop-types';\nimport InputPopupWrapper from '../../inputPopup/InputPopupWrapper';\n\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/darcula.css'\nimport './style.scss';\n\nconst options = {\n  lineNumbers: false,\n  readOnly: false,\n  mode: 'markdown',\n  theme: 'darcula',\n  scrollbarStyle: 'null',\n  lineWrapping: true\n}\n\nclass MkEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.editorRef = React.createRef();\n    this.state = {\n      fontSize: 16, \n    }\n  }\n\n  onChange = (code) => {\n    this.props.onChange(code);\n  }\n\n  componentDidMount = () => {\n    const { initialValue } = this.props;\n    try {\n      window.codeMirror = this.editorRef.current.getCodeMirror();\n      // const last_text = window.localStorage.getItem('mkEditor_last_time');\n      const doc = this.editorRef.current.getCodeMirror().getDoc();\n      doc.setValue(initialValue)\n      this.onChange(doc.getValue());\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  insertTextAtCursor = (text) => {\n    try {\n      const doc = this.editorRef.current.getCodeMirror().getDoc();\n      const cursor = doc.getCursor();\n      doc.replaceRange(text, cursor);\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  handleInsert = ({ key }, data) => {\n    if (key === 'pic') {\n      this.insertTextAtCursor(`\\n![alt text](${data.value})\\n`);\n    } else if (key === 'link') {\n      this.insertTextAtCursor(`\\n[text](${data.value})\\n`);\n    } else {\n      const text = templetes[key];\n      if (!!text) this.insertTextAtCursor(text);\n    }\n  };\n\n  headingMenu = (\n    <Menu onClick={this.handleInsert}>\n      <Menu.Item key=\"heading_1\">\n        Heading level 1\n      </Menu.Item>\n      <Menu.Item key=\"heading_2\">\n        Heading level 2\n      </Menu.Item>\n      <Menu.Item key=\"heading_3\">\n        Heading level 3\n      </Menu.Item>\n      <Menu.Item key=\"heading_4\">\n        Heading level 4\n      </Menu.Item>\n    </Menu>\n  );\n\n  listMenu = (\n    <Menu onClick={this.handleInsert}>\n      <Menu.Item key=\"ol\">\n       Ordered list\n      </Menu.Item>\n      <Menu.Item key=\"ul\">\n        Unordered list\n      </Menu.Item>\n      <Menu.Item key=\"check\">\n        Check list\n      </Menu.Item>\n    </Menu>\n  );\n\n  incFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize + 1});\n  }\n\n  resetFontSize = () => {\n    this.setState({ fontSize: 16});\n  }\n\n  decFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize - 1});\n  }\n\n  render() {\n\n    const { shrink, expand } = this.props;\n    const { fontSize } = this.state;\n    let className = 'mk-editor';\n\n    if (shrink) className += ' shrink';\n    if (expand) className += ' expand';\n\n    return(\n      <div className={className} style={{fontSize: fontSize + 'px'}}>\n        <div className='top-bar'>\n          Insert:\n          <Dropdown overlay={this.headingMenu} trigger={['click']}>\n            <span className='option'>Heading</span>\n          </Dropdown>\n          <Dropdown overlay={this.listMenu} trigger={['click']}>\n            <span className='option'>List</span>\n          </Dropdown>\n          <InputPopupWrapper \n            title=\"Insert picture\"\n            placeholder=\"Paste the picture link here\"\n            initialValue={''}\n            callback={this.handleInsert.bind(this, {key: 'pic'})}\n            async={false}\n            content={<span className='option'>Picture</span>}\n          />\n          <InputPopupWrapper \n            title=\"Insert link\"\n            placeholder=\"Paste the link here\"\n            initialValue={''}\n            callback={this.handleInsert.bind(this, {key: 'link'})}\n            async={false}\n            content={<span className='option'>Link</span>}\n          />\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'line'})}>Line</span>\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'table'})}>Table</span>\n          <span className='gap'></span>\n          Font size:\n          <span className='option' onClick={this.incFontSize}>+</span>\n          <span className='option' onClick={this.resetFontSize}>Reset</span>\n          <span className='option' onClick={this.decFontSize}>-</span>\n        </div>\n        <CodeMirror \n          ref={this.editorRef}\n          onChange={this.onChange}\n          options={options} \n        />\n      </div>\n    );\n  }\n};\n\nMkEditor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  initialValue: PropTypes.string.isRequired,\n  shrink: PropTypes.bool.isRequired,\n  expand: PropTypes.bool.isRequired,\n};\n\nexport default MkEditor;","import React from 'react';\nimport Markdown from 'react-markdown';\nimport './style.scss';\n\nclass MkDisplay extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fontSize: 16, \n    }\n  }\n\n  incFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize + 1});\n  }\n\n  resetFontSize = () => {\n    this.setState({ fontSize: 16});\n  }\n\n  decFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize - 1});\n  }\n\n  render () {\n    const { shrink, expand, source } = this.props;\n    const { fontSize } = this.state;\n    let className = 'mk-display';\n\n    if (shrink) className += ' shrink';\n    if (expand) className += ' expand';\n\n    return (\n      <div className={className} style={{fontSize: fontSize + 'px'}}>\n        <div className=\"font-size\" >\n          Font size:\n          <span className='option' onClick={this.incFontSize}>+</span>\n          <span className='option' onClick={this.resetFontSize}>Reset</span>\n          <span className='option' onClick={this.decFontSize}>-</span>\n        </div>\n        <Markdown source={source} escapeHtml={false}/>\n      </div>\n    );\n  }\n}\n\nexport default MkDisplay;","import React from 'react';\nimport MkEditor from './mkEditor/index';\nimport MkDisplay from './mkDisplay/index';\nimport PropTypes from 'prop-types';\nimport { getContent } from '../api/client';\nimport { Spin, Slider } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { updateNote } from '../api/client';\nimport { withRouter } from \"react-router\";\nimport { notify } from '../notification';\n\nimport './style.scss';\n\nconst Loading = <LoadingOutlined style={{ fontSize: 120 }} spin />;\n\nclass MkNote extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      source: '',\n      ready: false,\n      changed: false,\n      sizeConfig: 1,\n    }\n  }\n\n  componentDidMount() {\n    const { noteId } = this.props;\n    // console.info(\"noteId\", noteId)\n    this.getNewContent(noteId);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { noteId } = this.props;\n    const { noteId: oldId } = prevProps;\n\n    if (oldId !== noteId) {\n      this.getNewContent(noteId);\n    }\n\n  }\n\n  getNewContent = (noteId) => {\n    this.setState({\n      ready: false,\n    });\n    getContent(noteId).then(\n      (res) => {\n        this.setState({\n          source: res.text,\n          ready: true,\n          changed: false,\n        });\n      },\n      () => {}\n    );\n  }\n\n  onEditorChange = (code) => {\n    if (this.state.source === code) return;\n    this.setState({\n      source: code,\n      changed: true,\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n\n    // auto saving\n    if (nextProps.location.pathname !== this.props.location.pathname) {\n\n      const doc = window.codeMirror.getDoc();\n      const noteId = this.props.location.pathname.slice(6);\n      const changed = this.state.changed;\n  \n      if (!doc || !noteId || noteId.length < 1 || !changed) return true;\n  \n      const text = doc.getValue();\n      updateNote(noteId, text).then(\n        (res) => {\n          notify('success', \"Auto saving completed \\n\" + res);\n        },\n        () => {\n          notify('error', 'update failed, try again later');\n        }\n      );\n    }\n    return true;\n  }\n\n  componentWillUnmount() {\n    // auto saving\n    const doc = window.codeMirror.getDoc();\n    const noteId = this.props.location.pathname.slice(6);\n    const changed = this.state.changed;\n\n    if (!doc || !noteId || noteId.length < 1 || !changed) return true;\n\n    const text = doc.getValue();\n    updateNote(noteId, text).then(\n      (res) => {\n        notify('success', \"Auto saving completed \\n\" + res);\n      },\n      () => {\n        notify('error', 'update failed, try again later');\n      }\n    );\n  }\n\n  sizeChange = (v) => {\n    this.setState({sizeConfig: v});\n  }\n\n  render() {\n\n    const { source, ready, sizeConfig } = this.state;\n\n    return (\n      <div className=\"main mk-mode\">\n        {!ready && <Spin indicator={Loading} />}\n        {!!ready && \n          <>\n            <MkEditor \n              onChange={this.onEditorChange}\n              initialValue={source} \n              shrink={sizeConfig === 0}\n              expand={sizeConfig === 2}\n            />\n            <MkDisplay \n              source={this.state.source} \n              shrink={sizeConfig === 2}\n              expand={sizeConfig === 0}\n            />\n            <div className=\"slider-bar\">\n              <Slider \n                max={2} \n                defaultValue={1} \n                included={false}\n                tooltipVisible={false} \n                onChange={this.sizeChange}\n                value={sizeConfig}\n              />\n            </div>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nMkNote.propTypes = {\n  noteId: PropTypes.string,\n};\n\nexport default withRouter(MkNote);\n","import React from 'react';\nimport {\n  FolderOpenTwoTone,\n  FileMarkdownTwoTone,\n  RollbackOutlined\n} from '@ant-design/icons';\nimport { Button, Popconfirm } from 'antd';\nimport { notify } from '../notification';\nimport { deleteDir, deleteNote, renameDir, renameNote } from '../api/client.js';\nimport InputPopupWrapper from '../inputPopup/InputPopupWrapper';\nimport { withRouter } from \"react-router\";\nimport PropTypes from 'prop-types';\n\nimport './style.scss';\n\nclass DirModule extends React.Component {\n\n  renderChildren = (children, dirId) => {\n\n    const { history } = this.props;\n    const arrD = [];\n    const arrN = [];\n\n    children.sort((a, b) => ('' + a.name).localeCompare('' + b.name));\n    for (let child of children) {\n      if (child.type === 'DIR') {\n        arrD.push(\n          <div className=\"unit\" key={child.id}>\n            <div className='icon-container' style={{textAlign: 'center'}}>\n              <FolderOpenTwoTone \n                style={{fontSize: '50px'}} \n                className=\"pointer\"\n                onClick={() => { history.push(`/dir/${child.id}`); }}\n              />\n            </div>\n            <div \n              className=\"file-name pointer\"\n              onClick={() => {history.push(`/dir/${child.id}`); }}\n            >{child.name}</div>\n              {this.renderRenameButtonForNotebook(renameDir.bind(this, child.id), child.name)}\n              {this.renderDeleteButtonForNotebook(this.onDirDelete.bind(this, child.id))}\n          </div>\n        );\n      } else {\n        arrN.push(\n          <div className=\"unit\" key={child.id}>\n            <div className='icon-container' style={{textAlign: 'center'}}>\n              <FileMarkdownTwoTone \n                style={{fontSize: '50px'}} \n                className=\"pointer\"\n                twoToneColor=\"#ffd152\"\n                onClick={() => { history.push(`/note/${child.id}`); }}\n              />\n            </div>\n            <div \n              className=\"file-name pointer\"\n              onClick={() => { history.push(`/note/${child.id}`); }}\n            >{child.name}</div>\n              {this.renderRenameButtonForNote(renameNote.bind(this, child.id), child.name)}\n              {this.renderDeleteButtonForNote(this.onNoteDelete.bind(this, child.id))}\n          </div>\n        );\n      }\n    }\n    const arr = [...arrD, ...arrN];\n    if (dirId !== '00000000-0000-0000-0000-000000000000') {\n      arr.unshift( \n        <div className=\"unit\" key=\"return\">\n          <div style={{textAlign: 'center'}}>\n            <RollbackOutlined \n              className=\"pointer\" \n              style={{fontSize: '50px', color: '#1790ff'}} \n              onClick={ () => { history.push(`/root`)} }\n            />\n          </div>\n          <div \n            className=\"file-name pointer\"\n            onClick={ () => { history.push(`/root`)} }\n          >Return</div>\n        </div>\n      );\n    }\n    return arr;\n  }\n\n  renderDeleteButtonForNotebook = (handleDelete) => {\n    const content = (\n      <Popconfirm title=\"Sure to delete this notebook?\" onConfirm={handleDelete}>\n        <Button \n          danger \n          type=\"primary\" \n          size=\"small\"\n        >\n          Delete\n        </Button>\n      </Popconfirm>);\n    return content;\n  }\n\n  renderDeleteButtonForNote = (handleDelete) => {\n    const content = (\n      <Popconfirm title=\"Sure to delete this note?\" onConfirm={handleDelete}>\n        <Button \n          danger \n          type=\"primary\" \n          size=\"small\"\n        >\n          Delete\n        </Button>\n      </Popconfirm>);\n    return content;\n  }\n\n  renderRenameButtonForNotebook = (handleRename, oldName) => {\n    const content = (\n      <InputPopupWrapper \n        title=\"Rename notebook\"\n        placeholder=\"Give a new name for your notebook\"\n        initialValue={oldName}\n        callback={handleRename}\n        async={true}\n        afterSuccess={this.props.updateFunction}\n        content={<Button size=\"small\">Rename</Button>}\n      />\n    ); \n    return content;\n  }\n\n  renderRenameButtonForNote = (handleRename, oldName) => {\n    const content = (\n      <InputPopupWrapper \n        title=\"Rename note\"\n        placeholder=\"Give a new name for your note\"\n        initialValue={oldName}\n        callback={handleRename}\n        async={true}\n        afterSuccess={this.props.updateFunction}\n        content={<Button size=\"small\">Rename</Button>}\n        maxLength={50}\n      />\n    ); \n    return content;\n  }\n\n  onDirDelete = (id) => {\n    deleteDir(id).then((msg) => {\n      this.props.updateFunction()\n      notify('success', msg);\n    });\n  }\n\n  onNoteDelete = (id) => {\n    deleteNote(id).then((msg) => {\n      this.props.updateFunction()\n      notify('success', msg);\n    });\n  }\n\n  render() {\n\n    const { directory } = this.props; \n    const dirName = directory.name;\n    const dirId = directory.id;\n    const files = this.renderChildren(directory.children, dirId);\n\n    return (\n      <div className='dir-module'>\n        <h1 className='title'>{dirName}</h1>\n        <div className=\"fileContainer\">\n          {files}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirModule.propTypes = {\n  directory: PropTypes.object.isRequired,\n  updateFunction: PropTypes.func.isRequired,\n};\n\nexport default withRouter(DirModule);\n","import React from 'react';\nimport './style.scss';\nimport {\n  FileAddOutlined,\n  FileMarkdownOutlined,\n  FolderOutlined,\n  FolderAddOutlined,\n} from '@ant-design/icons';\nimport {\n  NavLink\n} from \"react-router-dom\";\n\n\nconst Welcome = () => {\n  return (\n    <div className='welcome'>\n      <h1>Welcome to EasyMDE</h1>\n      <p>This is a markdown note application in which you can:</p>\n      <ul>\n        <li>Create & Manage notes</li>\n        <li>Full Markdown syntax support</li>\n        <li>No need for account</li>\n        <li>Automatical saving</li>\n      </ul>\n      <br/>\n\n      <h2>Local Storage</h2>\n      <p>\n        EasyMDE stores your notes locally, which means all your files are accessible offline!\n      </p>\n      <br/>\n      \n      <h2>Navigation</h2>\n      <p>\n        You can keep mutiple notebooks(folders), each of them can hold mutiple notes(files). \n        Use the Menu on left side for navigation. \n      </p>\n      <ul>\n          <li><FolderOutlined/> directs you to a notebook view which allows you manage everything in it.</li>\n          <li><FileMarkdownOutlined/> directs you to a note editor.</li>\n          <li><FolderAddOutlined/> creates a new notebook.</li>\n          <li><FileAddOutlined/> creates a new note file in current notebook.</li>\n      </ul>\n      <p>\n        Click <NavLink to=\"/root\">here</NavLink> to view your root directory.\n      </p>\n      <br/>\n\n      <h2>About Markdown</h2>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"104\" height=\"64\" viewBox=\"0 0 208 128\"><rect width=\"198\" height=\"118\" x=\"5\" y=\"5\" ry=\"10\" stroke=\"#FFD152\" strokeWidth=\"10\" fill=\"none\"/><path  fill=\"#FFD152\" d=\"M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z\"/><script xmlns=\"\"/></svg>\n      <p>\n      Markdown is a lightweight markup language that you can use to add formatting elements to plaintext text documents. Created by John Gruber in 2004, Markdown is now one of the worlds most popular markup languages.\n      </p>\n      <p>\n      Markdown is a fast and easy way to take notes, create content for a website, and produce print-ready documents.\nIt doesnt take long to learn the Markdown syntax, and once you know how to use it, you can write using Markdown just about everywhere. Most people use Markdown to create content for the web, but Markdown is good for formatting everything from email messages to grocery lists.\n      </p>\n      <br/>\n\n      <h2>About me</h2>\n    </div>\n  );\n}\n\nexport default Welcome;","import React from 'react';\nimport {\n  Switch,\n  Route,\n  useParams,\n  Redirect,\n} from \"react-router-dom\";\nimport MkNote from '../mkNote/index';\nimport DirModule from '../dirModule';\nimport Welcome from '../welcome';\n\nconst Routes = (props) => {\n\n  const { nodeTable, rootKey, fetchMenuFromRear } = props;\n\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Welcome/>\n      </Route>\n      <Route exact path=\"/root\">\n        <RootWrapper \n          rootDir={!!nodeTable ? nodeTable[rootKey] : null} \n          updateFunction={fetchMenuFromRear}\n        />\n      </Route>\n      <Route path=\"/dir/:id\">\n        <DirWrapper \n          nodeTable={nodeTable}\n          updateFunction={fetchMenuFromRear}\n        />\n      </Route>\n      <Route path=\"/note/:id\">\n        <MkNoteWrapper />\n      </Route>\n      <Route>\n        <Redirect to=\"/\" />\n      </Route>\n    </Switch>\n  );\n}\n\nconst RootWrapper = (props) => {\n\n  let { rootDir, updateFunction } = props;\n\n  return (\n    <DirModule \n      directory={rootDir} \n      updateFunction={updateFunction}\n    />\n  );\n}\n\nconst DirWrapper = (props) => {\n\n  let { id } = useParams();\n  let { nodeTable, updateFunction } = props;\n\n  if (!nodeTable[id]) return <Redirect to='/root' />\n  \n  return (\n    <DirModule \n      directory={nodeTable[id]} \n      updateFunction={updateFunction}\n    />\n  );\n}\n\nconst MkNoteWrapper = () => {\n\n  let { id } = useParams();\n\n  return (\n    <MkNote \n      noteId={id}\n    />\n  );\n}\n\nexport default Routes;","import React from 'react';\nimport {\n  BackwardFilled,\n  FileAddOutlined,\n  FileMarkdownOutlined,\n  SaveOutlined,\n  FolderOutlined,\n  FolderAddOutlined,\n  HomeOutlined,\n} from '@ant-design/icons';\nimport { Layout, Menu } from 'antd';\nimport { getMenu, createDir, updateNote, createNote } from '../api/client';\nimport { notify } from '../notification';\nimport InputPopup from '../inputPopup';\nimport Routes from './Routes';\nimport { withRouter } from \"react-router\";\nimport initialText from '../initialNote';\n\nimport './style.scss';\n\nconst { Sider } = Layout;\nconst { SubMenu } = Menu;\nconst Item = Menu.Item;\n\nclass App extends React.Component {\n\n  rootKey = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidebarCollapsed: true,\n      nodeTable: null, // a hash table which contains all the menu nodes \n      renderedMenu: null, // a list of React components\n      newFolderPopupVisible: false,\n      newNotePopupVisible: false,\n      openNotebooks: [], // a list that contains the IDs of all opened folders\n      ready: false, // a flag indicates whether the menu data is ready to be displayed.\n    }\n  }\n\n  componentDidMount() {\n    this.fetchMenuFromRear();\n  }\n\n  fetchMenuFromRear = () => {\n    const res = getMenu();\n    res.then((o) => {\n      if (!o || typeof o !== 'object') {\n        notify('error', 'failed to fetch your notebooks, please refresh');\n        return;\n      }\n      const { nodeTable, rootNode } = o;\n      console.info('fetch Menu From Rear', nodeTable, rootNode);\n      this.rootKey = rootNode.id;\n      this.setState({\n        ready: true,\n        nodeTable: nodeTable,\n        renderedMenu: this.renderMenu(rootNode, true),\n      });\n    }, (e) => {\n      notify('error', 'failed to fetch your notebooks, please refresh');\n    });\n  }\n\n  // construct React menu components from JSON data\n  renderMenu = (node, isRoot) => {\n\n    const { history } = this.props;\n\n    if (isRoot) {\n      const children = node.children.map((child) => this.renderMenu(child, false));\n      const content = (\n        <SubMenu \n          key={node.id} \n          icon={<FolderOutlined />} \n          title='Notebooks'\n          onTitleClick={() => {\n            const { isSidebarCollapsed } = this.state;\n            if (isSidebarCollapsed) {\n              this.moveSideMenu(false);\n            } else {\n              history.push(`/root`)\n            }\n          }}\n          popupClassName='side-bar-popup'\n        >\n          {children}\n        </SubMenu>\n      );\n      return content;\n    } else if (node.type === 'MKD') {\n      return <Item key={node.id} icon={<FileMarkdownOutlined />}>{node.name}</Item>;\n    } else {\n      // then the node type must be 'DIR'\n      const children = node.children.map((child) => this.renderMenu(child, false));\n      return (\n        <SubMenu\n          key={node.id}\n          icon={<FolderOutlined />} \n          title={node.name}\n          onTitleClick={() => { history.push(`/dir/${node.id}`) }}\n        >\n          {children}\n        </SubMenu>);\n    }\n  }\n\n  moveSideMenu = collapsed => {\n    this.setState({ isSidebarCollapsed: collapsed });\n  };\n\n  setNewFolderPopupVisibility = visible => {\n    this.setState({ newFolderPopupVisible: visible });\n  }\n\n  setNewNotePopupVisibility = visible => {\n    this.setState({ newNotePopupVisible: visible });\n  }\n\n  // Event handler when a note file is selected in the menu\n  onItemSelect = ({ item, key, keyPath, selectedKeys, domEvent }) => {\n    const { history } = this.props;\n\n    if (key === 'new_notebook' || key === 'new_note' || key === 'save') {\n      // noting need to be done, keep the state unchanged\n    } else if (key === 'home') {\n      history.push(`/`);\n    } else {\n      history.push(`/note/${key}`);\n    }\n  }\n  \n  saveCurrent = () => {\n\n    const { location } = this.props;\n    const doc = window.codeMirror.getDoc();\n    const isNotePage = location.pathname.indexOf('/note/') === 0;\n    const noteId = location.pathname.slice(6);\n\n    if (!isNotePage || !doc || !noteId || noteId.length < 1) return;\n\n    const text = doc.getValue();\n    updateNote(noteId, text).then(\n      (res) => {\n        notify('success', res);\n      },\n      () => {\n        notify('error', 'update failed, try again later');\n      }\n    );\n  }\n\n  getOpenKeys = (pathname) => {\n  \n    const { nodeTable } = this.state;\n    \n    if (pathname.indexOf('/root') === 0) {\n      return [this.rootKey];\n    } else if (pathname.indexOf('/dir/') === 0) {\n      // in a directory page\n      const dirId = pathname.slice(5);\n      return [this.rootKey, dirId];\n    } else if (pathname.indexOf('/note/') === 0) {\n      // in a note page\n      const noteId = pathname.slice(6);\n      const parentId = !!nodeTable[noteId] && nodeTable[noteId].parent_id;\n      return [this.rootKey, parentId];\n    } else {\n      // in other page\n      return [];\n    }\n  }\n\n  getDirId = (pathname) => {\n    if (pathname === '/root') {\n      return this.rootKey;\n    } else if (pathname.indexOf('/dir/') === 0){\n      return pathname.slice(5);\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n\n    const { isSidebarCollapsed, renderedMenu, ready, nodeTable } = this.state;\n    const { location } = this.props;\n    const isNotePage = location.pathname.indexOf('/note/') === 0;\n    const isDirPage = location.pathname.indexOf('/dir/') === 0 || location.pathname.indexOf('/root') === 0;\n    const noteId = !!isNotePage ? location.pathname.slice(6) : null;\n    const dirId = this.getDirId(location.pathname);\n    const openKeys = ready ? this.getOpenKeys(location.pathname) : [];\n\n    return (\n      <div className=\"App\">\n        <Layout>\n\n          {/* Menu */}\n          <Sider \n            className=\"side-bar\" \n            collapsible \n            collapsed={isSidebarCollapsed} \n            onCollapse={this.moveSideMenu}\n            width={240}\n            trigger={<BackwardFilled className='forward-arrow icon-btn' style={{ fontSize: '3rem' }}/>}\n            reverseArrow={true}\n          >\n            <Menu\n             mode=\"inline\" selectable={true}\n             onSelect={this.onItemSelect}\n             openKeys={openKeys}\n             selectedKeys={[noteId]}\n            >\n              <Menu.Item key=\"home\" icon={<HomeOutlined />} >\n                Home\n              </Menu.Item>\n              <Menu.Item key=\"new_notebook\" icon={<FolderAddOutlined />} onClick={this.setNewFolderPopupVisibility.bind(this, true)}>\n                New Note Book\n              </Menu.Item>\n              {!!isDirPage && <Menu.Item key=\"new_note\" icon={<FileAddOutlined/>} onClick={this.setNewNotePopupVisibility.bind(this, true)}>\n                New Note\n              </Menu.Item>}\n              {!!isNotePage && <Menu.Item key=\"save\" icon={<SaveOutlined/>} onClick={this.saveCurrent}>\n                Save\n              </Menu.Item>}\n              {renderedMenu}\n            </Menu>\n          </Sider>\n\n          {/* Modules */}\n          <Layout className=\"site-layout module-frame\">\n            {!!ready && \n            <Routes\n              nodeTable={nodeTable}\n              rootKey={this.rootKey}\n              fetchMenuFromRear={this.fetchMenuFromRear}\n            />}\n          </Layout>\n        </Layout>\n\n        {/* popups */}\n        <InputPopup \n          visible={this.state.newFolderPopupVisible} \n          title=\"Create a new notebook.\"\n          placeholder=\"Give a name for your new notebook\"\n          onCancel={this.setNewFolderPopupVisibility.bind(this, false)}\n          callback={createDir}\n          async={true}\n          afterSuccess={this.fetchMenuFromRear}\n          key={Math.random()}\n          maxLength={50}\n        />\n\n        <InputPopup \n          visible={this.state.newNotePopupVisible} \n          title=\"Create a new note.\"\n          placeholder=\"Give a name for your new note\"\n          onCancel={this.setNewNotePopupVisibility.bind(this, false)}\n          callback={createNote.bind(this, initialText, dirId)}\n          async={true}\n          afterSuccess={this.fetchMenuFromRear}\n          key={Math.random()}\n          maxLength={50}\n        />\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","const initialText = \"\\n\" +\n\"\\n\" +\n\"<----- Save Button\" +\n\"\\n\" +\n\"\\n\" +\n\"### This is your new Markdown note\\n\" +\n\"All the frequenly used Markdown syntax are supported. For more infor about the syntax, please check [here](https://www.markdownguide.org/basic-syntax/).\\n\" +\n\"You can use insertion button on the top to insert Markdown code templetes or you can write whatever Markdown you like\\n\" +\n\"<br><br>\\n\" +\n\"\\n\" +\n\"### Examples\\n\" +\n\"---------------\\n\" +\n\"#### Bold&Italic:\\n\" +\n\"\\n\" +\n\"**bold** text.\\n\" +\n\"\\n\" +\n\"__bold__ text.\\n\" +\n\"\\n\" +\n\"*Italicized* text.\\n\" +\n\"\\n\" +\n\"<br>\\n\" +\n\"\\n\" +\n\"#### Lists:\\n\" +\n\"\\n\" +\n\"1. item\\n\" +\n\"2. item\\n\" +\n\"3. item\\n\" +\n\"\\n\" +\n\"- item\\n\" +\n\"- item\\n\" +\n\"- item\\n\" +\n\"\\n\" +\n\"\\n\" +\n\"- [x]  item\\n\" +\n\"- [ ]  item\\n\" +\n\"- [ ]  item\\n\" +\n\"\\n\" +\n\"<br>\\n\" +\n\"\\n\" +\n\"#### Tables\\n\" +\n\"|       | col-1 | col-2 | col-3 | col-4 | col-5 |\\n\" +\n\"|-     -|-     -|-     -|-     -|-     -|-     -|\\n\" +\n\"| row-1 |       |       |       |       |       |\\n\" +\n\"| row-2 |       |       |       |       |       |\\n\" +\n\"| row-3 |       |       |       |       |       |\\n\" +\n\"\\n\" +\n\"<br>\\n\" +\n\"\\n\" +\n\"#### Links\\n\" +\n\"This is a link: [link](https://en.wikipedia.org/wiki/Don_Quixote)\\n\" +\n\"\\n\" +\n\"This is also a link: https://en.wikipedia.org/wiki/Don_Quixote\\n\" +\n\"\\n\" +\n\"<br>\\n\" +\n\"\\n\" +\n\"#### Pictures\\n\" +\n\"\\n\" +\n\"![alt text](https://upload.wikimedia.org/wikipedia/commons/2/20/Don_Quijote_and_Sancho_Panza.jpg)\\n\"\n\n\nexport default initialText;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/index.jsx';\nimport { HashRouter as Router } from \"react-router-dom\";\n// import { basename } from './config';\n\nimport './index.scss';\nimport 'antd/dist/antd.css'; \n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}