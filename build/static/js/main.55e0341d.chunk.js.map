{"version":3,"sources":["img/book.png","img/instruction_a1.png","img/instruction_a2.png","img/instruction_a3.png","img/instruction_a4.png","img/instruction_a5.png","img/instruction_b1.png","img/instruction_b2.png","img/instruction_b3.png","img/instruction_c1.png","img/instruction_c2.png","img/instruction_c3.png","img/instruction_c4.png","config.js","api/constructMenuData.js","notification.js","auth/util.js","api/client.js","inputPopup/index.jsx","mkNote/mkEditor/templates.js","inputPopup/InputPopupWrapper.jsx","uploadPopup/index.jsx","uploadPopup/UploadPopupWrapper.jsx","mkNote/mkEditor/index.jsx","mkNote/mkDisplay/index.jsx","mkNote/index.jsx","dirModule/index.jsx","welcome/index.jsx","auth/SignUp.jsx","auth/Confirm.jsx","auth/SignIn.jsx","app/Routes.jsx","app/index.jsx","aws-exports.js","index.js"],"names":["module","exports","baseUrl","process","constructMenuData","data","childrenTable","arr","notebooks","notes","rootNode","id","name","queue","nodeTable","node","title","notebook_name","type","parent_id","push","length","pop","children","child","sort","a","b","localeCompare","notify","msg","description","notification","message","window","auth","isSignedIn","JSON","parse","localStorage","getItem","getUserId","user","username","logout","clear","location","reload","initialize","fetch","userId","headers","mode","method","then","e","Promise","reject","console","log","checkStatus","response","ok","error","Error","statusText","getMenu","user_id","json","result","getContent","note_id","note","content_id","content","text","text_value","updateNote","body","stringify","createNote","value","createDir","deleteDir","deleteNote","renameDir","newName","dir","renameNote","InputPopup","props","handleOk","callback","async","afterSuccess","maxLength","state","trim","setState","confirmLoading","res","handleCancel","onCancel","onChange","target","initialValue","this","visible","placeholder","onOk","onPressEnter","React","Component","defaultProps","templetes","heading_1","heading_2","heading_3","heading_4","ul","ol","check","line","table","br","InputPopupWrapper","show","hide","renderModal","key","Math","random","newContent","cloneElement","onClick","Dragger","Upload","UploadPopup","loading","dragProps","multiple","action","info","status","file","url","Location","footer","className","InboxOutlined","UploadPopupWrapper","options","lineNumbers","readOnly","theme","scrollbarStyle","lineWrapping","MkEditor","code","componentDidMount","codeMirror","editorRef","current","getCodeMirror","doc","getDoc","setValue","getValue","insertTextAtCursor","cursor","getCursor","replaceRange","handleInsert","headingMenu","Item","listMenu","pictureMenu","bind","incFontSize","fontSize","resetFontSize","decFontSize","createRef","shrink","expand","exportMD","style","overlay","trigger","EnterOutlined","FontSizeOutlined","padding","ref","MkDisplay","source","escapeHtml","Loading","LoadingOutlined","spin","MkNote","getNewContent","noteId","ready","changed","history","onEditorChange","sizeChange","v","sizeConfig","blob","Blob","saveAs","prevProps","nextProps","pathname","slice","indicator","max","defaultValue","included","tooltipVisible","withRouter","DirModule","renderChildren","dirId","isRoot","arrD","arrN","textAlign","FolderOpenTwoTone","renderRenameButtonForNotebook","renderDeleteButtonForNotebook","onDirDelete","FileMarkdownTwoTone","twoToneColor","renderRenameButtonForNote","renderDeleteButtonForNote","onNoteDelete","unshift","RollbackOutlined","color","handleDelete","onConfirm","danger","size","handleRename","oldName","updateFunction","directory","dirName","files","Welcome","useHistory","signed","nickname","attributes","getNickName","src","book","alt","FolderOutlined","FileMarkdownOutlined","FolderAddOutlined","FileAddOutlined","to","instruction_pic_a1","instruction_pic_a2","instruction_pic_a4","instruction_pic_a3","instruction_pic_a5","instruction_pic_b1","instruction_pic_b2","instruction_pic_b3","instruction_pic_c1","instruction_pic_c2","instruction_pic_c3","instruction_pic_c4","display","xmlns","width","height","viewBox","x","y","ry","stroke","strokeWidth","fill","d","marginLeft","href","GithubOutlined","layout","labelCol","span","wrapperCol","tailLayout","offset","onFinishFailed","errorInfo","SignUp","initialValues","remember","onFinish","values","Auth","signUp","email","password","unConfirmedUser","userSub","catch","label","rules","required","min","Password","htmlType","PlayCircleOutlined","Confirm","confirmSignUp","confirm","disabled","SignIn","fetchMenuFromRear","signIn","cognitoUser","str","setItem","RootWrapper","rootDir","DirWrapper","useParams","MkNoteWrapper","Routes","rootKey","menuReady","exact","path","Sider","Layout","SubMenu","Menu","App","menuData","renderedMenu","renderMenu","map","icon","onTitleClick","isSidebarCollapsed","moveSideMenu","popupClassName","collapsed","setNewFolderPopupVisibility","newFolderPopupVisible","setNewNotePopupVisibility","newNotePopupVisible","setLogoutPopupVisibility","logoutPopupVisible","onItemSelect","item","keyPath","selectedKeys","domEvent","saveCurrent","isNotePage","indexOf","getOpenKeys","parentId","getDirId","openNotebooks","isDirPage","openKeys","collapsible","onCollapse","BackwardFilled","reverseArrow","selectable","onSelect","HomeOutlined","SaveOutlined","ExportOutlined","awsmobile","Amplify","configure","awsconfig","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.55e0341d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/book.9d06b99c.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_a1.d1dc1d82.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_a2.e9872bc4.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_a3.8ed1ef3a.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_a4.de9be620.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_a5.b1863031.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_b1.d16d5c6c.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_b2.5519c321.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_b3.7932d4c2.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_c1.b4256260.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_c2.de5fc78b.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_c3.b7c3e7c6.png\";","module.exports = __webpack_public_path__ + \"static/media/instruction_c4.e3f2f726.png\";","export const basename = '/markdown-Note';\nexport const offline = true;\nexport const baseUrl = process.env.REACT_APP_BASE_URL;\nexport const UPLOAD_FILE_NAME_IN_REQUEST = 'upload';","export default function constructMenuData (data) {\n\n  const childrenTable = {};\n  const arr = [...data.notebooks, ...data.notes];\n  const rootNode = {\n    id: 'ROOT',\n    name: 'Root'\n  };\n  const queue = [rootNode];\n  const nodeTable = {\n    'ROOT': rootNode,\n  };\n\n  // console.log({data})\n\n  for (let node of arr) {\n    nodeTable[node.id] = node;\n\n    if (!!node.title) {\n      node.name = node.title;\n    } else {\n      node.name = node.notebook_name;\n    }\n\n    if (!node.type) {\n      node.type = 'DIR';\n    }\n\n    if (!node.parent_id) {\n      if (!!childrenTable['ROOT']) {\n        childrenTable['ROOT'].push(node);\n      } else {\n        childrenTable['ROOT'] = [node];\n      }\n    } else {\n      if (!!childrenTable[node.parent_id]) {\n        childrenTable[node.parent_id].push(node);\n      } else {\n        childrenTable[node.parent_id] = [node];\n      }\n    }\n  }\n\n  // console.log({nodeTable, childrenTable})\n\n  // //BFS\n  while (queue.length > 0) {\n    const node = queue.pop();\n    node.children = [];\n    if (childrenTable[node.id]) {\n      for (let child of childrenTable[node.id]) {\n        node.children.push(child);\n        queue.push(child);\n      }\n    }\n    if (!node.id === 'ROOT') node.children.sort((a, b) => ('' + a.name).localeCompare(b.name));\n  }\n\n  return {rootNode, nodeTable};\n}","import { notification } from 'antd';\n\n//types: success, info, warning, error\nexport const notify = (type, msg, description) => {\n  notification[type]({\n    message: msg,\n    description: !!description? description : null\n  });\n};\n","import { Auth } from 'aws-amplify';\nimport { notify } from '../notification';\nimport fetch from 'unfetch';\nimport { baseUrl } from '../config';\n\n// Amazon Cognito is used as the Authentication service. \n// After a successful login, a JSON object that contains related user information will \n// be stored in local storage.\n// In that JSON object, an attribute called user name is used as the unique identifier for each user.\n\n\nconst auth = {};\nwindow.auth = auth;\nconst SIGNUP_SUCC_TITLE = 'Signup success!';\nconst SIGNUP_SUCC_MSG = 'Your user account has been created. Please check your email inbox for confirmation code.';\nconst SIGNUP_FAIL_TITLE = 'Signup failed';\nconst CONFIRM_SUCC_TITLE = 'email address confirmed!';\nconst CONFIRM_FAIL_TITLE = 'signup failed';\nconst SIGNIN_SUCC_TITLE = 'Sign in success';\nconst SIGNIN_FAIL_TITLE = 'Sign in failed';\n\n\nfunction isSignedIn() {\n  const user = JSON.parse(window.localStorage.getItem('user'));\n  return !!user;\n}\n\nfunction getNickName() {\n  const user = JSON.parse(window.localStorage.getItem('user'));\n  if (!user) return null;\n  return user.attributes.nickname;\n}\n\nfunction getUserId() {\n  const user = JSON.parse(window.localStorage.getItem('user'));\n  if (!user) return null;\n  return user.username;\n}\n\n/*\n  function for signup \n  values: a object that contains user information, like email, password and nickname.\n  history: a history object from react-router, used to redirect user to another page.\n*/\nfunction signUp(values, history) {\n  const p = Auth.signUp({\n    username: values.email,\n    password: values.password,\n    attributes: {\n      email: values.email,\n      nickname: values.nickname,\n    }\n  });\n\n  p.then((result) => {\n    notify('success', SIGNUP_SUCC_TITLE, SIGNUP_SUCC_MSG);\n    console.log(result);\n    window.auth.unConfirmedUser = result.user;\n    window.auth.unConfirmedUser.userId = result.userSub;\n    history.push('/confirm');\n  }, \n  (result) => {\n    notify('error', SIGNUP_FAIL_TITLE, result.message);\n    console.log(result);\n  }).catch((error) => {\n    notify('error', SIGNUP_FAIL_TITLE, error);\n    console.error(error);\n  });\n}\n\n/*\n  After a the user setup user and pass word, an emil will sent to user's mailbox\n  The user need to retrive a confirmation code from that email and use it to finish the registration\n  values: a object that contains user's email and a confirmation code\n  history: a history object from react-router, used to redirect user to another page.\n*/\nfunction confirm(values, history) {\n  const p = Auth.confirmSignUp(values.email, values.code);\n  p.then(async (result) => {\n    notify('success', CONFIRM_SUCC_TITLE, '');\n    console.log(result);\n    window.auth.user = window.auth.unConfirmedUser;\n    delete window.auth.unConfirmedUser;\n    await initialize(window.auth.user);\n    console.log(\"initialize completed!\");\n    history.push('/signin');\n  }, \n  (result) => {\n    notify('error', CONFIRM_FAIL_TITLE, result.message);\n    console.log(result);\n  }).catch((error) => {\n    notify('error', CONFIRM_FAIL_TITLE, error);\n    console.error(error);\n  });\n}\n\n/*\n  function for signIn \n  values: a object that contains user information, like email and password.\n  history: a history object from react-router, used to redirect user to another page.\n  fetchMenuFromRear: a function that supposed to fetch menu content from rear end for current user\n*/\nfunction signIn(values, history, fetchMenuFromRear) {\n  const p = Auth.signIn(values.email, values.password);\n  p.then((cognitoUser) => {\n    notify('success', SIGNIN_SUCC_TITLE, '');\n    console.log({ cognitoUser });\n    const str = JSON.stringify(cognitoUser);\n    window.localStorage.setItem('user', str);\n    fetchMenuFromRear(cognitoUser.username);\n    history.push('/welcome');\n  },\n  (result) => {\n    notify('error', SIGNIN_FAIL_TITLE, result.message);\n    console.log(result);\n  }).catch((error) => {\n    notify('error', SIGNIN_FAIL_TITLE, error);\n    console.error(error);\n  });\n}\n\nfunction logout() {\n  window.localStorage.clear();\n  window.location.reload();\n}\n\n/*\n  a function to generate user's initial content. a few predefined folders and notes will be generated for this user.\n  This function is purely for presentation.\n  user: a object that contains user information\n*/\nasync function initialize(user) {\n  await fetch(`${baseUrl}/api/initialize/${user.userId}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'GET',\n  })\n  .then(() => {}, e => Promise.reject(e));\n}\n\nexport {\n  isSignedIn,\n  getNickName,\n  signUp,\n  confirm,\n  signIn,\n  getUserId,\n  logout,\n};","import fetch from 'unfetch';\nimport { baseUrl } from '../config';\nimport constructMenuData from './constructMenuData';\nimport { getUserId } from '../auth/util';\n\nconsole.log('baseUrl: ' + baseUrl);\n\nconst checkStatus = response => {\n  if (response.ok) {\n    return response;\n  } else {\n    let error = new Error(response.statusText);\n    error.response = response;\n    return Promise.reject(error);\n  }\n}\n\nconst getMenu = async (user_id) => {\n   \n  console.log('fetching menu...')\n\n  try {\n    const result = await fetch(`${baseUrl}/api/menu/${user_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e))\n    .then(data => constructMenuData(data), e => Promise.reject(e));\n    return result; \n  } catch (e) {\n    console.log(e);\n    return Promise.reject(e);\n  }\n}\n\nconst getContent = async (note_id) => {\n  try {\n\n    const note = await fetch(`${baseUrl}/api/note/${note_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n\n    if (!note) throw new Error('note does not exist');\n    const content_id = note.content_id;\n\n    const content = await fetch(`${baseUrl}/api/content/${content_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n\n    if (!content) throw new Error('note does not exist');\n\n    return {text: content.text_value, title: note.title};\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to get the content');\n  }\n}\n\nconst updateNote = async (note_id, text) => {\n  try {\n\n    const note = await fetch(`${baseUrl}/api/note/${note_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n\n    if (!note) throw new Error('note does not exist');\n    const content_id = note.content_id;\n\n    const content = await fetch(`${baseUrl}/api/content/${content_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n    \n    content.text_value = text;\n    delete content.text;\n\n    const result = fetch(`${baseUrl}/api/content`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'PUT',\n      body: JSON.stringify(content),\n    })\n    .then(checkStatus)\n    .then(() => `${note.title} successfully updated!`, e => Promise.reject(e));\n\n    return result;\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to update note');\n  }\n}\n\nconst createNote = async (parent_id, data) => {\n\n  const title = data.value;\n  const user_id = getUserId();\n  const body = {\n    parent_id: parent_id,\n    user_id: user_id,\n    title: title,\n  };\n\n  // console.log({body})\n\n  const result = fetch(`${baseUrl}/api/note`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'POST',\n    body: JSON.stringify(body),\n  })\n  .then(checkStatus)\n  .then(() => `${title} successfully created!`, e => Promise.reject('failed to create note'));\n\n  return result;\n}\n\nconst createDir = async (data) => {\n\n  const notebook_name = data.value;\n  const user_id = getUserId();\n  const body = {\n    user_id: user_id,\n    notebook_name: notebook_name,\n  };\n\n  const result = fetch(`${baseUrl}/api/dir`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'POST',\n    body: JSON.stringify(body),\n  })\n  .then(checkStatus)\n  .then(() => `${notebook_name} successfully created!`, e => Promise.reject('failed to create notebook'));\n\n  return result;\n}\n\nconst deleteDir = async (id) => {\n  const result = fetch(`${baseUrl}/api/dir/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'DELETE',\n  })\n  .then(checkStatus)\n  .then(() => `successfully deleted!`, e => Promise.reject('failed to delete notebook'));\n\n  return result;\n}\n\nconst deleteNote = async (id) => {\n  const result = fetch(`${baseUrl}/api/note/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'DELETE',\n  })\n  .then(checkStatus)\n  .then(() => `successfully deleted!`, e => Promise.reject('failed to delete note'));\n\n  return result;\n}\n\nconst renameDir = async (id, data) => {\n  const newName = data.value;\n\n  const dir = await fetch(`${baseUrl}/api/dir/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'GET',\n  })\n  .then(checkStatus)\n  .then(response => response.json(), e => Promise.reject(e));\n\n  dir.notebook_name = newName;\n\n  const result = fetch(`${baseUrl}/api/dir`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'PUT',\n    body: JSON.stringify(dir),\n  })\n  .then(checkStatus)\n  .then(() => `${newName} successfully updated!`, async (e) => {\n    const msg = await e.response.text();\n    return Promise.reject(msg);\n  });\n\n  return result;\n}\n\nconst renameNote = async (id, data) => {\n  const newName = data.value;\n\n  const note = await fetch(`${baseUrl}/api/note/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'GET',\n  })\n  .then(checkStatus)\n  .then(response => response.json(), e => Promise.reject(e));\n\n  note.title = newName;\n\n  const result = fetch(`${baseUrl}/api/note`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'PUT',\n    body: JSON.stringify(note),\n  })\n  .then(checkStatus)\n  .then(() => `${newName} successfully updated!`, async (e) => {\n    const msg = await e.response.text();\n    return Promise.reject(msg);\n  });\n\n  return result;\n}\n\nexport {\n  getMenu,\n  getContent,\n  createNote,\n  createDir,\n  deleteDir,\n  deleteNote,\n  renameDir,\n  renameNote,\n  updateNote,\n};\n\n","import { Modal, Input } from 'antd';\nimport React from 'react';\nimport { notify } from '../notification';\nimport PropTypes from 'prop-types';\n\n// This is a popup component that contains a input slot. \n// After confirmation, the input value will be passed to the callback function.\n// The callback function can be either sync or async.\n\nclass InputPopup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmLoading: false,\n      value: this.props.initialValue,\n    }\n  }\n\n  // callback will be triggered first, if this callback is async, 'afterSuccess' will be triggered after a successful callback\n  handleOk = () => {\n\n    const { callback, async, afterSuccess, maxLength } = this.props;\n    const { value } = this.state;\n\n    if (value === null || value.trim().length === 0) { \n      notify('error', 'invalid input');\n      return;\n    }\n\n    if (value.trim().length > maxLength) {\n      const max = maxLength ? maxLength : 1000;\n      notify('error', 'input should be shorter than ' + max);\n      return;\n    }\n\n    if (async) {\n      // the callback function is a async function\n      this.setState({ confirmLoading: true });\n      callback({ value })\n      .then(\n        (res) => {\n          this.setState({ confirmLoading: false });\n          notify('success', res);\n          this.handleCancel();\n          if (typeof afterSuccess === 'function') afterSuccess();\n        }, \n        (e) => { \n          notify('error', e);\n          this.setState({ confirmLoading: false }); \n        }\n      );\n    } else {\n      callback({ value });\n      this.handleCancel();\n      if (typeof afterSuccess === 'function') afterSuccess();\n    }\n  };\n\n  handleCancel = () => {\n    const { onCancel } = this.props;\n    onCancel();\n  };\n\n  onChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  render() {\n\n    const { confirmLoading, value } = this.state;\n    const { title, visible, placeholder } = this.props;\n\n    return (\n        <Modal\n          title={title}\n          visible={visible}\n          onOk={this.handleOk}\n          confirmLoading={confirmLoading}\n          onCancel={this.handleCancel}\n        >\n          <Input \n            value={value} \n            placeholder={placeholder}\n            onChange={this.onChange}\n            onPressEnter={this.handleOk}\n          />\n        </Modal>\n    );\n  }\n}\n\nInputPopup.propTypes = {\n  visible: PropTypes.bool.isRequired,\n  title: PropTypes.string,   \n  initialValue: PropTypes.string,\n  placeholder: PropTypes.string,   \n  onCancel: PropTypes.func.isRequired,\n  callback: PropTypes.func.isRequired,   \n  async: PropTypes.bool,  \n  afterSuccess: PropTypes.func, \n  maxLength: PropTypes.number,\n};\n\nInputPopup.defaultProps = {\n  title: '',   \n  initialValue: '',\n  placeholder: '',  \n  async: false,  \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default InputPopup;","const templetes = {\n    heading_1: '# heading',\n    heading_2: '## heading',\n    heading_3: '### heading',\n    heading_4: '#### heading',\n    ul: '- item\\n- item\\n- item\\n',\n    ol: '1. item\\n2. item\\n3. item\\n',\n    check: '\\n- [x]  item\\n- [ ]  item\\n- [ ]  item\\n',\n    line: '\\n---------------',\n    table:  \"|       | col-1 | col-2 | col-3 | col-4 | col-5 |\\n\" +\n            \"|-     -|-     -|-     -|-     -|-     -|-     -|\\n\" +\n            \"| row-1 |       |       |       |       |       |\\n\" +\n            \"| row-2 |       |       |       |       |       |\\n\" +\n            \"| row-3 |       |       |       |       |       |\\n\",\n    br: '<br>'\n}\nexport default templetes; ","import React from 'react';\nimport InputPopup from './index';\nimport PropTypes from 'prop-types';\n\nclass InputPopupWrapper extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false\n    }\n  }\n\n  show = () => {\n    this.setState({ visible: true });\n  }\n\n  hide = () => {\n    this.setState({ visible: false });\n  }\n\n  renderModal = () => {\n\n    const { title, initialValue, placeholder, callback, async, afterSuccess, maxLength } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <InputPopup\n        visible={visible} \n        title={title}\n        initialValue={initialValue}\n        placeholder={placeholder}\n        onCancel={this.hide}\n        callback={callback}\n        async={async}\n        afterSuccess={afterSuccess}\n        maxLength={maxLength}\n        key={Math.random()}\n    />);\n  }\n\n  render() {\n\n    const { content } = this.props;\n    const newContent = React.cloneElement(content, {\n      onClick: this.show,\n    });\n\n    return (\n      <>\n        {newContent}\n        {this.renderModal()}\n      </>\n    );\n  }\n}\n\nInputPopupWrapper.propTypes = {\n  title: PropTypes.string,   \n  initialValue: PropTypes.string,\n  placeholder: PropTypes.string,   \n  callback: PropTypes.func.isRequired,   \n  async: PropTypes.bool,  \n  afterSuccess: PropTypes.func, \n  content: PropTypes.node.isRequired,\n  maxLength: PropTypes.number,\n};\n\nInputPopupWrapper.defaultProps = {\n  title: '',   \n  initialValue: '',\n  placeholder: '',  \n  async: false,  \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default InputPopupWrapper;","import { Modal, Upload } from 'antd';\nimport React from 'react';\nimport { notify } from '../notification';\nimport PropTypes from 'prop-types';\nimport { InboxOutlined } from '@ant-design/icons';\nimport { baseUrl, UPLOAD_FILE_NAME_IN_REQUEST } from '../config';\n\nconst { Dragger } = Upload;\n\n// This is a popup component that contains a upload component. \n// After a successful upload, the url of file will be passed to the callback function.\n// The callback function has to be async.\n\nclass UploadPopup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n    }\n  }\n\n  handleCancel = () => {\n    const { onCancel } = this.props;\n    onCancel();\n  };\n\n  render() {\n\n    const { loading } = this.state;\n    const { title, visible, callback, onCancel } = this.props;\n\n    const dragProps = {\n      name: UPLOAD_FILE_NAME_IN_REQUEST,\n      multiple: false,\n      action: `${baseUrl}/api/upload_image`,\n      onChange(info) {\n        const { status } = info.file;\n        if (status === 'done') {\n\n          const url = info.file.response.Location;\n          notify('success', `${info.file.name} file uploaded successfully.`);\n          callback({value: url}); // pass the newly generated url back to template insert handler\n          onCancel();\n        } else if (status === 'error') {\n          notify(\n            'error', \n            `${info.file.name} file upload failed.`,\n            info.file.response\n          );\n          \n        }\n      },\n    };\n\n    return (\n        <Modal\n          title={title}\n          visible={visible}\n          loading={loading}\n          footer={null}\n          onCancel={this.handleCancel}\n        >\n          <Dragger {...dragProps}>\n            <p className=\"ant-upload-drag-icon\">\n              <InboxOutlined />\n            </p>\n            <p className=\"ant-upload-text\">Click or drag picture file to this area to upload</p>\n            <p className=\"ant-upload-hint\">\n              Support file type: png, jpg, jpeg, gif, bmp, webp\n            </p>\n          </Dragger>\n        </Modal>\n    );\n  }\n}\n\nUploadPopup.propTypes = {\n  visible: PropTypes.bool.isRequired,\n  title: PropTypes.string,   \n  afterSuccess: PropTypes.func, \n  maxLength: PropTypes.number,\n  onCancel: PropTypes.func.isRequired,\n};\n\nUploadPopup.defaultProps = {\n  title: '',   \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default UploadPopup;","import React from 'react';\nimport UploadPopup from './index';\nimport PropTypes from 'prop-types';\n\nclass UploadPopupWrapper extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false\n    }\n  }\n\n  show = () => {\n    this.setState({ visible: true });\n  }\n\n  hide = () => {\n    this.setState({ visible: false });\n  }\n\n  renderModal = () => {\n\n    const { title, callback, afterSuccess, maxLength } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <UploadPopup\n        visible={visible} \n        title={title}\n        onCancel={this.hide}\n        callback={callback}\n        afterSuccess={afterSuccess}\n        maxLength={maxLength}\n        key={Math.random()}\n    />);\n  }\n\n  render() {\n\n    const { content } = this.props;\n    const newContent = React.cloneElement(content, {\n      onClick: this.show,\n    });\n\n    return (\n      <>\n        {newContent}\n        {this.renderModal()}\n      </>\n    );\n  }\n}\n\nUploadPopupWrapper.propTypes = {\n  title: PropTypes.string,   \n  afterSuccess: PropTypes.func, \n  content: PropTypes.node.isRequired,\n  maxLength: PropTypes.number,\n};\n\nUploadPopupWrapper.defaultProps = {\n  title: '',   \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default UploadPopupWrapper;","import React from 'react';\nimport CodeMirror from 'react-codemirror';\nimport templetes from './templates.js';\nimport { Menu, Dropdown } from 'antd';\nimport 'codemirror/mode/markdown/markdown';\nimport PropTypes from 'prop-types';\nimport InputPopupWrapper from '../../inputPopup/InputPopupWrapper';\nimport UploadPopupWrapper from '../../uploadPopup/UploadPopupWrapper';\nimport {\n  EnterOutlined,\n  FontSizeOutlined,\n} from '@ant-design/icons';\n\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/darcula.css'\nimport './style.scss';\n\nconst options = {\n  lineNumbers: false,\n  readOnly: false,\n  mode: 'markdown',\n  theme: 'darcula',\n  scrollbarStyle: 'null',\n  lineWrapping: true\n}\n\nclass MkEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.editorRef = React.createRef();\n    this.state = {\n      fontSize: 16, \n    }\n  }\n\n  onChange = (code) => {\n    this.props.onChange(code);\n  }\n\n  componentDidMount = () => {\n    const { initialValue } = this.props;\n    try {\n      window.codeMirror = this.editorRef.current.getCodeMirror();\n      // const last_text = window.localStorage.getItem('mkEditor_last_time');\n      const doc = this.editorRef.current.getCodeMirror().getDoc();\n      doc.setValue(initialValue)\n      this.onChange(doc.getValue());\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  insertTextAtCursor = (text) => {\n    try {\n      const doc = this.editorRef.current.getCodeMirror().getDoc();\n      const cursor = doc.getCursor();\n      doc.replaceRange(text, cursor);\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  // the function that insert code templates into the editor.\n  // key: the type of the template, like \"ol\" or \"table\"\n  // data: sometimes, the template to be inserted need additional data input, like picture address \n  handleInsert = ({ key }, data) => {\n    console.log(data)\n    if (key === 'pic') {\n      this.insertTextAtCursor(`\\n![alt text](${data.value})\\n`);\n    } else if (key === 'link') {\n      this.insertTextAtCursor(`\\n[text](${data.value})\\n`);\n    } else {\n      const text = templetes[key];\n      if (!!text) this.insertTextAtCursor(text);\n    }\n  };\n\n  headingMenu = (\n    <Menu onClick={this.handleInsert}>\n      <Menu.Item key=\"heading_1\">\n        Heading level 1\n      </Menu.Item>\n      <Menu.Item key=\"heading_2\">\n        Heading level 2\n      </Menu.Item>\n      <Menu.Item key=\"heading_3\">\n        Heading level 3\n      </Menu.Item>\n      <Menu.Item key=\"heading_4\">\n        Heading level 4\n      </Menu.Item>\n    </Menu>\n  );\n\n  listMenu = (\n    <Menu onClick={this.handleInsert}>\n      <Menu.Item key=\"ol\">\n        Ordered list\n      </Menu.Item>\n      <Menu.Item key=\"ul\">\n        Unordered list\n      </Menu.Item>\n      <Menu.Item key=\"check\">\n        Check list\n      </Menu.Item>\n    </Menu>\n  );\n\n  pictureMenu = (\n    <Menu>\n      <Menu.Item key=\"pic_address\">\n        <InputPopupWrapper \n          title=\"Insert picture\"\n          placeholder=\"Paste the picture link here\"\n          initialValue={''}\n          callback={this.handleInsert.bind(this, {key: 'pic'})}\n          async={false}\n          content={<span className=\"drop-down-trigger\">Picture from internet</span>}\n        />\n      </Menu.Item>\n      <Menu.Item key=\"pic_upload\">\n        <UploadPopupWrapper \n          title=\"Upload picture\"\n          callback={this.handleInsert.bind(this, {key: 'pic'})}\n          content={<span className=\"drop-down-trigger\">Upload picture</span>}\n        />\n      </Menu.Item>\n    </Menu>\n  );\n\n  incFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize + 1});\n  }\n\n  resetFontSize = () => {\n    this.setState({ fontSize: 16});\n  }\n\n  decFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize - 1});\n  }\n\n  render() {\n\n    const { shrink, expand, exportMD } = this.props;\n    const { fontSize } = this.state;\n    let className = 'mk-editor';\n\n    if (shrink) className += ' shrink';\n    if (expand) className += ' expand';\n\n    return(\n      <div className={className} style={{fontSize: fontSize + 'px'}}>\n        <div className='top-bar'>\n          <span className='option' onClick={() => {exportMD()}}>Export</span>\n          <span className='gap'></span>\n          Insert\n          <Dropdown overlay={this.headingMenu} trigger={['click']}>\n            <span className='option'>Heading</span>\n          </Dropdown>\n          <Dropdown overlay={this.listMenu} trigger={['click']}>\n            <span className='option'>List</span>\n          </Dropdown>\n          <Dropdown overlay={this.pictureMenu} trigger={['click']}>\n            <span className='option'>Picture</span>\n          </Dropdown>\n          <InputPopupWrapper \n            title=\"Insert link\"\n            placeholder=\"Paste the link here\"\n            initialValue={''}\n            callback={this.handleInsert.bind(this, {key: 'link'})}\n            async={false}\n            content={<span className='option'>Link</span>}\n          />\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'line'})}>Line</span>\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'table'})}>Table</span>\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'br'})}><EnterOutlined /></span>\n          <span className='gap'></span>\n          <FontSizeOutlined style={{padding: '8px 6px 0px 0px'}}/>\n          <span className='option' onClick={this.incFontSize}>+</span>\n          <span className='option' onClick={this.resetFontSize}>Re</span>\n          <span className='option' onClick={this.decFontSize}>-</span>\n        </div>\n        <CodeMirror \n          ref={this.editorRef}\n          onChange={this.onChange}\n          options={options} \n        />\n      </div>\n    );\n  }\n};\n\nMkEditor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  exportMD: PropTypes.func.isRequired,\n  initialValue: PropTypes.string.isRequired,\n  shrink: PropTypes.bool.isRequired,\n  expand: PropTypes.bool.isRequired,\n};\n\nexport default MkEditor;","import React from 'react';\nimport Markdown from 'react-markdown';\nimport './style.scss';\n\nclass MkDisplay extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fontSize: 20, \n    }\n  }\n\n  incFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize + 1});\n  }\n\n  resetFontSize = () => {\n    this.setState({ fontSize: 16});\n  }\n\n  decFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize - 1});\n  }\n\n  render () {\n    const { shrink, expand, source } = this.props;\n    const { fontSize } = this.state;\n    let className = 'mk-display';\n\n    if (shrink) className += ' shrink';\n    if (expand) className += ' expand';\n\n    return (\n      <div className={className} style={{fontSize: fontSize + 'px'}}>\n        <div className=\"font-size\" >\n          Font size:\n          <span className='option' onClick={this.incFontSize}>+</span>\n          <span className='option' onClick={this.resetFontSize}>Reset</span>\n          <span className='option' onClick={this.decFontSize}>-</span>\n        </div>\n        <Markdown source={source} escapeHtml={false}/>\n      </div>\n    );\n  }\n}\n\nexport default MkDisplay;","import React from 'react';\nimport MkEditor from './mkEditor/index';\nimport MkDisplay from './mkDisplay/index';\nimport PropTypes from 'prop-types';\nimport { getContent } from '../api/client';\nimport { Spin, Slider } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { updateNote } from '../api/client';\nimport { withRouter } from \"react-router\";\nimport { notify } from '../notification';\nimport { saveAs } from 'file-saver';\n\nimport './style.scss';\n\nconst Loading = <LoadingOutlined style={{ fontSize: 120 }} spin />;\n\nclass MkNote extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      source: '',\n      ready: false,\n      changed: false,\n      sizeConfig: 1,\n      title: 'unknown',\n    }\n  }\n\n  componentDidMount() {\n    const { noteId } = this.props;\n    this.getNewContent(noteId);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { noteId } = this.props;\n    const { noteId: oldId } = prevProps;\n\n    if (oldId !== noteId) {\n      this.getNewContent(noteId);\n    }\n  }\n\n  getNewContent = (noteId) => {\n    this.setState({\n      ready: false,\n    });\n    getContent(noteId).then(\n      (res) => {\n        this.setState({\n          source: res.text,\n          ready: true,\n          changed: false,\n          title: res.title,\n        });\n      },\n      () => {\n        this.props.history.push('/');\n      }\n    );\n  }\n\n  onEditorChange = (code) => {\n    if (this.state.source === code) return;\n    this.setState({\n      source: code,\n      changed: true,\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n\n    // auto saving\n    if (nextProps.location.pathname !== this.props.location.pathname) {\n\n      const doc = window.codeMirror.getDoc();\n      const noteId = this.props.location.pathname.slice(6);\n      const changed = this.state.changed;\n  \n      if (!doc || !noteId || noteId.length < 1 || !changed) return true;\n  \n      const text = doc.getValue();\n      updateNote(noteId, text).then(\n        (res) => {\n          notify('success', \"Auto saving completed \\n\" + res);\n        },\n        () => {\n          notify('error', 'update failed, try again later');\n        }\n      );\n    }\n    return true;\n  }\n\n  componentWillUnmount() {\n    // auto saving\n    const doc = window.codeMirror.getDoc();\n    const noteId = this.props.location.pathname.slice(6);\n    const changed = this.state.changed;\n\n    if (!doc || !noteId || noteId.length < 1 || !changed) return true;\n\n    const text = doc.getValue();\n    updateNote(noteId, text).then(\n      (res) => {\n        notify('success', \"Auto saving completed \\n\" + res);\n      },\n      () => {\n        notify('error', 'update failed, try again later');\n      }\n    );\n  }\n\n  sizeChange = (v) => {\n    this.setState({sizeConfig: v});\n  }\n\n  exportMD = () => {\n    const blob = new Blob([this.state.source], {type: \"text/plain;charset=utf-8\"});\n    saveAs(blob, this.state.title + \".md\");\n  }\n\n  render() {\n\n    const { source, ready, sizeConfig } = this.state;\n\n    return (\n      <div className=\"main mk-mode\">\n        {!ready && <Spin indicator={Loading} />}\n        {!!ready && \n          <>\n            <MkEditor \n              onChange={this.onEditorChange}\n              exportMD={this.exportMD}\n              initialValue={source} \n              shrink={sizeConfig === 0}\n              expand={sizeConfig === 2}\n            />\n            <MkDisplay \n              source={this.state.source} \n              shrink={sizeConfig === 2}\n              expand={sizeConfig === 0}\n            />\n            <div className=\"slider-bar\">\n              <Slider \n                max={2} \n                defaultValue={1} \n                included={false}\n                tooltipVisible={false} \n                onChange={this.sizeChange}\n                value={sizeConfig}\n              />\n            </div>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nMkNote.propTypes = {\n  noteId: PropTypes.string,\n};\n\nexport default withRouter(MkNote);\n","import React from 'react';\nimport {\n  FolderOpenTwoTone,\n  FileMarkdownTwoTone,\n  RollbackOutlined\n} from '@ant-design/icons';\nimport { Button, Popconfirm } from 'antd';\nimport { notify } from '../notification';\nimport { deleteDir, deleteNote, renameDir, renameNote } from '../api/client.js';\nimport InputPopupWrapper from '../inputPopup/InputPopupWrapper';\nimport { withRouter } from \"react-router\";\nimport PropTypes from 'prop-types';\n\nimport './style.scss';\n\nclass DirModule extends React.Component {\n\n  renderChildren = (children, dirId) => {\n\n    const { history, isRoot} = this.props;\n    const arrD = [];\n    const arrN = [];\n\n    children.sort((a, b) => ('' + a.name).localeCompare('' + b.name));\n\n    for (let child of children) {\n      if (child.type === 'DIR') {\n        arrD.push(\n          <div className=\"unit\" key={child.id}>\n            <div className='icon-container' style={{textAlign: 'center'}}>\n              <FolderOpenTwoTone \n                style={{fontSize: '50px'}} \n                className=\"pointer\"\n                onClick={() => { history.push(`/dir/${child.id}`); }}\n              />\n            </div>\n            <div \n              className=\"file-name pointer\"\n              onClick={() => {history.push(`/dir/${child.id}`); }}\n            >{child.name}</div>\n              {this.renderRenameButtonForNotebook(renameDir.bind(this, child.id), child.name)}\n              {this.renderDeleteButtonForNotebook(this.onDirDelete.bind(this, child.id))}\n          </div>\n        );\n      } else {\n        arrN.push(\n          <div className=\"unit\" key={child.id}>\n            <div className='icon-container' style={{textAlign: 'center'}}>\n              <FileMarkdownTwoTone \n                style={{fontSize: '50px'}} \n                className=\"pointer\"\n                twoToneColor=\"#ffd152\"\n                onClick={() => { history.push(`/note/${child.id}`); }}\n              />\n            </div>\n            <div \n              className=\"file-name pointer\"\n              onClick={() => { history.push(`/note/${child.id}`); }}\n            >{child.name}</div>\n              {this.renderRenameButtonForNote(renameNote.bind(this, child.id), child.name)}\n              {this.renderDeleteButtonForNote(this.onNoteDelete.bind(this, child.id))}\n          </div>\n        );\n      }\n    }\n\n    const arr = [...arrD, ...arrN];\n    \n    if (!isRoot) {\n      arr.unshift( \n        <div className=\"unit\" key=\"return\">\n          <div style={{textAlign: 'center'}}>\n            <RollbackOutlined \n              className=\"pointer\" \n              style={{fontSize: '50px', color: '#1790ff'}} \n              onClick={ () => { history.push(`/root`)} }\n            />\n          </div>\n          <div \n            className=\"file-name pointer\"\n            onClick={ () => { history.push(`/root`)} }\n          >Return</div>\n        </div>\n      );\n    }\n\n    return arr;\n  }\n\n  renderDeleteButtonForNotebook = (handleDelete) => {\n    const content = (\n      <Popconfirm title=\"Sure to delete this notebook?\" onConfirm={handleDelete}>\n        <Button \n          danger \n          type=\"primary\" \n          size=\"small\"\n        >\n          Delete\n        </Button>\n      </Popconfirm>);\n    return content;\n  }\n\n  renderDeleteButtonForNote = (handleDelete) => {\n    const content = (\n      <Popconfirm title=\"Sure to delete this note?\" onConfirm={handleDelete}>\n        <Button \n          danger \n          type=\"primary\" \n          size=\"small\"\n        >\n          Delete\n        </Button>\n      </Popconfirm>);\n    return content;\n  }\n\n  renderRenameButtonForNotebook = (handleRename, oldName) => {\n    const content = (\n      <InputPopupWrapper \n        title=\"Rename notebook\"\n        placeholder=\"Give a new name for your notebook\"\n        initialValue={oldName}\n        callback={handleRename}\n        async={true}\n        afterSuccess={this.props.updateFunction}\n        content={<Button size=\"small\">Rename</Button>}\n      />\n    ); \n    return content;\n  }\n\n  renderRenameButtonForNote = (handleRename, oldName) => {\n    const content = (\n      <InputPopupWrapper \n        title=\"Rename note\"\n        placeholder=\"Give a new name for your note\"\n        initialValue={oldName}\n        callback={handleRename}\n        async={true}\n        afterSuccess={this.props.updateFunction}\n        content={<Button size=\"small\">Rename</Button>}\n        maxLength={50}\n      />\n    ); \n    return content;\n  }\n\n  onDirDelete = (id) => {\n    deleteDir(id)\n    .then((msg) => {\n      this.props.updateFunction()\n      notify('success', msg);\n    }\n    ,(e) => {\n      notify('error', e);\n    });\n  }\n\n  onNoteDelete = (id) => {\n    deleteNote(id)\n    .then((msg) => {\n      this.props.updateFunction()\n      notify('success', msg);\n    }\n    ,(e) => {\n      notify('error', e);\n    });\n  }\n\n  render() {\n\n    const { directory } = this.props; \n    const dirName = directory.name;\n    const dirId = directory.id;\n    const files = this.renderChildren(directory.children, dirId);\n\n    return (\n      <div className='dir-module'>\n        <h1 className='title'>{dirName}</h1>\n        <div className=\"fileContainer\">\n          {files}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirModule.propTypes = {\n  directory: PropTypes.object.isRequired,\n  updateFunction: PropTypes.func.isRequired,\n  isRoot: PropTypes.bool.isRequired,\n};\n\nexport default withRouter(DirModule);\n","import React  from 'react';\nimport './style.scss';\nimport {\n  FileAddOutlined,\n  FileMarkdownOutlined,\n  FolderOutlined,\n  FolderAddOutlined,\n  GithubOutlined,\n} from '@ant-design/icons';\nimport {\n  NavLink,\n  useHistory\n} from \"react-router-dom\";\nimport { isSignedIn, getNickName } from '../auth/util';\nimport book from '../img/book.png';\nimport instruction_pic_a1 from '../img/instruction_a1.png';\nimport instruction_pic_a2 from '../img/instruction_a2.png';\nimport instruction_pic_a3 from '../img/instruction_a3.png';\nimport instruction_pic_a4 from '../img/instruction_a4.png';\nimport instruction_pic_a5 from '../img/instruction_a5.png';\nimport instruction_pic_b1 from '../img/instruction_b1.png';\nimport instruction_pic_b2 from '../img/instruction_b2.png';\nimport instruction_pic_b3 from '../img/instruction_b3.png';\nimport instruction_pic_c1 from '../img/instruction_c1.png';\nimport instruction_pic_c2 from '../img/instruction_c2.png';\nimport instruction_pic_c3 from '../img/instruction_c3.png';\nimport instruction_pic_c4 from '../img/instruction_c4.png';\n\nconst Welcome = () => {\n\n  const history = useHistory();\n  const signed = isSignedIn();\n  const nickname = getNickName();\n\n  if (!signed) {\n    history.push(\"/signin\");\n  }\n\n  return (\n    signed && <div className='welcome'>\n      <h1>Welcome to MD-Note, {nickname}</h1>\n\n      <h2>This is an Application that you can create and manage notes</h2>\n      <ul>\n        <li>Full Markdown syntax support & Real time compilation/display</li>\n        <li>Manage your notebooks(folders) and notes(files).</li>\n        <li>Auto saving</li>\n      </ul>\n      <br/>\n      <img className=\"book-picture\" src={book} alt='cannot be displayed due to network reasons'></img>\n      \n      <h2>Navigation</h2>\n      <p>\n        Use the Menu on left side for navigation. <br/>\n        A note can be stored in either a notebook or in root directory. <br/>\n        <span className=\"bold\">You cannot store a notebook in another notebook.</span> <br/>\n        <span className=\"bold\">Initially, there are a few notes and notebooks for you to explore.</span>\n      </p>\n      <ul>\n          <li><FolderOutlined/> directs you to a notebook view which allows you to manage everything in it.</li>\n          <li><FileMarkdownOutlined/> directs you to a note editor.</li>\n          <li><FolderAddOutlined/> creates a new notebook.</li>\n          <li><FileAddOutlined/> creates a new note file in current notebook.</li>\n      </ul>\n      <p>\n        Click <NavLink to=\"/root\">here</NavLink> to view your root directory.\n      </p>\n      <br/>\n\n      <h2>Some Tips:</h2>\n      <h2>How to insert Markdown templates?</h2>\n      <div className=\"instruction-a\">\n        <p>1. The shortcut is on the topside of the editor.</p>\n        <img className=\"instruction-pic-a1\" src={instruction_pic_a1} alt='cannot be displayed due to network reasons'></img>\n        <br/><br/>\n        <p>2. Select the template you want to insert.</p>\n        <div className=\"section\">\n          <img className=\"instruction-pic-a2\" src={instruction_pic_a2} alt='cannot be displayed due to network reasons'></img>\n          <img className=\"instruction-pic-a4\" src={instruction_pic_a4} alt='cannot be displayed due to network reasons'></img>\n        </div>\n        <br/>\n        <p>3. The code template would be generated in the editor.</p>\n        <div className=\"section\">\n          <img className=\"instruction-pic-a3\" src={instruction_pic_a3} alt='cannot be displayed due to network reasons'></img>\n          <img className=\"instruction-pic-a5\" src={instruction_pic_a5} alt='cannot be displayed due to network reasons'></img>\n        </div>\n      </div>\n      <br/><br/><br/>\n\n\n      <h2>How to insert pictures from internet?</h2>\n      <div className=\"instruction-b\">\n        <div className=\"section-left\">\n          <p>1. Copy address</p>\n          <img className=\"instruction-pic-b1\" src={instruction_pic_b1} alt='cannot be displayed due to network reasons'></img><br/><br/>\n        </div>\n        <div className=\"section-right\">\n          <p>2. Use the shortcut button, select picture from internet</p>\n          <img className=\"instruction-pic-b2\" src={instruction_pic_b2} alt='cannot be displayed due to network reasons'></img><br/><br/>\n          <p>3. Paste the address</p>\n          <img className=\"instruction-pic-b3\" src={instruction_pic_b3} alt='cannot be displayed due to network reasons'></img><br/><br/>\n        </div>\n      </div>\n      <br/><br/><br/>\n\n\n\n      <h2>How to insert pictures from your own device?</h2>\n      <div className=\"instruction-c\">\n        <p>1. Use the shortcut button, select upload picture</p>\n        <img className=\"instruction-pic-c1\" src={instruction_pic_c1} alt='cannot be displayed due to network reasons'></img><br/><br/>\n        <p>2. Choose your picture from your own device</p>\n        <img className=\"instruction-pic-c2\" src={instruction_pic_c2} alt='cannot be displayed due to network reasons'></img><br/><br/>\n        <img className=\"instruction-pic-c3\" src={instruction_pic_c3} alt='cannot be displayed due to network reasons'></img><br/><br/>\n        <p>3. The upload should be completed shortly</p>\n        <img className=\"instruction-pic-c4\" src={instruction_pic_c4} alt='cannot be displayed due to network reasons'></img><br/><br/>\n      </div>\n      <br/><br/><br/>\n\n      \n      \n      <h2>About Markdown</h2>\n      <div style={{display: \"flex\"}}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"104\" height=\"64\" viewBox=\"0 0 208 128\"><rect width=\"198\" height=\"118\" x=\"5\" y=\"5\" ry=\"10\" stroke=\"#FFD152\" strokeWidth=\"10\" fill=\"none\"/><path  fill=\"#FFD152\" d=\"M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z\"/><script xmlns=\"\"/></svg>\n        <p style={{marginLeft: '20px'}}>\n          Markdown is a lightweight markup language that you can use to add formatting elements to plaintext text documents. Created by John Gruber in 2004, Markdown is now one of the worlds most popular markup languages.\n        </p>\n      </div>\n      <p>\n      Markdown is a fast and easy way to take notes, create content for a website, and produce print-ready documents.\nIt doesnt take long to learn the Markdown syntax, and once you know how to use it, you can write using Markdown just about everywhere. Most people use Markdown to create content for the web, but Markdown is good for formatting everything from email messages to grocery lists.\n      </p>\n      <br/>\n\n      <h2>About me \n        &nbsp;\n        <a href=\"https://github.com/fuhuan1991\"><GithubOutlined /></a>\n      </h2>\n      <p>\n        I'm Huan Fu, a Software Engineer with 2 years of developing experience of data platform and E-commerce web applications. \n        I'm always passionate in applying programing skills to create better experience for users.\n        I just finished my computer science master's degree at Tufts University.\n      </p>\n      <a href=\"https://fuhuan1991.github.io\">My Portfolio</a>\n    </div>\n  );\n}\n\nexport default Welcome;","import React  from 'react';\nimport './style.scss';\nimport { Form, Input, Button } from 'antd';\nimport { useHistory, NavLink } from \"react-router-dom\";\nimport { signUp } from './util';\nimport {\n  PlayCircleOutlined,\n} from '@ant-design/icons';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\nconst SignUp = () => {\n\n  const history = useHistory();\n\n  const onFinish = (values) => {\n    signUp(values, history);\n  };\n\n  return (\n    <div className='sign-up'>\n      <h2>Sign up</h2>\n      <div className='container'>\n        <Form\n          {...layout}\n          name=\"signInForm\"\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          size='large'\n        >\n          <Form.Item\n            label=\"Email(user name)\"\n            name=\"email\"\n            rules={[{ required: true, message: 'Please provide your email address!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[\n              { required: true, message: 'Please input your password!' },\n              { min: 6, message: 'password should have at least 6 characters' }\n          ]}\n          >\n            <Input.Password />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Nickname\"\n            name=\"nickname\"\n            rules={[{ required: true, message: 'Please tell me your nickname!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          {/* <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\n            <Checkbox>Remember me</Checkbox>\n          </Form.Item> */}\n\n          <Form.Item {...tailLayout}>\n            <Button type=\"primary\" htmlType=\"submit\">Submit <PlayCircleOutlined /></Button>\n          </Form.Item>\n        </Form>\n        \n        <div>To use a an exsiting account, you can <NavLink to=\"/signin\">Sign in</NavLink>.</div>\n      </div>\n    </div>\n  );\n}\n\nexport default SignUp;","import React from 'react';\nimport './style.scss';\nimport {\n  NavLink, \n  useHistory\n} from \"react-router-dom\";\nimport { Form, Input, Button } from 'antd';\nimport { confirm } from './util';\nimport {\n  PlayCircleOutlined,\n} from '@ant-design/icons';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\nconst Confirm = () => {\n\n  const history = useHistory();\n  let email;\n\n  if (!window.auth.unConfirmedUser) {\n    history.push('/signin');\n    email = '';\n  } else {\n    email = window.auth.unConfirmedUser.username;\n  }\n\n  \n  const onFinish = (values) => {\n    confirm(values, history);\n  };\n\n  return (\n    <div className='confirm'>\n      <h2>Confirm your email address</h2>\n      <p>A confirmation code has been sent, please check your email inbox.</p>\n      <div className='container'>\n        <Form\n          {...layout}\n          name=\"confirmForm\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          size='large'\n          initialValues={{\n            email: email\n          }}\n        >\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n          >\n            <Input disabled/>\n          </Form.Item>\n\n          <Form.Item\n            label=\"Confirmation code\"\n            name=\"code\"\n            rules={[{ required: true, message: 'Please provide your Confirmation code!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Button type=\"primary\" htmlType=\"submit\">Submit<PlayCircleOutlined /></Button>\n          </Form.Item>\n        </Form>\n        <NavLink to=\"/signin\">Sign in</NavLink>&nbsp;&nbsp;&nbsp;\n        <NavLink to=\"/signup\">Sign up</NavLink>\n      </div>\n    </div>\n  );\n}\n\nexport default Confirm;","import React from 'react';\nimport './style.scss';\nimport {\n  NavLink,\n  useHistory\n} from \"react-router-dom\";\nimport { Form, Input, Button } from 'antd';\nimport { signIn } from './util';\nimport {\n  PlayCircleOutlined,\n} from '@ant-design/icons';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\n\nconst SignIn = (props) => {\n\n  const fetchMenuFromRear = props.fetchMenuFromRear;\n  const history = useHistory();\n  let email = '';\n\n  if (!!window.auth.user) {\n    email = window.auth.user.username;\n  }\n\n  const onFinish = (values) => {\n    signIn(values, history, fetchMenuFromRear);\n  };\n\n  return (\n    <div className='sign-in'>\n      <h2>Sign in</h2>\n      <div className='container'>\n        <Form\n          {...layout}\n          name=\"signinForm\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          size='large'\n          initialValues={{\n            email: email\n          }}\n        >\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n            rules={[{ required: true, message: 'Please provide your email address!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[{ required: true, message: 'Please provide your password!' }]}\n          >\n            <Input.Password />\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Button htmlType=\"submit\">Submit <PlayCircleOutlined /></Button>\n          </Form.Item>\n        </Form>\n        \n        <div>To create a new account, you can <NavLink to=\"/signup\">Sign up</NavLink>.</div>\n      </div>\n    </div>\n  );\n}\n\nexport default SignIn;","import React from 'react';\nimport {\n  Switch,\n  Route,\n  useParams,\n  Redirect,\n} from \"react-router-dom\";\nimport MkNote from '../mkNote/index';\nimport DirModule from '../dirModule';\nimport Welcome from '../welcome';\nimport SignUp from '../auth/SignUp';\nimport Confirm from '../auth/Confirm';\nimport SignIn from '../auth/SignIn';\nimport { isSignedIn } from '../auth/util';\nimport PropTypes from 'prop-types';\nimport { getUserId } from '../auth/util';\n\n\nconst Routes = (props) => {\n\n  const { nodeTable, rootKey, fetchMenuFromRear, menuReady } = props;\n  const signed = isSignedIn();\n  const userId = getUserId();\n\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Welcome />\n      </Route>\n      <Route exact path=\"/signin\">\n        <SignIn fetchMenuFromRear={fetchMenuFromRear}/>\n      </Route>\n      <Route exact path=\"/signup\">\n        <SignUp />\n      </Route>\n      <Route exact path=\"/confirm\">\n        <Confirm />\n      </Route>\n      <Route exact path=\"/root\">\n        {(!signed && <Redirect to=\"/signin\" />)}\n        {\n          (signed && menuReady) &&\n            <RootWrapper \n              rootDir={!!nodeTable ? nodeTable[rootKey] : null} \n              updateFunction={fetchMenuFromRear.bind(this, userId)}\n            />\n        }\n      </Route>\n      <Route path=\"/dir/:id\">\n        {(!signed && <Redirect to=\"/signin\" />)}\n        {\n          (signed && menuReady) &&\n            <DirWrapper \n              nodeTable={nodeTable}\n              updateFunction={fetchMenuFromRear.bind(this, userId)}\n            />\n        } \n      </Route>\n      <Route path=\"/note/:id\">\n        {(!signed && <Redirect to=\"/signin\" />)}\n        {(signed && menuReady) && <MkNoteWrapper />}\n      </Route>\n      <Route>\n        <Redirect to=\"/\" />\n      </Route>\n    </Switch>\n  );\n}\n\nconst RootWrapper = (props) => {\n\n  let { rootDir, updateFunction } = props;\n\n  return (\n    <DirModule \n      directory={rootDir} \n      updateFunction={updateFunction}\n      isRoot={true}\n    />\n  );\n}\n\nconst DirWrapper = (props) => {\n\n  let { id } = useParams();\n  let { nodeTable, updateFunction } = props;\n\n  if (!nodeTable[id]) return <Redirect to='/root' />\n  \n  return (\n    <DirModule \n      directory={nodeTable[id]} \n      updateFunction={updateFunction}\n      isRoot={false}\n    />\n  );\n}\n\nconst MkNoteWrapper = () => {\n\n  let { id } = useParams();\n\n  return (\n    <MkNote \n      noteId={id}\n    />\n  );\n}\n\nRoutes.propTypes = {\n  nodeTable: PropTypes.object,\n  rootKey: PropTypes.string,\n  fetchMenuFromRear: PropTypes.func.isRequired,\n  menuReady: PropTypes.bool.isRequired,\n};\n\nexport default Routes;","import React from 'react';\nimport {\n  BackwardFilled,\n  FileAddOutlined,\n  FileMarkdownOutlined,\n  SaveOutlined,\n  FolderOutlined,\n  FolderAddOutlined,\n  HomeOutlined,\n  ExportOutlined\n} from '@ant-design/icons';\nimport { Layout, Menu, Modal } from 'antd';\nimport { getMenu, createDir, updateNote, createNote } from '../api/client';\nimport { notify } from '../notification';\nimport InputPopup from '../inputPopup';\nimport Routes from './Routes';\nimport { withRouter } from \"react-router\";\nimport { isSignedIn, getUserId, logout } from '../auth/util';\n\nimport './style.scss';\n\nconst { Sider } = Layout;\nconst { SubMenu } = Menu;\nconst Item = Menu.Item;\n\nclass App extends React.Component {\n\n  rootKey = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidebarCollapsed: true,\n      nodeTable: null, // a hash table which contains all the menu nodes \n      renderedMenu: null, // a list of React components\n      newFolderPopupVisible: false,\n      newNotePopupVisible: false,\n      logoutPopupVisible: false,\n      openNotebooks: [], // a list that contains the IDs of all opened folders\n      menuReady: false, // a flag indicates whether the menu data is ready to be displayed.\n    }\n  }\n\n  componentDidMount() {\n    // console.log('--componentDidMount');\n    // console.log(\"isSignedIn\", isSignedIn());\n    if (isSignedIn()) {\n      const userId = getUserId();\n      this.fetchMenuFromRear(userId);\n    }\n  }\n\n  fetchMenuFromRear = (userId) => {\n\n    getMenu(userId).then((menuData) => {\n\n      if (!menuData || typeof menuData !== 'object') {\n        notify('error', 'failed to fetch your notebooks, please refresh');\n        return;\n      }\n\n      const { nodeTable, rootNode } = menuData;\n      console.info('fetch Menu From Rear', nodeTable, rootNode);\n      this.rootKey = rootNode.id;\n      this.setState({\n        menuReady: true,\n        nodeTable: nodeTable,\n        renderedMenu: this.renderMenu(rootNode, true),\n      });\n    }, (e) => {\n      notify('error', 'failed to fetch your notebooks, please refresh');\n      logout();\n    });\n  }\n\n  // construct React menu components from JSON data\n  renderMenu = (node, isRoot) => {\n\n    const { history } = this.props;\n\n    if (isRoot) {\n      const children = node.children.map((child) => this.renderMenu(child, false));\n      const content = (\n        <SubMenu \n          key={node.id} \n          icon={<FolderOutlined />} \n          title='Root'\n          onTitleClick={() => {\n            const { isSidebarCollapsed } = this.state;\n            if (isSidebarCollapsed) {\n              this.moveSideMenu(false);\n            } else {\n              history.push(`/root`)\n            }\n          }}\n          popupClassName='side-bar-popup'\n        >\n          {children}\n        </SubMenu>\n      );\n      return content;\n    } else if (node.type === 'MD') {\n      return <Item key={node.id} icon={<FileMarkdownOutlined />}>{node.name}</Item>;\n    } else {\n      // then the node type must be 'DIR'\n      const children = node.children.map((child) => this.renderMenu(child, false));\n      return (\n        <SubMenu\n          key={node.id}\n          icon={<FolderOutlined />} \n          title={node.name}\n          onTitleClick={() => { history.push(`/dir/${node.id}`) }}\n        >\n          {children}\n        </SubMenu>);\n    }\n  }\n\n  moveSideMenu = collapsed => {\n    this.setState({ isSidebarCollapsed: collapsed });\n  };\n\n  setNewFolderPopupVisibility = visible => {\n    this.setState({ newFolderPopupVisible: visible });\n  }\n\n  setNewNotePopupVisibility = visible => {\n    this.setState({ newNotePopupVisible: visible });\n  }\n\n  setLogoutPopupVisibility = visible => {\n    this.setState({ logoutPopupVisible: visible });\n  }\n  \n  // Event handler when a note file is selected in the menu\n  onItemSelect = ({ item, key, keyPath, selectedKeys, domEvent }) => {\n    const { history } = this.props;\n\n    if (key === 'new_notebook' || key === 'new_note' || key === 'save' || key === 'logout') {\n      // noting need to be done, keep the state unchanged\n    } else if (key === 'home') {\n      history.push(`/`);\n    } else {\n      history.push(`/note/${key}`);\n    }\n  }\n  \n  saveCurrent = () => {\n\n    const { location } = this.props;\n    const doc = window.codeMirror.getDoc();\n    const isNotePage = location.pathname.indexOf('/note/') === 0;\n    const noteId = location.pathname.slice(6);\n\n    if (!isNotePage || !doc || !noteId || noteId.length < 1) return;\n\n    const text = doc.getValue();\n\n    updateNote(noteId, text).then(\n      (res) => {\n        notify('success', res);\n      },\n      () => {\n        notify('error', 'update failed, try again later');\n      }\n    );\n  }\n\n  getOpenKeys = (pathname) => {\n  \n    const { nodeTable } = this.state;\n    \n    if (pathname.indexOf('/root') === 0) {\n      return [this.rootKey];\n    } else if (pathname.indexOf('/dir/') === 0) {\n      // in a directory page\n      const dirId = pathname.slice(5);\n      return [this.rootKey, dirId];\n    } else if (pathname.indexOf('/note/') === 0) {\n      // in a note page\n      const noteId = pathname.slice(6);\n      const parentId = !!nodeTable[noteId] && nodeTable[noteId].parent_id;\n      return [this.rootKey, parentId];\n    } else {\n      // in other page\n      return [];\n    }\n  }\n\n  getDirId = (pathname) => {\n    if (pathname === '/root') {\n      return this.rootKey;\n    } else if (pathname.indexOf('/dir/') === 0){\n      return pathname.slice(5);\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n\n    const { isSidebarCollapsed, renderedMenu, menuReady, nodeTable } = this.state;\n    const { location } = this.props;\n    const isNotePage = location.pathname.indexOf('/note/') === 0;\n    const isDirPage = location.pathname.indexOf('/dir/') === 0 || location.pathname.indexOf('/root') === 0;\n    const noteId = !!isNotePage ? location.pathname.slice(6) : null;\n    const openKeys = menuReady ? this.getOpenKeys(location.pathname) : [];\n    const dirId = this.getDirId(location.pathname);\n    const userId = getUserId();\n\n    // console.log({renderedMenu, nodeTable, rootKey: this.rootKey})\n\n    return (\n      <div className=\"App\">\n        <Layout>\n\n          {/* Menu */}\n          {menuReady && <Sider \n            className=\"side-bar\" \n            collapsible \n            collapsed={isSidebarCollapsed} \n            onCollapse={this.moveSideMenu}\n            width={240}\n            trigger={<BackwardFilled className='forward-arrow icon-btn' style={{ fontSize: '3rem' }}/>}\n            reverseArrow={true}\n          >\n            <Menu\n             mode=\"inline\" selectable={true}\n             onSelect={this.onItemSelect}\n             openKeys={openKeys}\n             selectedKeys={[noteId]}\n            >\n              <Menu.Item key=\"home\" icon={<HomeOutlined />} >\n                Home\n              </Menu.Item>\n              <Menu.Item key=\"new_notebook\" icon={<FolderAddOutlined />} onClick={this.setNewFolderPopupVisibility.bind(this, true)}>\n                New Note Book\n              </Menu.Item>\n              {!!isDirPage && <Menu.Item key=\"new_note\" icon={<FileAddOutlined/>} onClick={this.setNewNotePopupVisibility.bind(this, true)}>\n                New Note\n              </Menu.Item>}\n              {!!isNotePage && <Menu.Item key=\"save\" icon={<SaveOutlined/>} onClick={this.saveCurrent}>\n                Save\n              </Menu.Item>}\n              <Menu.Item key=\"logout\" icon={<ExportOutlined />} onClick={this.setLogoutPopupVisibility.bind(this, true)}>\n                Log out\n              </Menu.Item>\n              {renderedMenu}\n            </Menu>\n          </Sider>}\n\n          {/* Modules */}\n          <Layout className=\"site-layout module-frame\">\n            <Routes\n              nodeTable={nodeTable}\n              rootKey={this.rootKey}\n              fetchMenuFromRear={this.fetchMenuFromRear}\n              menuReady={menuReady}\n            />\n          </Layout>\n        </Layout>\n\n        {/* popups */}\n        <InputPopup \n          visible={this.state.newFolderPopupVisible} \n          title=\"Create a new notebook.\"\n          placeholder=\"Give a name for your new notebook\"\n          onCancel={this.setNewFolderPopupVisibility.bind(this, false)}\n          callback={createDir}\n          async={true}\n          afterSuccess={this.fetchMenuFromRear.bind(this, userId)}\n          key={Math.random()}\n          maxLength={50}\n        />\n\n        <InputPopup \n          visible={this.state.newNotePopupVisible} \n          title=\"Create a new note.\"\n          placeholder=\"Give a name for your new note\"\n          onCancel={this.setNewNotePopupVisibility.bind(this, false)}\n          callback={createNote.bind(this, dirId)}\n          async={true}\n          afterSuccess={this.fetchMenuFromRear.bind(this, userId)}\n          key={Math.random()}\n          maxLength={50}\n        />\n\n        <Modal \n          title=\"Logout\" \n          visible={this.state.logoutPopupVisible} \n          onOk={logout} \n          onCancel={this.setLogoutPopupVisibility.bind(this, false)}\n        >\n          Do you want to log out?\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","/* eslint-disable */\n// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\n\nconst awsmobile = {\n    \"aws_project_region\": \"us-east-1\",\n    \"aws_cognito_identity_pool_id\": \"us-east-1:495cc20c-7c86-4c46-8c62-a1ad0eea9470\",\n    \"aws_cognito_region\": \"us-east-1\",\n    \"aws_user_pools_id\": \"us-east-1_zt3u1aCHq\",\n    \"aws_user_pools_web_client_id\": \"5fasf26m0gjhrb5fa396r37obv\",\n    \"oauth\": {},\n    \"aws_dynamodb_all_tables_region\": \"us-east-1\",\n    \"aws_dynamodb_table_schemas\": [\n        {\n            \"tableName\": \"noteTable-staging\",\n            \"region\": \"us-east-1\"\n        },\n        {\n            \"tableName\": \"todosTable-staging\",\n            \"region\": \"us-east-1\"\n        }\n    ],\n    \"aws_cloud_logic_custom\": [\n        {\n            \"name\": \"noteAPI\",\n            \"endpoint\": \"https://xnl9t1m5ch.execute-api.us-east-1.amazonaws.com/staging\",\n            \"region\": \"us-east-1\"\n        },\n        {\n            \"name\": \"todosApi\",\n            \"endpoint\": \"https://5jqbgohdf9.execute-api.us-east-1.amazonaws.com/staging\",\n            \"region\": \"us-east-1\"\n        }\n    ]\n};\n\n\nexport default awsmobile;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/index.jsx';\nimport { HashRouter as Router } from \"react-router-dom\";\nimport Amplify from 'aws-amplify';\nimport awsconfig from './aws-exports';\n\nimport './index.scss';\nimport 'antd/dist/antd.css'; \n\nAmplify.configure(awsconfig);\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}