(this["webpackJsonpMarkDown-Note-FE"]=this["webpackJsonpMarkDown-Note-FE"]||[]).push([[0],{224:function(e,t,n){},339:function(e,t,n){e.exports=n.p+"static/media/book.9d06b99c.png"},340:function(e,t,n){e.exports=n.p+"static/media/instruction_1.d16d5c6c.png"},341:function(e,t,n){e.exports=n.p+"static/media/instruction_2.5e1e50b5.png"},342:function(e,t,n){e.exports=n.p+"static/media/instruction_3.7932d4c2.png"},359:function(e,t,n){e.exports=n(681)},370:function(e,t){},372:function(e,t){},382:function(e,t){},384:function(e,t){},411:function(e,t){},413:function(e,t){},414:function(e,t){},419:function(e,t){},421:function(e,t){},427:function(e,t){},429:function(e,t){},448:function(e,t){},460:function(e,t){},463:function(e,t){},499:function(e,t,n){},578:function(e,t,n){},579:function(e,t,n){},588:function(e,t,n){},589:function(e,t,n){},655:function(e,t,n){},656:function(e,t,n){},681:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(30),i=n.n(o),c=n(45),l=n(46),s=n(48),u=n(47),m=n(723),d=n(724),p=n(730),f=n(731),h=n(725),b=n(726),g=n(732),E=n(733),y=n(709),v=n(716),w=n(714),k=n(25),C=n.n(k),j=n(43),O=n(35),x="http://ec2-3-80-18-46.compute-1.amazonaws.com:3000",S=n(134),N=n(232);function F(e){var t,n={},a=[].concat(Object(N.a)(e.notebooks),Object(N.a)(e.notes)),r={id:"ROOT",name:"Root"},o=[r],i={ROOT:r},c=Object(S.a)(a);try{for(c.s();!(t=c.n()).done;){var l=t.value;i[l.id]=l,l.title?l.name=l.title:l.name=l.notebook_name,l.type||(l.type="DIR"),l.parent_id?n[l.parent_id]?n[l.parent_id].push(l):n[l.parent_id]=[l]:n.ROOT?n.ROOT.push(l):n.ROOT=[l]}}catch(p){c.e(p)}finally{c.f()}for(;o.length>0;){var s=o.pop();if(s.children=[],n[s.id]){var u,m=Object(S.a)(n[s.id]);try{for(m.s();!(u=m.n()).done;){var d=u.value;s.children.push(d),o.push(d)}}catch(p){m.e(p)}finally{m.f()}}"ROOT"===!s.id&&s.children.sort((function(e,t){return(""+e.name).localeCompare(t.name)}))}return{rootNode:r,nodeTable:i}}var T=n(347),P=n(352),M=function(e,t,n){P.a[e]({message:t,description:n||null})};window.auth={};function I(){return!!JSON.parse(window.localStorage.getItem("user"))}function _(){var e=JSON.parse(window.localStorage.getItem("user"));return e?e.username:null}function z(){window.localStorage.clear(),window.location.reload()}function R(e){return V.apply(this,arguments)}function V(){return(V=Object(j.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.default)("".concat(x,"/api/initialize/").concat(t.userId),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then((function(){}),(function(e){return Promise.reject(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("baseUrl: "+x);var D=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,Promise.reject(t)},L=function(){var e=Object(j.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching menu..."),e.prev=1,e.next=4,Object(O.default)("".concat(x,"/api/menu/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)})).then((function(e){return F(e)}),(function(e){return Promise.reject(e)}));case 4:return n=e.sent,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(C.a.mark((function e(t){var n,a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.default)("".concat(x,"/api/note/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)}));case 3:if(n=e.sent){e.next=6;break}throw new Error("note does not exist");case 6:return a=n.content_id,e.next=9,Object(O.default)("".concat(x,"/api/content/").concat(a),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)}));case 9:if(r=e.sent){e.next=12;break}throw new Error("note does not exist");case 12:return e.abrupt("return",{text:r.text_value,title:n.title});case 15:return e.prev=15,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject("failed to get the content"));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(C.a.mark((function e(t,n){var a,r,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.default)("".concat(x,"/api/note/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)}));case 3:if(a=e.sent){e.next=6;break}throw new Error("note does not exist");case 6:return r=a.content_id,e.next=9,Object(O.default)("".concat(x,"/api/content/").concat(r),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)}));case 9:return(o=e.sent).text_value=n,delete o.text,i=Object(O.default)("".concat(x,"/api/content"),{headers:{"Content-Type":"application/json"},mode:"cors",method:"PUT",body:JSON.stringify(o)}).then(D).then((function(){return"".concat(a.title," successfully updated!")}),(function(e){return Promise.reject(e)})),e.abrupt("return",i);case 16:return e.prev=16,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",Promise.reject("failed to update note"));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(C.a.mark((function e(t,n){var a,r,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.value,r=_(),o={parent_id:t,user_id:r,title:a},i=Object(O.default)("".concat(x,"/api/note"),{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:JSON.stringify(o)}).then(D).then((function(){return"".concat(a," successfully created!")}),(function(e){return Promise.reject("failed to create note")})),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(C.a.mark((function e(t){var n,a,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,a=_(),r={user_id:a,notebook_name:n},o=Object(O.default)("".concat(x,"/api/dir"),{headers:{"Content-Type":"application/json"},mode:"cors",method:"POST",body:JSON.stringify(r)}).then(D).then((function(){return"".concat(n," successfully created!")}),(function(e){return Promise.reject("failed to create notebook")})),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.default)("".concat(x,"/api/dir/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"DELETE"}).then(D).then((function(){return"successfully deleted!"}),(function(e){return Promise.reject("failed to delete notebook")})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(O.default)("".concat(x,"/api/note/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"DELETE"}).then(D).then((function(){return"successfully deleted!"}),(function(e){return Promise.reject("failed to delete note")})),e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(j.a)(C.a.mark((function e(t,n){var a,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.value,e.next=3,Object(O.default)("".concat(x,"/api/dir/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)}));case 3:return(r=e.sent).notebook_name=a,o=Object(O.default)("".concat(x,"/api/dir"),{headers:{"Content-Type":"application/json"},mode:"cors",method:"PUT",body:JSON.stringify(r)}).then(D).then((function(){return"".concat(a," successfully updated!")}),function(){var e=Object(j.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.response.text();case 2:return n=e.sent,e.abrupt("return",Promise.reject(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(C.a.mark((function e(t,n){var a,r,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.value,e.next=3,Object(O.default)("".concat(x,"/api/note/").concat(t),{headers:{"Content-Type":"application/json"},mode:"cors",method:"GET"}).then(D).then((function(e){return e.json()}),(function(e){return Promise.reject(e)}));case 3:return(r=e.sent).title=a,o=Object(O.default)("".concat(x,"/api/note"),{headers:{"Content-Type":"application/json"},mode:"cors",method:"PUT",body:JSON.stringify(r)}).then(D).then((function(){return"".concat(a," successfully updated!")}),function(){var e=Object(j.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.response.text();case 2:return n=e.sent,e.abrupt("return",Promise.reject(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=n(713),Y=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleOk=function(){var e=a.props,t=e.callback,n=e.async,r=e.afterSuccess,o=e.maxLength,i=a.state.value;null!==i&&0!==i.trim().length?i.trim().length>o?M("error","input should be shorter than "+(o||1e3)):n?(a.setState({confirmLoading:!0}),t({value:i}).then((function(e){a.setState({confirmLoading:!1}),M("success",e),a.handleCancel(),"function"===typeof r&&r()}),(function(e){M("error",e),a.setState({confirmLoading:!1})}))):(t({value:i}),a.handleCancel(),"function"===typeof r&&r()):M("error","invalid input")},a.handleCancel=function(){(0,a.props.onCancel)()},a.onChange=function(e){a.setState({value:e.target.value})},a.state={confirmLoading:!1,value:a.props.initialValue},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.confirmLoading,n=e.value,a=this.props,o=a.title,i=a.visible,c=a.placeholder;return r.a.createElement(w.a,{title:o,visible:i,onOk:this.handleOk,confirmLoading:t,onCancel:this.handleCancel},r.a.createElement(W.a,{value:n,placeholder:c,onChange:this.onChange,onPressEnter:this.handleOk}))}}]),n}(r.a.Component);Y.defaultProps={title:"",initialValue:"",placeholder:"",async:!1,afterSuccess:function(){},maxLength:1e3};var Q=Y,X=n(26),Z=n(333),$=n.n(Z),ee={heading_1:"# heading",heading_2:"## heading",heading_3:"### heading",heading_4:"#### heading",ul:"- item\n- item\n- item\n",ol:"1. item\n2. item\n3. item\n",check:"\n- [x]  item\n- [ ]  item\n- [ ]  item\n",line:"\n---------------",table:"|       | col-1 | col-2 | col-3 | col-4 | col-5 |\n|-     -|-     -|-     -|-     -|-     -|-     -|\n| row-1 |       |       |       |       |       |\n| row-2 |       |       |       |       |       |\n| row-3 |       |       |       |       |       |\n",br:"<br>"},te=n(715),ne=(n(494),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).show=function(){a.setState({visible:!0})},a.hide=function(){a.setState({visible:!1})},a.renderModal=function(){var e=a.props,t=e.title,n=e.initialValue,o=e.placeholder,i=e.callback,c=e.async,l=e.afterSuccess,s=e.maxLength,u=a.state.visible;return r.a.createElement(Q,{visible:u,title:t,initialValue:n,placeholder:o,onCancel:a.hide,callback:i,async:c,afterSuccess:l,maxLength:s,key:Math.random()})},a.state={visible:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.content,t=r.a.cloneElement(e,{onClick:this.show});return r.a.createElement(r.a.Fragment,null,t,this.renderModal())}}]),n}(r.a.Component));ne.defaultProps={title:"",initialValue:"",placeholder:"",async:!1,afterSuccess:function(){},maxLength:1e3};var ae=ne,re=n(718),oe=n(719),ie=(n(497),n(498),n(499),{lineNumbers:!1,readOnly:!1,mode:"markdown",theme:"darcula",scrollbarStyle:"null",lineWrapping:!0}),ce=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.props.onChange(e)},a.componentDidMount=function(){var e=a.props.initialValue;try{window.codeMirror=a.editorRef.current.getCodeMirror();var t=a.editorRef.current.getCodeMirror().getDoc();t.setValue(e),a.onChange(t.getValue())}catch(n){console.log(n)}},a.insertTextAtCursor=function(e){try{var t=a.editorRef.current.getCodeMirror().getDoc(),n=t.getCursor();t.replaceRange(e,n)}catch(r){console.log(r)}},a.handleInsert=function(e,t){var n=e.key;if("pic"===n)a.insertTextAtCursor("\n![alt text](".concat(t.value,")\n"));else if("link"===n)a.insertTextAtCursor("\n[text](".concat(t.value,")\n"));else{var r=ee[n];r&&a.insertTextAtCursor(r)}},a.headingMenu=r.a.createElement(v.a,{onClick:a.handleInsert},r.a.createElement(v.a.Item,{key:"heading_1"},"Heading level 1"),r.a.createElement(v.a.Item,{key:"heading_2"},"Heading level 2"),r.a.createElement(v.a.Item,{key:"heading_3"},"Heading level 3"),r.a.createElement(v.a.Item,{key:"heading_4"},"Heading level 4")),a.listMenu=r.a.createElement(v.a,{onClick:a.handleInsert},r.a.createElement(v.a.Item,{key:"ol"},"Ordered list"),r.a.createElement(v.a.Item,{key:"ul"},"Unordered list"),r.a.createElement(v.a.Item,{key:"check"},"Check list")),a.incFontSize=function(){a.setState({fontSize:a.state.fontSize+1})},a.resetFontSize=function(){a.setState({fontSize:16})},a.decFontSize=function(){a.setState({fontSize:a.state.fontSize-1})},a.editorRef=r.a.createRef(),a.state={fontSize:16},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shrink,n=e.expand,a=e.exportMD,o=this.state.fontSize,i="mk-editor";return t&&(i+=" shrink"),n&&(i+=" expand"),r.a.createElement("div",{className:i,style:{fontSize:o+"px"}},r.a.createElement("div",{className:"top-bar"},r.a.createElement("span",{className:"option",onClick:function(){a()}},"Export"),r.a.createElement("span",{className:"gap"}),"Insert",r.a.createElement(te.a,{overlay:this.headingMenu,trigger:["click"]},r.a.createElement("span",{className:"option"},"Heading")),r.a.createElement(te.a,{overlay:this.listMenu,trigger:["click"]},r.a.createElement("span",{className:"option"},"List")),r.a.createElement(ae,{title:"Insert picture",placeholder:"Paste the picture link here",initialValue:"",callback:this.handleInsert.bind(this,{key:"pic"}),async:!1,content:r.a.createElement("span",{className:"option"},"Picture")}),r.a.createElement(ae,{title:"Insert link",placeholder:"Paste the link here",initialValue:"",callback:this.handleInsert.bind(this,{key:"link"}),async:!1,content:r.a.createElement("span",{className:"option"},"Link")}),r.a.createElement("span",{className:"option",onClick:this.handleInsert.bind(this,{key:"line"})},"Line"),r.a.createElement("span",{className:"option",onClick:this.handleInsert.bind(this,{key:"table"})},"Table"),r.a.createElement("span",{className:"option",onClick:this.handleInsert.bind(this,{key:"br"})},r.a.createElement(re.a,null)),r.a.createElement("span",{className:"gap"}),r.a.createElement(oe.a,{style:{padding:"8px 6px 0px 0px"}}),r.a.createElement("span",{className:"option",onClick:this.incFontSize},"+"),r.a.createElement("span",{className:"option",onClick:this.resetFontSize},"Re"),r.a.createElement("span",{className:"option",onClick:this.decFontSize},"-")),r.a.createElement($.a,{ref:this.editorRef,onChange:this.onChange,options:ie}))}}]),n}(r.a.Component),le=n(336),se=n.n(le),ue=(n(578),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).incFontSize=function(){a.setState({fontSize:a.state.fontSize+1})},a.resetFontSize=function(){a.setState({fontSize:16})},a.decFontSize=function(){a.setState({fontSize:a.state.fontSize-1})},a.state={fontSize:20},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shrink,n=e.expand,a=e.source,o=this.state.fontSize,i="mk-display";return t&&(i+=" shrink"),n&&(i+=" expand"),r.a.createElement("div",{className:i,style:{fontSize:o+"px"}},r.a.createElement("div",{className:"font-size"},"Font size:",r.a.createElement("span",{className:"option",onClick:this.incFontSize},"+"),r.a.createElement("span",{className:"option",onClick:this.resetFontSize},"Reset"),r.a.createElement("span",{className:"option",onClick:this.decFontSize},"-")),r.a.createElement(se.a,{source:a,escapeHtml:!1}))}}]),n}(r.a.Component)),me=n(708),de=n(712),pe=n(96),fe=n(337),he=(n(579),r.a.createElement(pe.a,{style:{fontSize:120},spin:!0})),be=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).getNewContent=function(e){a.setState({ready:!1}),A(e).then((function(e){a.setState({source:e.text,ready:!0,changed:!1,title:e.title})}),(function(){a.props.history.push("/")}))},a.onEditorChange=function(e){a.state.source!==e&&a.setState({source:e,changed:!0})},a.sizeChange=function(e){a.setState({sizeConfig:e})},a.exportMD=function(){var e=new Blob([a.state.source],{type:"text/plain;charset=utf-8"});Object(fe.saveAs)(e,a.state.title+".md")},a.state={source:"",ready:!1,changed:!1,sizeConfig:1,title:"unknown"},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.noteId;this.getNewContent(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.noteId;e.noteId!==t&&this.getNewContent(t)}},{key:"shouldComponentUpdate",value:function(e){if(e.location.pathname!==this.props.location.pathname){var t=window.codeMirror.getDoc(),n=this.props.location.pathname.slice(6),a=this.state.changed;if(!t||!n||n.length<1||!a)return!0;var r=t.getValue();U(n,r).then((function(e){M("success","Auto saving completed \n"+e)}),(function(){M("error","update failed, try again later")}))}return!0}},{key:"componentWillUnmount",value:function(){var e=window.codeMirror.getDoc(),t=this.props.location.pathname.slice(6),n=this.state.changed;if(!e||!t||t.length<1||!n)return!0;var a=e.getValue();U(t,a).then((function(e){M("success","Auto saving completed \n"+e)}),(function(){M("error","update failed, try again later")}))}},{key:"render",value:function(){var e=this.state,t=e.source,n=e.ready,a=e.sizeConfig;return r.a.createElement("div",{className:"main mk-mode"},!n&&r.a.createElement(me.a,{indicator:he}),!!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{onChange:this.onEditorChange,exportMD:this.exportMD,initialValue:t,shrink:0===a,expand:2===a}),r.a.createElement(ue,{source:this.state.source,shrink:2===a,expand:0===a}),r.a.createElement("div",{className:"slider-bar"},r.a.createElement(de.a,{max:2,defaultValue:1,included:!1,tooltipVisible:!1,onChange:this.sizeChange,value:a}))))}}]),n}(r.a.Component),ge=Object(X.i)(be),Ee=n(97),ye=n(720),ve=n(721),we=n(722),ke=n(717),Ce=n(50),je=(n(588),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderChildren=function(t,n){var a=e.props,o=a.history,i=a.isRoot,c=[],l=[];t.sort((function(e,t){return(""+e.name).localeCompare(""+t.name)}));var s,u=Object(S.a)(t);try{var m=function(){var t=s.value;"DIR"===t.type?c.push(r.a.createElement("div",{className:"unit",key:t.id},r.a.createElement("div",{className:"icon-container",style:{textAlign:"center"}},r.a.createElement(ye.a,{style:{fontSize:"50px"},className:"pointer",onClick:function(){o.push("/dir/".concat(t.id))}})),r.a.createElement("div",{className:"file-name pointer",onClick:function(){o.push("/dir/".concat(t.id))}},t.name),e.renderRenameButtonForNotebook(H.bind(Object(Ee.a)(e),t.id),t.name),e.renderDeleteButtonForNotebook(e.onDirDelete.bind(Object(Ee.a)(e),t.id)))):l.push(r.a.createElement("div",{className:"unit",key:t.id},r.a.createElement("div",{className:"icon-container",style:{textAlign:"center"}},r.a.createElement(ve.a,{style:{fontSize:"50px"},className:"pointer",twoToneColor:"#ffd152",onClick:function(){o.push("/note/".concat(t.id))}})),r.a.createElement("div",{className:"file-name pointer",onClick:function(){o.push("/note/".concat(t.id))}},t.name),e.renderRenameButtonForNote(q.bind(Object(Ee.a)(e),t.id),t.name),e.renderDeleteButtonForNote(e.onNoteDelete.bind(Object(Ee.a)(e),t.id))))};for(u.s();!(s=u.n()).done;)m()}catch(p){u.e(p)}finally{u.f()}var d=[].concat(c,l);return i||d.unshift(r.a.createElement("div",{className:"unit",key:"return"},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(we.a,{className:"pointer",style:{fontSize:"50px",color:"#1790ff"},onClick:function(){o.push("/root")}})),r.a.createElement("div",{className:"file-name pointer",onClick:function(){o.push("/root")}},"Return"))),d},e.renderDeleteButtonForNotebook=function(e){return r.a.createElement(ke.a,{title:"Sure to delete this notebook?",onConfirm:e},r.a.createElement(Ce.a,{danger:!0,type:"primary",size:"small"},"Delete"))},e.renderDeleteButtonForNote=function(e){return r.a.createElement(ke.a,{title:"Sure to delete this note?",onConfirm:e},r.a.createElement(Ce.a,{danger:!0,type:"primary",size:"small"},"Delete"))},e.renderRenameButtonForNotebook=function(t,n){return r.a.createElement(ae,{title:"Rename notebook",placeholder:"Give a new name for your notebook",initialValue:n,callback:t,async:!0,afterSuccess:e.props.updateFunction,content:r.a.createElement(Ce.a,{size:"small"},"Rename")})},e.renderRenameButtonForNote=function(t,n){return r.a.createElement(ae,{title:"Rename note",placeholder:"Give a new name for your note",initialValue:n,callback:t,async:!0,afterSuccess:e.props.updateFunction,content:r.a.createElement(Ce.a,{size:"small"},"Rename"),maxLength:50})},e.onDirDelete=function(t){B(t).then((function(t){e.props.updateFunction(),M("success",t)}),(function(e){M("error",e)}))},e.onNoteDelete=function(t){J(t).then((function(t){e.props.updateFunction(),M("success",t)}),(function(e){M("error",e)}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.directory,t=e.name,n=e.id,a=this.renderChildren(e.children,n);return r.a.createElement("div",{className:"dir-module"},r.a.createElement("h1",{className:"title"},t),r.a.createElement("div",{className:"fileContainer"},a))}}]),n}(r.a.Component)),Oe=Object(X.i)(je),xe=(n(589),n(727)),Se=n(728),Ne=n(60),Fe=n(339),Te=n.n(Fe),Pe=n(340),Me=n.n(Pe),Ie=n(341),_e=n.n(Ie),ze=n(342),Re=n.n(ze),Ve=function(){var e=Object(X.g)(),t=I(),n=function(){var e=JSON.parse(window.localStorage.getItem("user"));return e?e.attributes.nickname:null}();return t||e.push("/signin"),t&&r.a.createElement("div",{className:"welcome"},r.a.createElement("h1",null,"Welcome to MD-Note, ",n),r.a.createElement("h2",null,"This is an Application that you can create and manage notes"),r.a.createElement("ul",null,r.a.createElement("li",null,"Full Markdown syntax support & Real time compilation/display"),r.a.createElement("li",null,"Manage your notebooks(folders) and notes(files)."),r.a.createElement("li",null,"Auto saving")),r.a.createElement("br",null),r.a.createElement("img",{className:"book-picture",src:Te.a,alt:"cannot be displayed due to network reasons"}),r.a.createElement("h2",null,"Navigation"),r.a.createElement("p",null,"Use the Menu on left side for navigation. ",r.a.createElement("br",null),"A note can be stored in either a notebook or in root directory. ",r.a.createElement("br",null),r.a.createElement("span",{className:"bold"},"You cannot store a notebook in another notebook.")," ",r.a.createElement("br",null),r.a.createElement("span",{className:"bold"},"Initially, there are a few notes and notebooks for you to explore.")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.a,null)," directs you to a notebook view which allows you to manage everything in it."),r.a.createElement("li",null,r.a.createElement(d.a,null)," directs you to a note editor."),r.a.createElement("li",null,r.a.createElement(h.a,null)," creates a new notebook."),r.a.createElement("li",null,r.a.createElement(b.a,null)," creates a new note file in current notebook.")),r.a.createElement("p",null,"Click ",r.a.createElement(Ne.b,{to:"/root"},"here")," to view your root directory."),r.a.createElement("br",null),r.a.createElement("h2",null,"How to insert pictures"),r.a.createElement("p",{className:"bold"},"Copy address"),r.a.createElement("img",{className:"instruction-pic-1",src:Me.a,alt:"cannot be displayed due to network reasons"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"bold"},"Use the shortcut button"),r.a.createElement("img",{className:"instruction-pic-2",src:_e.a,alt:"cannot be displayed due to network reasons"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"bold"},"Paste the address"),r.a.createElement("img",{className:"instruction-pic-3",src:Re.a,alt:"cannot be displayed due to network reasons"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"About Markdown"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"104",height:"64",viewBox:"0 0 208 128"},r.a.createElement("rect",{width:"198",height:"118",x:"5",y:"5",ry:"10",stroke:"#FFD152",strokeWidth:"10",fill:"none"}),r.a.createElement("path",{fill:"#FFD152",d:"M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z"}),r.a.createElement("script",{xmlns:""})),r.a.createElement("p",{style:{marginLeft:"20px"}},"Markdown is a lightweight markup language that you can use to add formatting elements to plaintext text documents. Created by John Gruber in 2004, Markdown is now one of the world\u2019s most popular markup languages.")),r.a.createElement("p",null,"Markdown is a fast and easy way to take notes, create content for a website, and produce print-ready documents. It doesn\u2019t take long to learn the Markdown syntax, and once you know how to use it, you can write using Markdown just about everywhere. Most people use Markdown to create content for the web, but Markdown is good for formatting everything from email messages to grocery lists."),r.a.createElement("br",null),r.a.createElement("h2",null,"About me \xa0",r.a.createElement("a",{href:"https://fuhuan1991.github.io"},r.a.createElement(xe.a,null)),"\xa0",r.a.createElement("a",{href:"https://github.com/fuhuan1991"},r.a.createElement(Se.a,null))),r.a.createElement("p",null,"I'm Huan Fu, a Software Engineer with 2 years of developing experience of data platform and E-commerce web applications. I'm always passionate in applying programing skills to create better experience for users. Currently, I'm a master\u2019s student in computer science at Tufts University."))},De=(n(224),n(711)),Le=n(729),Ae={labelCol:{span:8},wrapperCol:{span:16}},Ue={wrapperCol:{offset:8,span:16}},Ke=function(e){console.log("Failed:",e)},Ge=function(){var e=Object(X.g)();return r.a.createElement("div",{className:"sign-up"},r.a.createElement("h2",null,"Sign up"),r.a.createElement("div",{className:"container"},r.a.createElement(De.a,Object.assign({},Ae,{name:"signInForm",initialValues:{remember:!0},onFinish:function(t){!function(e,t){T.a.signUp({username:e.email,password:e.password,attributes:{email:e.email,nickname:e.nickname}}).then((function(e){M("success","Signup success!","Your user account has been created. Please check your email inbox for confirmation code."),console.log(e),window.auth.unConfirmedUser=e.user,window.auth.unConfirmedUser.userId=e.userSub,t.push("/confirm")}),(function(e){M("error","Signup failed",e.message),console.log(e)})).catch((function(e){M("error","Signup failed",e),console.error(e)}))}(t,e)},onFinishFailed:Ke,size:"large"}),r.a.createElement(De.a.Item,{label:"Email(user name)",name:"email",rules:[{required:!0,message:"Please provide your email address!"}]},r.a.createElement(W.a,null)),r.a.createElement(De.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:6,message:"password should have at least 6 characters"}]},r.a.createElement(W.a.Password,null)),r.a.createElement(De.a.Item,{label:"Nickname",name:"nickname",rules:[{required:!0,message:"Please tell me your nickname!"}]},r.a.createElement(W.a,null)),r.a.createElement(De.a.Item,Ue,r.a.createElement(Ce.a,{type:"primary",htmlType:"submit"},"Submit ",r.a.createElement(Le.a,null)))),r.a.createElement("div",null,"To use a an exsiting account, you can ",r.a.createElement(Ne.b,{to:"/signin"},"Sign in"),".")))},Be={labelCol:{span:8},wrapperCol:{span:16}},Je={wrapperCol:{offset:8,span:16}},He=function(e){console.log("Failed:",e)},qe=function(){var e,t=Object(X.g)();window.auth.unConfirmedUser?e=window.auth.unConfirmedUser.username:(t.push("/signin"),e="");return r.a.createElement("div",{className:"confirm"},r.a.createElement("h2",null,"Confirm your email address"),r.a.createElement("p",null,"A confirmation code has been sent, please check your email inbox."),r.a.createElement("div",{className:"container"},r.a.createElement(De.a,Object.assign({},Be,{name:"confirmForm",onFinish:function(e){!function(e,t){T.a.confirmSignUp(e.email,e.code).then(function(){var e=Object(j.a)(C.a.mark((function e(n){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M("success","email address confirmed!",""),console.log(n),window.auth.user=window.auth.unConfirmedUser,delete window.auth.unConfirmedUser,e.next=6,R(window.auth.user);case 6:console.log("initialize completed!"),t.push("/signin");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){M("error","signup failed",e.message),console.log(e)})).catch((function(e){M("error","signup failed",e),console.error(e)}))}(e,t)},onFinishFailed:He,size:"large",initialValues:{email:e}}),r.a.createElement(De.a.Item,{label:"Email",name:"email"},r.a.createElement(W.a,{disabled:!0})),r.a.createElement(De.a.Item,{label:"Confirmation code",name:"code",rules:[{required:!0,message:"Please provide your Confirmation code!"}]},r.a.createElement(W.a,null)),r.a.createElement(De.a.Item,Je,r.a.createElement(Ce.a,{type:"primary",htmlType:"submit"},"Submit",r.a.createElement(Le.a,null)))),r.a.createElement(Ne.b,{to:"/signin"},"Sign in"),"\xa0\xa0\xa0",r.a.createElement(Ne.b,{to:"/signup"},"Sign up")))},We={labelCol:{span:8},wrapperCol:{span:16}},Ye={wrapperCol:{offset:8,span:16}},Qe=function(e){console.log("Failed:",e)},Xe=function(e){var t=e.fetchMenuFromRear,n=Object(X.g)(),a="";window.auth.user&&(a=window.auth.user.username);return r.a.createElement("div",{className:"sign-in"},r.a.createElement("h2",null,"Sign in"),r.a.createElement("div",{className:"container"},r.a.createElement(De.a,Object.assign({},We,{name:"signinForm",onFinish:function(e){!function(e,t,n){T.a.signIn(e.email,e.password).then((function(e){M("success","Sign in success",""),console.log({cognitoUser:e});var a=JSON.stringify(e);window.localStorage.setItem("user",a),n(e.username),t.push("/welcome")}),(function(e){M("error","Sign in failed",e.message),console.log(e)})).catch((function(e){M("error","Sign in failed",e),console.error(e)}))}(e,n,t)},onFinishFailed:Qe,size:"large",initialValues:{email:a}}),r.a.createElement(De.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please provide your email address!"}]},r.a.createElement(W.a,null)),r.a.createElement(De.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please provide your password!"}]},r.a.createElement(W.a.Password,null)),r.a.createElement(De.a.Item,Ye,r.a.createElement(Ce.a,{htmlType:"submit"},"Submit ",r.a.createElement(Le.a,null)))),r.a.createElement("div",null,"To create a new account, you can ",r.a.createElement(Ne.b,{to:"/signup"},"Sign up"),".")))},Ze=function(e){var t=e.rootDir,n=e.updateFunction;return r.a.createElement(Oe,{directory:t,updateFunction:n,isRoot:!0})},$e=function(e){var t=Object(X.h)().id,n=e.nodeTable,a=e.updateFunction;return n[t]?r.a.createElement(Oe,{directory:n[t],updateFunction:a,isRoot:!1}):r.a.createElement(X.a,{to:"/root"})},et=function(){var e=Object(X.h)().id;return r.a.createElement(ge,{noteId:e})},tt=function(e){var t=e.nodeTable,n=e.rootKey,a=e.fetchMenuFromRear,o=e.menuReady,i=I(),c=_();return r.a.createElement(X.d,null,r.a.createElement(X.b,{exact:!0,path:"/"},r.a.createElement(Ve,null)),r.a.createElement(X.b,{exact:!0,path:"/signin"},r.a.createElement(Xe,{fetchMenuFromRear:a})),r.a.createElement(X.b,{exact:!0,path:"/signup"},r.a.createElement(Ge,null)),r.a.createElement(X.b,{exact:!0,path:"/confirm"},r.a.createElement(qe,null)),r.a.createElement(X.b,{exact:!0,path:"/root"},!i&&r.a.createElement(X.a,{to:"/signin"}),i&&o&&r.a.createElement(Ze,{rootDir:t?t[n]:null,updateFunction:a.bind(void 0,c)})),r.a.createElement(X.b,{path:"/dir/:id"},!i&&r.a.createElement(X.a,{to:"/signin"}),i&&o&&r.a.createElement($e,{nodeTable:t,updateFunction:a.bind(void 0,c)})),r.a.createElement(X.b,{path:"/note/:id"},!i&&r.a.createElement(X.a,{to:"/signin"}),i&&o&&r.a.createElement(et,null)),r.a.createElement(X.b,null,r.a.createElement(X.a,{to:"/"})))},nt=(n(655),y.a.Sider),at=v.a.SubMenu,rt=v.a.Item,ot=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).rootKey=null,a.fetchMenuFromRear=function(e){L(e).then((function(e){if(e&&"object"===typeof e){var t=e.nodeTable,n=e.rootNode;console.info("fetch Menu From Rear",t,n),a.rootKey=n.id,a.setState({menuReady:!0,nodeTable:t,renderedMenu:a.renderMenu(n,!0)})}else M("error","failed to fetch your notebooks, please refresh")}),(function(e){M("error","failed to fetch your notebooks, please refresh"),z()}))},a.renderMenu=function(e,t){var n=a.props.history;if(t){var o=e.children.map((function(e){return a.renderMenu(e,!1)}));return r.a.createElement(at,{key:e.id,icon:r.a.createElement(m.a,null),title:"Root",onTitleClick:function(){a.state.isSidebarCollapsed?a.moveSideMenu(!1):n.push("/root")},popupClassName:"side-bar-popup"},o)}if("MD"===e.type)return r.a.createElement(rt,{key:e.id,icon:r.a.createElement(d.a,null)},e.name);var i=e.children.map((function(e){return a.renderMenu(e,!1)}));return r.a.createElement(at,{key:e.id,icon:r.a.createElement(m.a,null),title:e.name,onTitleClick:function(){n.push("/dir/".concat(e.id))}},i)},a.moveSideMenu=function(e){a.setState({isSidebarCollapsed:e})},a.setNewFolderPopupVisibility=function(e){a.setState({newFolderPopupVisible:e})},a.setNewNotePopupVisibility=function(e){a.setState({newNotePopupVisible:e})},a.setLogoutPopupVisibility=function(e){a.setState({logoutPopupVisible:e})},a.onItemSelect=function(e){e.item;var t=e.key,n=(e.keyPath,e.selectedKeys,e.domEvent,a.props.history);"new_notebook"===t||"new_note"===t||"save"===t||"logout"===t||("home"===t?n.push("/"):n.push("/note/".concat(t)))},a.saveCurrent=function(){var e=a.props.location,t=window.codeMirror.getDoc(),n=0===e.pathname.indexOf("/note/"),r=e.pathname.slice(6);if(n&&t&&r&&!(r.length<1)){var o=t.getValue();U(r,o).then((function(e){M("success",e)}),(function(){M("error","update failed, try again later")}))}},a.getOpenKeys=function(e){var t=a.state.nodeTable;if(0===e.indexOf("/root"))return[a.rootKey];if(0===e.indexOf("/dir/")){var n=e.slice(5);return[a.rootKey,n]}if(0===e.indexOf("/note/")){var r=e.slice(6),o=!!t[r]&&t[r].parent_id;return[a.rootKey,o]}return[]},a.getDirId=function(e){return"/root"===e?a.rootKey:0===e.indexOf("/dir/")?e.slice(5):null},a.state={isSidebarCollapsed:!0,nodeTable:null,renderedMenu:null,newFolderPopupVisible:!1,newNotePopupVisible:!1,logoutPopupVisible:!1,openNotebooks:[],menuReady:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(I()){var e=_();this.fetchMenuFromRear(e)}}},{key:"render",value:function(){var e=this.state,t=e.isSidebarCollapsed,n=e.renderedMenu,a=e.menuReady,o=e.nodeTable,i=this.props.location,c=0===i.pathname.indexOf("/note/"),l=0===i.pathname.indexOf("/dir/")||0===i.pathname.indexOf("/root"),s=c?i.pathname.slice(6):null,u=a?this.getOpenKeys(i.pathname):[],m=this.getDirId(i.pathname),d=_();return r.a.createElement("div",{className:"App"},r.a.createElement(y.a,null,a&&r.a.createElement(nt,{className:"side-bar",collapsible:!0,collapsed:t,onCollapse:this.moveSideMenu,width:240,trigger:r.a.createElement(p.a,{className:"forward-arrow icon-btn",style:{fontSize:"3rem"}}),reverseArrow:!0},r.a.createElement(v.a,{mode:"inline",selectable:!0,onSelect:this.onItemSelect,openKeys:u,selectedKeys:[s]},r.a.createElement(v.a.Item,{key:"home",icon:r.a.createElement(f.a,null)},"Home"),r.a.createElement(v.a.Item,{key:"new_notebook",icon:r.a.createElement(h.a,null),onClick:this.setNewFolderPopupVisibility.bind(this,!0)},"New Note Book"),!!l&&r.a.createElement(v.a.Item,{key:"new_note",icon:r.a.createElement(b.a,null),onClick:this.setNewNotePopupVisibility.bind(this,!0)},"New Note"),!!c&&r.a.createElement(v.a.Item,{key:"save",icon:r.a.createElement(g.a,null),onClick:this.saveCurrent},"Save"),r.a.createElement(v.a.Item,{key:"logout",icon:r.a.createElement(E.a,null),onClick:this.setLogoutPopupVisibility.bind(this,!0)},"Log out"),n)),r.a.createElement(y.a,{className:"site-layout module-frame"},r.a.createElement(tt,{nodeTable:o,rootKey:this.rootKey,fetchMenuFromRear:this.fetchMenuFromRear,menuReady:a}))),r.a.createElement(Q,{visible:this.state.newFolderPopupVisible,title:"Create a new notebook.",placeholder:"Give a name for your new notebook",onCancel:this.setNewFolderPopupVisibility.bind(this,!1),callback:G,async:!0,afterSuccess:this.fetchMenuFromRear.bind(this,d),key:Math.random(),maxLength:50}),r.a.createElement(Q,{visible:this.state.newNotePopupVisible,title:"Create a new note.",placeholder:"Give a name for your new note",onCancel:this.setNewNotePopupVisibility.bind(this,!1),callback:K.bind(this,m),async:!0,afterSuccess:this.fetchMenuFromRear.bind(this,d),key:Math.random(),maxLength:50}),r.a.createElement(w.a,{title:"Logout",visible:this.state.logoutPopupVisible,onOk:z,onCancel:this.setLogoutPopupVisibility.bind(this,!1)},"Do you want to log out?"))}}]),n}(r.a.Component),it=Object(X.i)(ot),ct=n(229),lt={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:495cc20c-7c86-4c46-8c62-a1ad0eea9470",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_zt3u1aCHq",aws_user_pools_web_client_id:"5fasf26m0gjhrb5fa396r37obv",oauth:{},aws_dynamodb_all_tables_region:"us-east-1",aws_dynamodb_table_schemas:[{tableName:"noteTable-staging",region:"us-east-1"},{tableName:"todosTable-staging",region:"us-east-1"}],aws_cloud_logic_custom:[{name:"noteAPI",endpoint:"https://xnl9t1m5ch.execute-api.us-east-1.amazonaws.com/staging",region:"us-east-1"},{name:"todosApi",endpoint:"https://5jqbgohdf9.execute-api.us-east-1.amazonaws.com/staging",region:"us-east-1"}]};n(656),n(657);ct.default.configure(lt),i.a.render(r.a.createElement(Ne.a,null,r.a.createElement(it,null)),document.getElementById("root"))}},[[359,1,2]]]);
//# sourceMappingURL=main.0dc0bdbd.chunk.js.map