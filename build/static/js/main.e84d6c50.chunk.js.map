{"version":3,"sources":["config.js","api/constructMenuData.js","notification.js","auth/util.js","api/client.js","inputPopup/index.jsx","mkNote/mkEditor/templates.js","inputPopup/InputPopupWrapper.jsx","mkNote/mkEditor/index.jsx","mkNote/mkDisplay/index.jsx","mkNote/index.jsx","dirModule/index.jsx","welcome/index.jsx","auth/SignUp.jsx","auth/Confirm.jsx","auth/SignIn.jsx","app/Routes.jsx","app/index.jsx","aws-exports.js","index.js"],"names":["baseUrl","process","constructMenuData","data","childrenTable","arr","notebooks","notes","rootNode","id","name","queue","nodeTable","node","title","notebook_name","type","parent_id","push","length","pop","children","child","sort","a","b","localeCompare","notify","msg","description","notification","message","window","auth","isSignedIn","JSON","parse","localStorage","getItem","getUserId","user","username","logout","clear","location","reload","console","log","checkStatus","response","ok","error","Error","statusText","Promise","reject","getMenu","user_id","fetch","headers","mode","method","then","json","e","result","getContent","note_id","note","content_id","content","text","text_value","updateNote","body","stringify","createNote","value","createDir","deleteDir","deleteNote","renameDir","newName","dir","renameNote","InputPopup","props","handleOk","callback","async","afterSuccess","maxLength","state","trim","setState","confirmLoading","res","handleCancel","onCancel","onChange","target","initialValue","this","visible","placeholder","onOk","onPressEnter","React","Component","defaultProps","templetes","heading_1","heading_2","heading_3","heading_4","ul","ol","check","line","table","br","InputPopupWrapper","show","hide","renderModal","key","Math","random","newContent","cloneElement","onClick","options","lineNumbers","readOnly","theme","scrollbarStyle","lineWrapping","MkEditor","code","componentDidMount","codeMirror","editorRef","current","getCodeMirror","doc","getDoc","setValue","getValue","insertTextAtCursor","cursor","getCursor","replaceRange","handleInsert","headingMenu","Item","listMenu","incFontSize","fontSize","resetFontSize","decFontSize","createRef","shrink","expand","exportMD","className","style","overlay","trigger","bind","EnterOutlined","FontSizeOutlined","padding","ref","MkDisplay","source","escapeHtml","Loading","LoadingOutlined","spin","MkNote","getNewContent","noteId","ready","changed","history","onEditorChange","sizeChange","v","sizeConfig","blob","Blob","saveAs","prevProps","nextProps","pathname","slice","indicator","max","defaultValue","included","tooltipVisible","withRouter","DirModule","renderChildren","dirId","isRoot","arrD","arrN","textAlign","FolderOpenTwoTone","renderRenameButtonForNotebook","renderDeleteButtonForNotebook","onDirDelete","FileMarkdownTwoTone","twoToneColor","renderRenameButtonForNote","renderDeleteButtonForNote","onNoteDelete","unshift","RollbackOutlined","color","handleDelete","onConfirm","danger","size","handleRename","oldName","updateFunction","directory","dirName","files","Welcome","useHistory","signed","nickname","attributes","getNickName","FolderOutlined","FileMarkdownOutlined","FolderAddOutlined","FileAddOutlined","to","display","xmlns","width","height","viewBox","x","y","ry","stroke","strokeWidth","fill","d","marginLeft","href","UserOutlined","GithubOutlined","layout","labelCol","span","wrapperCol","tailLayout","offset","onFinishFailed","errorInfo","SignUp","initialValues","remember","onFinish","values","Auth","signUp","email","password","unConfirmedUser","catch","label","rules","required","min","Password","htmlType","PlayCircleOutlined","Confirm","confirmSignUp","confirm","disabled","SignIn","fetchMenuFromRear","signIn","cognitoUser","str","setItem","RootWrapper","rootDir","DirWrapper","useParams","MkNoteWrapper","Routes","rootKey","menuReady","userId","exact","path","Sider","Layout","SubMenu","Menu","App","menuData","info","renderedMenu","renderMenu","map","icon","onTitleClick","isSidebarCollapsed","moveSideMenu","popupClassName","collapsed","setNewFolderPopupVisibility","newFolderPopupVisible","setNewNotePopupVisibility","newNotePopupVisible","setLogoutPopupVisibility","logoutPopupVisible","onItemSelect","item","keyPath","selectedKeys","domEvent","saveCurrent","isNotePage","indexOf","getOpenKeys","parentId","getDirId","openNotebooks","isDirPage","openKeys","collapsible","onCollapse","BackwardFilled","reverseArrow","selectable","onSelect","HomeOutlined","SaveOutlined","ExportOutlined","awsmobile","Amplify","configure","awsconfig","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e84d6c50.chunk.js","sourcesContent":["export const basename = '/markdown-Note';\nexport const offline = true;\nexport const baseUrl = process.env.REACT_APP_BASE_URL;","export default function constructMenuData (data) {\n\n  const childrenTable = {};\n  const arr = [...data.notebooks, ...data.notes];\n  const rootNode = {\n    id: 'ROOT',\n    name: 'Root'\n  };\n  const queue = [rootNode];\n  const nodeTable = {\n    'ROOT': rootNode,\n  };\n\n  // console.log({data})\n\n  for (let node of arr) {\n    nodeTable[node.id] = node;\n\n    if (!!node.title) {\n      node.name = node.title;\n    } else {\n      node.name = node.notebook_name;\n    }\n\n    if (!node.type) {\n      node.type = 'DIR';\n    }\n\n    if (!node.parent_id) {\n      if (!!childrenTable['ROOT']) {\n        childrenTable['ROOT'].push(node);\n      } else {\n        childrenTable['ROOT'] = [node];\n      }\n    } else {\n      if (!!childrenTable[node.parent_id]) {\n        childrenTable[node.parent_id].push(node);\n      } else {\n        childrenTable[node.parent_id] = [node];\n      }\n    }\n  }\n\n  // console.log({nodeTable, childrenTable})\n\n  // //BFS\n  while (queue.length > 0) {\n    const node = queue.pop();\n    node.children = [];\n    if (childrenTable[node.id]) {\n      for (let child of childrenTable[node.id]) {\n        node.children.push(child);\n        queue.push(child);\n      }\n    }\n    if (!node.id === 'ROOT') node.children.sort((a, b) => ('' + a.name).localeCompare(b.name));\n  }\n\n  return {rootNode, nodeTable};\n}","import { notification } from 'antd';\n\n//types: success, info, warning, error\nexport const notify = (type, msg, description) => {\n  notification[type]({\n    message: msg,\n    description: !!description? description : null\n  });\n};\n","import { Auth } from 'aws-amplify';\nimport { notify } from '../notification';\n\nconst auth = {};\nwindow.auth = auth;\nconst signUpSuccTitle = 'Signup success!';\nconst signUpSuccMsg = 'Your user account has been created. Please check your email inbox for confirmation code.';\nconst signUpFailTitle = 'Signup failed';\nconst confirmSuccTitle = 'email address confirmed!';\nconst confirmFailTitle = 'signup failed';\nconst signInSuccTitle = 'Sign in success';\nconst signInFailTitle = 'Sign in failed';\n\n\nfunction isSignedIn() {\n  const user = JSON.parse(window.localStorage.getItem('user'));\n  return !!user;\n}\n\nfunction getNickName() {\n  const user = JSON.parse(window.localStorage.getItem('user'));\n  if (!user) return null;\n  return user.attributes.nickname;\n}\n\nfunction getUserId() {\n  const user = JSON.parse(window.localStorage.getItem('user'));\n  if (!user) return null;\n  return user.username;\n}\n\nfunction signUp(values, history) {\n  const p = Auth.signUp({\n    username: values.email,\n    password: values.password,\n    attributes: {\n      email: values.email,\n      nickname: values.nickname,\n    }\n  });\n\n  p.then((result) => {\n    notify('success', signUpSuccTitle, signUpSuccMsg);\n    console.log(result);\n    window.auth.unConfirmedUser = result.user;\n    history.push('/confirm');\n  }, \n  (result) => {\n    notify('error', signUpFailTitle, result.message);\n    console.log(result);\n  }).catch((error) => {\n    notify('error', signUpFailTitle, error);\n    console.error(error);\n  });\n}\n\nfunction confirm(values, history) {\n  const p = Auth.confirmSignUp(values.email, values.code);\n  p.then((result) => {\n    notify('success', confirmSuccTitle, '');\n    console.log(result);\n    window.auth.user = window.auth.unConfirmedUser;\n    delete window.auth.unConfirmedUser;\n    history.push('/signin');\n  }, \n  (result) => {\n    notify('error', confirmFailTitle, result.message);\n    console.log(result);\n  }).catch((error) => {\n    notify('error', confirmFailTitle, error);\n    console.error(error);\n  });\n}\n\nfunction signIn(values, history, fetchMenuFromRear) {\n  const p = Auth.signIn(values.email, values.password);\n  p.then((cognitoUser) => {\n    notify('success', signInSuccTitle, '');\n    console.log({ cognitoUser });\n    const str = JSON.stringify(cognitoUser);\n    window.localStorage.setItem('user', str);\n    fetchMenuFromRear(cognitoUser.username);\n    history.push('/welcome');\n  },\n  (result) => {\n    notify('error', signInFailTitle, result.message);\n    console.log(result);\n  }).catch((error) => {\n    notify('error', signInFailTitle, error);\n    console.error(error);\n  });\n}\n\nfunction logout() {\n  window.localStorage.clear();\n  window.location.reload();\n}\n\nexport {\n  isSignedIn,\n  getNickName,\n  signUp,\n  confirm,\n  signIn,\n  getUserId,\n  logout,\n};","import fetch from 'unfetch';\nimport { baseUrl } from '../config';\nimport constructMenuData from './constructMenuData';\nimport { getUserId } from '../auth/util';\n\nconsole.log('baseUrl: ' + baseUrl);\n\nconst checkStatus = response => {\n  if (response.ok) {\n    return response;\n  } else {\n    let error = new Error(response.statusText);\n    error.response = response;\n    return Promise.reject(error);\n  }\n}\n\nconst getMenu = async (user_id) => {\n   \n  console.log('fetching menu...')\n\n  try {\n    const result = await fetch(`${baseUrl}/api/menu/${user_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e))\n    .then(data => constructMenuData(data), e => Promise.reject(e));\n    return result; \n  } catch (e) {\n    console.log(e);\n    return Promise.reject(e);\n  }\n}\n\nconst getContent = async (note_id) => {\n  try {\n\n    const note = await fetch(`${baseUrl}/api/note/${note_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n\n    if (!note) throw new Error('note does not exist');\n    const content_id = note.content_id;\n\n    const content = await fetch(`${baseUrl}/api/content/${content_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n\n    if (!content) throw new Error('note does not exist');\n\n    return {text: content.text_value, title: note.title};\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to get the content');\n  }\n}\n\nconst updateNote = async (note_id, text) => {\n  try {\n\n    const note = await fetch(`${baseUrl}/api/note/${note_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n\n    if (!note) throw new Error('note does not exist');\n    const content_id = note.content_id;\n\n    const content = await fetch(`${baseUrl}/api/content/${content_id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'GET',\n    })\n    .then(checkStatus)\n    .then(response => response.json(), e => Promise.reject(e));\n    \n    content.text_value = text;\n    delete content.text;\n\n    const result = fetch(`${baseUrl}/api/content`, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      mode: 'cors',\n      method: 'PUT',\n      body: JSON.stringify(content),\n    })\n    .then(checkStatus)\n    .then(() => `${note.title} successfully updated!`, e => Promise.reject(e));\n\n    return result;\n  } catch (e) {\n    console.log(e);\n    return Promise.reject('failed to update note');\n  }\n}\n\nconst createNote = async (parent_id, data) => {\n\n  const title = data.value;\n  const user_id = getUserId();\n  const body = {\n    parent_id: parent_id,\n    user_id: user_id,\n    title: title,\n  };\n\n  // console.log({body})\n\n  const result = fetch(`${baseUrl}/api/note`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'POST',\n    body: JSON.stringify(body),\n  })\n  .then(checkStatus)\n  .then(() => `${title} successfully created!`, e => Promise.reject('failed to create note'));\n\n  return result;\n}\n\nconst createDir = async (data) => {\n\n  const notebook_name = data.value;\n  const user_id = getUserId();\n  const body = {\n    user_id: user_id,\n    notebook_name: notebook_name,\n  };\n\n  const result = fetch(`${baseUrl}/api/dir`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'POST',\n    body: JSON.stringify(body),\n  })\n  .then(checkStatus)\n  .then(() => `${notebook_name} successfully created!`, e => Promise.reject('failed to create notebook'));\n\n  return result;\n}\n\nconst deleteDir = async (id) => {\n  const result = fetch(`${baseUrl}/api/dir/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'DELETE',\n  })\n  .then(checkStatus)\n  .then(() => `successfully deleted!`, e => Promise.reject('failed to delete notebook'));\n\n  return result;\n}\n\nconst deleteNote = async (id) => {\n  const result = fetch(`${baseUrl}/api/note/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'DELETE',\n  })\n  .then(checkStatus)\n  .then(() => `successfully deleted!`, e => Promise.reject('failed to delete note'));\n\n  return result;\n}\n\nconst renameDir = async (id, data) => {\n  const newName = data.value;\n\n  const dir = await fetch(`${baseUrl}/api/dir/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'GET',\n  })\n  .then(checkStatus)\n  .then(response => response.json(), e => Promise.reject(e));\n\n  dir.notebook_name = newName;\n\n  const result = fetch(`${baseUrl}/api/dir`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'PUT',\n    body: JSON.stringify(dir),\n  })\n  .then(checkStatus)\n  .then(() => `${newName} successfully updated!`, async (e) => {\n    const msg = await e.response.text();\n    return Promise.reject(msg);\n  });\n\n  return result;\n}\n\nconst renameNote = async (id, data) => {\n  const newName = data.value;\n\n  const note = await fetch(`${baseUrl}/api/note/${id}`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'GET',\n  })\n  .then(checkStatus)\n  .then(response => response.json(), e => Promise.reject(e));\n\n  note.title = newName;\n\n  const result = fetch(`${baseUrl}/api/note`, {\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    mode: 'cors',\n    method: 'PUT',\n    body: JSON.stringify(note),\n  })\n  .then(checkStatus)\n  .then(() => `${newName} successfully updated!`, async (e) => {\n    const msg = await e.response.text();\n    return Promise.reject(msg);\n  });\n\n  return result;\n}\n\nexport {\n  getMenu,\n  getContent,\n  createNote,\n  createDir,\n  deleteDir,\n  deleteNote,\n  renameDir,\n  renameNote,\n  updateNote,\n};\n\n","import { Modal, Input } from 'antd';\nimport React from 'react';\nimport { notify } from '../notification';\nimport PropTypes from 'prop-types';\n\nclass InputPopup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmLoading: false,\n      value: this.props.initialValue,\n    }\n  }\n\n  // callback will be triggered first, if this callback is async, 'afterSuccess' will be triggered after a successful callback\n  handleOk = () => {\n\n    const { callback, async, afterSuccess, maxLength } = this.props;\n    const { value } = this.state;\n\n    if (value === null || value.trim().length === 0) { \n      notify('error', 'invalid input');\n      return;\n    }\n\n    if (value.trim().length > maxLength) {\n      const max = maxLength ? maxLength : 1000;\n      notify('error', 'input should be shorter than ' + max);\n      return;\n    }\n\n    if (async) {\n      // the callback function is a async function\n      this.setState({ confirmLoading: true });\n      callback({ value })\n      .then(\n        (res) => {\n          this.setState({ confirmLoading: false });\n          notify('success', res);\n          this.handleCancel();\n          if (typeof afterSuccess === 'function') afterSuccess();\n        }, \n        (e) => { \n          notify('error', e);\n          this.setState({ confirmLoading: false }); \n        }\n      );\n    } else {\n      callback({ value });\n      this.handleCancel();\n      if (typeof afterSuccess === 'function') afterSuccess();\n    }\n  };\n\n  handleCancel = () => {\n    const { onCancel } = this.props;\n    onCancel();\n  };\n\n  onChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  render() {\n\n    const { confirmLoading, value } = this.state;\n    const { title, visible, placeholder } = this.props;\n\n    return (\n        <Modal\n          title={title}\n          visible={visible}\n          onOk={this.handleOk}\n          confirmLoading={confirmLoading}\n          onCancel={this.handleCancel}\n        >\n          <Input \n            value={value} \n            placeholder={placeholder}\n            onChange={this.onChange}\n            onPressEnter={this.handleOk}\n          />\n        </Modal>\n    );\n  }\n}\n\nInputPopup.propTypes = {\n  visible: PropTypes.bool.isRequired,\n  title: PropTypes.string,   \n  initialValue: PropTypes.string,\n  placeholder: PropTypes.string,   \n  onCancel: PropTypes.func.isRequired,\n  callback: PropTypes.func.isRequired,   \n  async: PropTypes.bool,  \n  afterSuccess: PropTypes.func, \n  maxLength: PropTypes.number,\n};\n\nInputPopup.defaultProps = {\n  title: '',   \n  initialValue: '',\n  placeholder: '',  \n  async: false,  \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default InputPopup;","const templetes = {\n    heading_1: '# heading',\n    heading_2: '## heading',\n    heading_3: '### heading',\n    heading_4: '#### heading',\n    ul: '- item\\n- item\\n- item\\n',\n    ol: '1. item\\n2. item\\n3. item\\n',\n    check: '\\n- [x]  item\\n- [ ]  item\\n- [ ]  item\\n',\n    line: '\\n---------------',\n    table:  \"|       | col-1 | col-2 | col-3 | col-4 | col-5 |\\n\" +\n            \"|-     -|-     -|-     -|-     -|-     -|-     -|\\n\" +\n            \"| row-1 |       |       |       |       |       |\\n\" +\n            \"| row-2 |       |       |       |       |       |\\n\" +\n            \"| row-3 |       |       |       |       |       |\\n\",\n    br: '<br>'\n}\nexport default templetes; ","import React from 'react';\nimport InputPopup from './index';\nimport PropTypes from 'prop-types';\n\nclass InputPopupWrapper extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      visible: false\n    }\n  }\n\n  show = () => {\n    this.setState({ visible: true });\n  }\n\n  hide = () => {\n    this.setState({ visible: false });\n  }\n\n  renderModal = () => {\n\n    const { title, initialValue, placeholder, callback, async, afterSuccess, maxLength } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <InputPopup\n        visible={visible} \n        title={title}\n        initialValue={initialValue}\n        placeholder={placeholder}\n        onCancel={this.hide}\n        callback={callback}\n        async={async}\n        afterSuccess={afterSuccess}\n        maxLength={maxLength}\n        key={Math.random()}\n    />);\n  }\n\n  render() {\n\n    const { content } = this.props;\n    const newContent = React.cloneElement(content, {\n      onClick: this.show,\n    });\n\n    return (\n      <>\n        {newContent}\n        {this.renderModal()}\n      </>\n    );\n  }\n}\n\nInputPopupWrapper.propTypes = {\n  title: PropTypes.string,   \n  initialValue: PropTypes.string,\n  placeholder: PropTypes.string,   \n  callback: PropTypes.func.isRequired,   \n  async: PropTypes.bool,  \n  afterSuccess: PropTypes.func, \n  content: PropTypes.node.isRequired,\n  maxLength: PropTypes.number,\n};\n\nInputPopupWrapper.defaultProps = {\n  title: '',   \n  initialValue: '',\n  placeholder: '',  \n  async: false,  \n  afterSuccess: () => {},  \n  maxLength: 1000,\n}\n\nexport default InputPopupWrapper;","import React from 'react';\nimport CodeMirror from 'react-codemirror';\nimport templetes from './templates.js';\nimport { Menu, Dropdown } from 'antd';\nimport 'codemirror/mode/markdown/markdown';\nimport PropTypes from 'prop-types';\nimport InputPopupWrapper from '../../inputPopup/InputPopupWrapper';\nimport {\n  EnterOutlined,\n  FontSizeOutlined,\n} from '@ant-design/icons';\n\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/theme/darcula.css'\nimport './style.scss';\n\nconst options = {\n  lineNumbers: false,\n  readOnly: false,\n  mode: 'markdown',\n  theme: 'darcula',\n  scrollbarStyle: 'null',\n  lineWrapping: true\n}\n\nclass MkEditor extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.editorRef = React.createRef();\n    this.state = {\n      fontSize: 16, \n    }\n  }\n\n  onChange = (code) => {\n    this.props.onChange(code);\n  }\n\n  componentDidMount = () => {\n    const { initialValue } = this.props;\n    try {\n      window.codeMirror = this.editorRef.current.getCodeMirror();\n      // const last_text = window.localStorage.getItem('mkEditor_last_time');\n      const doc = this.editorRef.current.getCodeMirror().getDoc();\n      doc.setValue(initialValue)\n      this.onChange(doc.getValue());\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  insertTextAtCursor = (text) => {\n    try {\n      const doc = this.editorRef.current.getCodeMirror().getDoc();\n      const cursor = doc.getCursor();\n      doc.replaceRange(text, cursor);\n    } catch(e) {\n      console.log(e);\n    }\n  }\n\n  handleInsert = ({ key }, data) => {\n    if (key === 'pic') {\n      this.insertTextAtCursor(`\\n![alt text](${data.value})\\n`);\n    } else if (key === 'link') {\n      this.insertTextAtCursor(`\\n[text](${data.value})\\n`);\n    } else {\n      const text = templetes[key];\n      if (!!text) this.insertTextAtCursor(text);\n    }\n  };\n\n  headingMenu = (\n    <Menu onClick={this.handleInsert}>\n      <Menu.Item key=\"heading_1\">\n        Heading level 1\n      </Menu.Item>\n      <Menu.Item key=\"heading_2\">\n        Heading level 2\n      </Menu.Item>\n      <Menu.Item key=\"heading_3\">\n        Heading level 3\n      </Menu.Item>\n      <Menu.Item key=\"heading_4\">\n        Heading level 4\n      </Menu.Item>\n    </Menu>\n  );\n\n  listMenu = (\n    <Menu onClick={this.handleInsert}>\n      <Menu.Item key=\"ol\">\n       Ordered list\n      </Menu.Item>\n      <Menu.Item key=\"ul\">\n        Unordered list\n      </Menu.Item>\n      <Menu.Item key=\"check\">\n        Check list\n      </Menu.Item>\n    </Menu>\n  );\n\n  incFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize + 1});\n  }\n\n  resetFontSize = () => {\n    this.setState({ fontSize: 16});\n  }\n\n  decFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize - 1});\n  }\n\n  render() {\n\n    const { shrink, expand, exportMD } = this.props;\n    const { fontSize } = this.state;\n    let className = 'mk-editor';\n\n    if (shrink) className += ' shrink';\n    if (expand) className += ' expand';\n\n    return(\n      <div className={className} style={{fontSize: fontSize + 'px'}}>\n        <div className='top-bar'>\n          <span className='option' onClick={() => {exportMD()}}>Export</span>\n          <span className='gap'></span>\n          Insert\n          <Dropdown overlay={this.headingMenu} trigger={['click']}>\n            <span className='option'>Heading</span>\n          </Dropdown>\n          <Dropdown overlay={this.listMenu} trigger={['click']}>\n            <span className='option'>List</span>\n          </Dropdown>\n          <InputPopupWrapper \n            title=\"Insert picture\"\n            placeholder=\"Paste the picture link here\"\n            initialValue={''}\n            callback={this.handleInsert.bind(this, {key: 'pic'})}\n            async={false}\n            content={<span className='option'>Picture</span>}\n          />\n          <InputPopupWrapper \n            title=\"Insert link\"\n            placeholder=\"Paste the link here\"\n            initialValue={''}\n            callback={this.handleInsert.bind(this, {key: 'link'})}\n            async={false}\n            content={<span className='option'>Link</span>}\n          />\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'line'})}>Line</span>\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'table'})}>Table</span>\n          <span className='option' onClick={this.handleInsert.bind(this, {key: 'br'})}><EnterOutlined /></span>\n          <span className='gap'></span>\n          <FontSizeOutlined style={{padding: '8px 6px 0px 0px'}}/>\n          <span className='option' onClick={this.incFontSize}>+</span>\n          <span className='option' onClick={this.resetFontSize}>Re</span>\n          <span className='option' onClick={this.decFontSize}>-</span>\n        </div>\n        <CodeMirror \n          ref={this.editorRef}\n          onChange={this.onChange}\n          options={options} \n        />\n      </div>\n    );\n  }\n};\n\nMkEditor.propTypes = {\n  onChange: PropTypes.func.isRequired,\n  exportMD: PropTypes.func.isRequired,\n  initialValue: PropTypes.string.isRequired,\n  shrink: PropTypes.bool.isRequired,\n  expand: PropTypes.bool.isRequired,\n};\n\nexport default MkEditor;","import React from 'react';\nimport Markdown from 'react-markdown';\nimport './style.scss';\n\nclass MkDisplay extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      fontSize: 20, \n    }\n  }\n\n  incFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize + 1});\n  }\n\n  resetFontSize = () => {\n    this.setState({ fontSize: 16});\n  }\n\n  decFontSize = () => {\n    this.setState({ fontSize: this.state.fontSize - 1});\n  }\n\n  render () {\n    const { shrink, expand, source } = this.props;\n    const { fontSize } = this.state;\n    let className = 'mk-display';\n\n    if (shrink) className += ' shrink';\n    if (expand) className += ' expand';\n\n    return (\n      <div className={className} style={{fontSize: fontSize + 'px'}}>\n        <div className=\"font-size\" >\n          Font size:\n          <span className='option' onClick={this.incFontSize}>+</span>\n          <span className='option' onClick={this.resetFontSize}>Reset</span>\n          <span className='option' onClick={this.decFontSize}>-</span>\n        </div>\n        <Markdown source={source} escapeHtml={false}/>\n      </div>\n    );\n  }\n}\n\nexport default MkDisplay;","import React from 'react';\nimport MkEditor from './mkEditor/index';\nimport MkDisplay from './mkDisplay/index';\nimport PropTypes from 'prop-types';\nimport { getContent } from '../api/client';\nimport { Spin, Slider } from 'antd';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport { updateNote } from '../api/client';\nimport { withRouter } from \"react-router\";\nimport { notify } from '../notification';\nimport { saveAs } from 'file-saver';\n\nimport './style.scss';\n\nconst Loading = <LoadingOutlined style={{ fontSize: 120 }} spin />;\n\nclass MkNote extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      source: '',\n      ready: false,\n      changed: false,\n      sizeConfig: 1,\n      title: 'unknown',\n    }\n  }\n\n  componentDidMount() {\n    const { noteId } = this.props;\n    this.getNewContent(noteId);\n  }\n\n  componentDidUpdate(prevProps) {\n    const { noteId } = this.props;\n    const { noteId: oldId } = prevProps;\n\n    if (oldId !== noteId) {\n      this.getNewContent(noteId);\n    }\n  }\n\n  getNewContent = (noteId) => {\n    this.setState({\n      ready: false,\n    });\n    getContent(noteId).then(\n      (res) => {\n        this.setState({\n          source: res.text,\n          ready: true,\n          changed: false,\n          title: res.title,\n        });\n      },\n      () => {\n        this.props.history.push('/');\n      }\n    );\n  }\n\n  onEditorChange = (code) => {\n    if (this.state.source === code) return;\n    this.setState({\n      source: code,\n      changed: true,\n    });\n  }\n\n  shouldComponentUpdate(nextProps) {\n\n    // auto saving\n    if (nextProps.location.pathname !== this.props.location.pathname) {\n\n      const doc = window.codeMirror.getDoc();\n      const noteId = this.props.location.pathname.slice(6);\n      const changed = this.state.changed;\n  \n      if (!doc || !noteId || noteId.length < 1 || !changed) return true;\n  \n      const text = doc.getValue();\n      updateNote(noteId, text).then(\n        (res) => {\n          notify('success', \"Auto saving completed \\n\" + res);\n        },\n        () => {\n          notify('error', 'update failed, try again later');\n        }\n      );\n    }\n    return true;\n  }\n\n  componentWillUnmount() {\n    // auto saving\n    const doc = window.codeMirror.getDoc();\n    const noteId = this.props.location.pathname.slice(6);\n    const changed = this.state.changed;\n\n    if (!doc || !noteId || noteId.length < 1 || !changed) return true;\n\n    const text = doc.getValue();\n    updateNote(noteId, text).then(\n      (res) => {\n        notify('success', \"Auto saving completed \\n\" + res);\n      },\n      () => {\n        notify('error', 'update failed, try again later');\n      }\n    );\n  }\n\n  sizeChange = (v) => {\n    this.setState({sizeConfig: v});\n  }\n\n  exportMD = () => {\n    const blob = new Blob([this.state.source], {type: \"text/plain;charset=utf-8\"});\n    saveAs(blob, this.state.title + \".md\");\n  }\n\n  render() {\n\n    const { source, ready, sizeConfig } = this.state;\n\n    return (\n      <div className=\"main mk-mode\">\n        {!ready && <Spin indicator={Loading} />}\n        {!!ready && \n          <>\n            <MkEditor \n              onChange={this.onEditorChange}\n              exportMD={this.exportMD}\n              initialValue={source} \n              shrink={sizeConfig === 0}\n              expand={sizeConfig === 2}\n            />\n            <MkDisplay \n              source={this.state.source} \n              shrink={sizeConfig === 2}\n              expand={sizeConfig === 0}\n            />\n            <div className=\"slider-bar\">\n              <Slider \n                max={2} \n                defaultValue={1} \n                included={false}\n                tooltipVisible={false} \n                onChange={this.sizeChange}\n                value={sizeConfig}\n              />\n            </div>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nMkNote.propTypes = {\n  noteId: PropTypes.string,\n};\n\nexport default withRouter(MkNote);\n","import React from 'react';\nimport {\n  FolderOpenTwoTone,\n  FileMarkdownTwoTone,\n  RollbackOutlined\n} from '@ant-design/icons';\nimport { Button, Popconfirm } from 'antd';\nimport { notify } from '../notification';\nimport { deleteDir, deleteNote, renameDir, renameNote } from '../api/client.js';\nimport InputPopupWrapper from '../inputPopup/InputPopupWrapper';\nimport { withRouter } from \"react-router\";\nimport PropTypes from 'prop-types';\n\nimport './style.scss';\n\nclass DirModule extends React.Component {\n\n  renderChildren = (children, dirId) => {\n\n    const { history, isRoot} = this.props;\n    const arrD = [];\n    const arrN = [];\n\n    children.sort((a, b) => ('' + a.name).localeCompare('' + b.name));\n\n    for (let child of children) {\n      if (child.type === 'DIR') {\n        arrD.push(\n          <div className=\"unit\" key={child.id}>\n            <div className='icon-container' style={{textAlign: 'center'}}>\n              <FolderOpenTwoTone \n                style={{fontSize: '50px'}} \n                className=\"pointer\"\n                onClick={() => { history.push(`/dir/${child.id}`); }}\n              />\n            </div>\n            <div \n              className=\"file-name pointer\"\n              onClick={() => {history.push(`/dir/${child.id}`); }}\n            >{child.name}</div>\n              {this.renderRenameButtonForNotebook(renameDir.bind(this, child.id), child.name)}\n              {this.renderDeleteButtonForNotebook(this.onDirDelete.bind(this, child.id))}\n          </div>\n        );\n      } else {\n        arrN.push(\n          <div className=\"unit\" key={child.id}>\n            <div className='icon-container' style={{textAlign: 'center'}}>\n              <FileMarkdownTwoTone \n                style={{fontSize: '50px'}} \n                className=\"pointer\"\n                twoToneColor=\"#ffd152\"\n                onClick={() => { history.push(`/note/${child.id}`); }}\n              />\n            </div>\n            <div \n              className=\"file-name pointer\"\n              onClick={() => { history.push(`/note/${child.id}`); }}\n            >{child.name}</div>\n              {this.renderRenameButtonForNote(renameNote.bind(this, child.id), child.name)}\n              {this.renderDeleteButtonForNote(this.onNoteDelete.bind(this, child.id))}\n          </div>\n        );\n      }\n    }\n\n    const arr = [...arrD, ...arrN];\n    \n    if (!isRoot) {\n      arr.unshift( \n        <div className=\"unit\" key=\"return\">\n          <div style={{textAlign: 'center'}}>\n            <RollbackOutlined \n              className=\"pointer\" \n              style={{fontSize: '50px', color: '#1790ff'}} \n              onClick={ () => { history.push(`/root`)} }\n            />\n          </div>\n          <div \n            className=\"file-name pointer\"\n            onClick={ () => { history.push(`/root`)} }\n          >Return</div>\n        </div>\n      );\n    }\n\n    return arr;\n  }\n\n  renderDeleteButtonForNotebook = (handleDelete) => {\n    const content = (\n      <Popconfirm title=\"Sure to delete this notebook?\" onConfirm={handleDelete}>\n        <Button \n          danger \n          type=\"primary\" \n          size=\"small\"\n        >\n          Delete\n        </Button>\n      </Popconfirm>);\n    return content;\n  }\n\n  renderDeleteButtonForNote = (handleDelete) => {\n    const content = (\n      <Popconfirm title=\"Sure to delete this note?\" onConfirm={handleDelete}>\n        <Button \n          danger \n          type=\"primary\" \n          size=\"small\"\n        >\n          Delete\n        </Button>\n      </Popconfirm>);\n    return content;\n  }\n\n  renderRenameButtonForNotebook = (handleRename, oldName) => {\n    const content = (\n      <InputPopupWrapper \n        title=\"Rename notebook\"\n        placeholder=\"Give a new name for your notebook\"\n        initialValue={oldName}\n        callback={handleRename}\n        async={true}\n        afterSuccess={this.props.updateFunction}\n        content={<Button size=\"small\">Rename</Button>}\n      />\n    ); \n    return content;\n  }\n\n  renderRenameButtonForNote = (handleRename, oldName) => {\n    const content = (\n      <InputPopupWrapper \n        title=\"Rename note\"\n        placeholder=\"Give a new name for your note\"\n        initialValue={oldName}\n        callback={handleRename}\n        async={true}\n        afterSuccess={this.props.updateFunction}\n        content={<Button size=\"small\">Rename</Button>}\n        maxLength={50}\n      />\n    ); \n    return content;\n  }\n\n  onDirDelete = (id) => {\n    deleteDir(id)\n    .then((msg) => {\n      this.props.updateFunction()\n      notify('success', msg);\n    }\n    ,(e) => {\n      notify('error', e);\n    });\n  }\n\n  onNoteDelete = (id) => {\n    deleteNote(id)\n    .then((msg) => {\n      this.props.updateFunction()\n      notify('success', msg);\n    }\n    ,(e) => {\n      notify('error', e);\n    });\n  }\n\n  render() {\n\n    const { directory } = this.props; \n    const dirName = directory.name;\n    const dirId = directory.id;\n    const files = this.renderChildren(directory.children, dirId);\n\n    return (\n      <div className='dir-module'>\n        <h1 className='title'>{dirName}</h1>\n        <div className=\"fileContainer\">\n          {files}\n        </div>\n      </div>\n    );\n  }\n}\n\nDirModule.propTypes = {\n  directory: PropTypes.object.isRequired,\n  updateFunction: PropTypes.func.isRequired,\n  isRoot: PropTypes.bool.isRequired,\n};\n\nexport default withRouter(DirModule);\n","import React  from 'react';\nimport './style.scss';\nimport {\n  FileAddOutlined,\n  FileMarkdownOutlined,\n  FolderOutlined,\n  FolderAddOutlined,\n  GithubOutlined,\n  UserOutlined\n} from '@ant-design/icons';\nimport {\n  NavLink,\n  useHistory\n} from \"react-router-dom\";\nimport { isSignedIn, getNickName } from '../auth/util';\n\nconst Welcome = () => {\n\n  const history = useHistory();\n  const signed = isSignedIn();\n  const nickname = getNickName();\n\n  if (!signed) {\n    history.push(\"/signin\");\n  }\n\n  return (\n    signed && <div className='welcome'>\n      <h1>Welcome to MD-Note, {nickname}</h1>\n\n      <h2>Create your notes with Markdown</h2>\n      <ul>\n        <li>Full Markdown syntax support</li>\n        <li>Real time compilation and display</li>\n        <li>Auto saving</li>\n      </ul>\n      <br/>\n      \n      <h2>Navigation</h2>\n      <p>\n        You can keep mutiple notebooks(folders), each of them can hold mutiple notes(files). \n        Use the Menu on left side for navigation. \n      </p>\n      <ul>\n          <li><FolderOutlined/> directs you to a notebook view which allows you manage everything in it.</li>\n          <li><FileMarkdownOutlined/> directs you to a note editor.</li>\n          <li><FolderAddOutlined/> creates a new notebook.</li>\n          <li><FileAddOutlined/> creates a new note file in current notebook.</li>\n      </ul>\n      <p>\n        Click <NavLink to=\"/root\">here</NavLink> to view your root directory.\n      </p>\n      <br/>\n\n      <h2>About Markdown</h2>\n      <div style={{display: \"flex\"}}>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"104\" height=\"64\" viewBox=\"0 0 208 128\"><rect width=\"198\" height=\"118\" x=\"5\" y=\"5\" ry=\"10\" stroke=\"#FFD152\" strokeWidth=\"10\" fill=\"none\"/><path  fill=\"#FFD152\" d=\"M30 98V30h20l20 25 20-25h20v68H90V59L70 84 50 59v39zm125 0l-30-33h20V30h20v35h20z\"/><script xmlns=\"\"/></svg>\n        <p style={{marginLeft: '20px'}}>\n          Markdown is a lightweight markup language that you can use to add formatting elements to plaintext text documents. Created by John Gruber in 2004, Markdown is now one of the worlds most popular markup languages.\n        </p>\n      </div>\n      <p>\n      Markdown is a fast and easy way to take notes, create content for a website, and produce print-ready documents.\nIt doesnt take long to learn the Markdown syntax, and once you know how to use it, you can write using Markdown just about everywhere. Most people use Markdown to create content for the web, but Markdown is good for formatting everything from email messages to grocery lists.\n      </p>\n      <br/>\n\n      <h2>About me \n        &nbsp;\n        <a href=\"https://fuhuan1991.github.io\"><UserOutlined /></a>\n        &nbsp;\n        <a href=\"https://github.com/fuhuan1991\"><GithubOutlined /></a>\n      </h2>\n      <p>\n        I'm Huan Fu, a Software Engineer with 2 years of developing experience of data platform and E-commerce web applications. \n        I'm always passionate in applying programing skills to create better experience for users.\n        Currently, I'm a masters student in computer science at Tufts University.\n      </p>\n    </div>\n  );\n}\n\nexport default Welcome;","import React  from 'react';\nimport './style.scss';\nimport { Form, Input, Button } from 'antd';\nimport { useHistory, NavLink } from \"react-router-dom\";\nimport { signUp } from './util';\nimport {\n  PlayCircleOutlined,\n} from '@ant-design/icons';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\nconst SignUp = () => {\n\n  const history = useHistory();\n\n  const onFinish = (values) => {\n    signUp(values, history);\n  };\n\n  return (\n    <div className='sign-up'>\n      <h2>Sign up</h2>\n      <div className='container'>\n        <Form\n          {...layout}\n          name=\"signInForm\"\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          size='large'\n        >\n          <Form.Item\n            label=\"Email(user name)\"\n            name=\"email\"\n            rules={[{ required: true, message: 'Please provide your email address!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[\n              { required: true, message: 'Please input your password!' },\n              { min: 6, message: 'password should have at least 6 characters' }\n          ]}\n          >\n            <Input.Password />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Nickname\"\n            name=\"nickname\"\n            rules={[{ required: true, message: 'Please tell me your nickname!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          {/* <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\n            <Checkbox>Remember me</Checkbox>\n          </Form.Item> */}\n\n          <Form.Item {...tailLayout}>\n            <Button type=\"primary\" htmlType=\"submit\">Submit <PlayCircleOutlined /></Button>\n          </Form.Item>\n        </Form>\n        \n        <div>To use a an exsiting account, you can <NavLink to=\"/signin\">Sign in</NavLink>.</div>\n      </div>\n    </div>\n  );\n}\n\nexport default SignUp;","import React from 'react';\nimport './style.scss';\nimport {\n  NavLink, \n  useHistory\n} from \"react-router-dom\";\nimport { Form, Input, Button } from 'antd';\nimport { confirm } from './util';\nimport {\n  PlayCircleOutlined,\n} from '@ant-design/icons';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\nconst Confirm = () => {\n\n  const history = useHistory();\n  let email;\n\n  if (!window.auth.unConfirmedUser) {\n    history.push('/signin');\n    email = '';\n  } else {\n    email = window.auth.unConfirmedUser.username;\n  }\n\n  \n  const onFinish = (values) => {\n    confirm(values, history);\n  };\n\n  return (\n    <div className='confirm'>\n      <h2>Confirm your email address</h2>\n      <p>A confirmation code has been sent, please check your email inbox.</p>\n      <div className='container'>\n        <Form\n          {...layout}\n          name=\"confirmForm\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          size='large'\n          initialValues={{\n            email: email\n          }}\n        >\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n          >\n            <Input disabled/>\n          </Form.Item>\n\n          <Form.Item\n            label=\"Confirmation code\"\n            name=\"code\"\n            rules={[{ required: true, message: 'Please provide your Confirmation code!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Button type=\"primary\" htmlType=\"submit\">Submit<PlayCircleOutlined /></Button>\n          </Form.Item>\n        </Form>\n        <NavLink to=\"/signin\">Sign in</NavLink>\n        <NavLink to=\"/signup\">Sign up</NavLink>\n      </div>\n    </div>\n  );\n}\n\nexport default Confirm;","import React from 'react';\nimport './style.scss';\nimport {\n  NavLink,\n  useHistory\n} from \"react-router-dom\";\nimport { Form, Input, Button } from 'antd';\nimport { signIn } from './util';\nimport {\n  PlayCircleOutlined,\n} from '@ant-design/icons';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\n\nconst tailLayout = {\n  wrapperCol: { offset: 8, span: 16 },\n};\n\nconst onFinishFailed = (errorInfo) => {\n  console.log('Failed:', errorInfo);\n};\n\n\nconst SignIn = (props) => {\n\n  const fetchMenuFromRear = props.fetchMenuFromRear;\n  const history = useHistory();\n  let email = '';\n\n  if (!!window.auth.user) {\n    email = window.auth.user.username;\n  }\n\n  const onFinish = (values) => {\n    signIn(values, history, fetchMenuFromRear);\n  };\n\n  return (\n    <div className='sign-in'>\n      <h2>Sign in</h2>\n      <div className='container'>\n        <Form\n          {...layout}\n          name=\"signinForm\"\n          onFinish={onFinish}\n          onFinishFailed={onFinishFailed}\n          size='large'\n          initialValues={{\n            email: email\n          }}\n        >\n          <Form.Item\n            label=\"Email\"\n            name=\"email\"\n            rules={[{ required: true, message: 'Please provide your email address!' }]}\n          >\n            <Input />\n          </Form.Item>\n\n          <Form.Item\n            label=\"Password\"\n            name=\"password\"\n            rules={[{ required: true, message: 'Please provide your password!' }]}\n          >\n            <Input.Password />\n          </Form.Item>\n\n          <Form.Item {...tailLayout}>\n            <Button htmlType=\"submit\">Submit <PlayCircleOutlined /></Button>\n          </Form.Item>\n        </Form>\n        \n        <div>To create a new account, you can <NavLink to=\"/signup\">Sign up</NavLink>.</div>\n      </div>\n    </div>\n  );\n}\n\nexport default SignIn;","import React from 'react';\nimport {\n  Switch,\n  Route,\n  useParams,\n  Redirect,\n} from \"react-router-dom\";\nimport MkNote from '../mkNote/index';\nimport DirModule from '../dirModule';\nimport Welcome from '../welcome';\nimport SignUp from '../auth/SignUp';\nimport Confirm from '../auth/Confirm';\nimport SignIn from '../auth/SignIn';\nimport { isSignedIn } from '../auth/util';\nimport PropTypes from 'prop-types';\nimport { getUserId } from '../auth/util';\n\n\nconst Routes = (props) => {\n\n  const { nodeTable, rootKey, fetchMenuFromRear, menuReady } = props;\n  const signed = isSignedIn();\n  const userId = getUserId();\n\n  return (\n    <Switch>\n      <Route exact path=\"/\">\n        <Welcome />\n      </Route>\n      <Route exact path=\"/signin\">\n        <SignIn fetchMenuFromRear={fetchMenuFromRear}/>\n      </Route>\n      <Route exact path=\"/signup\">\n        <SignUp />\n      </Route>\n      <Route exact path=\"/confirm\">\n        <Confirm />\n      </Route>\n      <Route exact path=\"/root\">\n        {(!signed && <Redirect to=\"/signin\" />)}\n        {\n          (signed && menuReady) &&\n            <RootWrapper \n              rootDir={!!nodeTable ? nodeTable[rootKey] : null} \n              updateFunction={fetchMenuFromRear.bind(this, userId)}\n            />\n        }\n      </Route>\n      <Route path=\"/dir/:id\">\n        {(!signed && <Redirect to=\"/signin\" />)}\n        {\n          (signed && menuReady) &&\n            <DirWrapper \n              nodeTable={nodeTable}\n              updateFunction={fetchMenuFromRear.bind(this, userId)}\n            />\n        } \n      </Route>\n      <Route path=\"/note/:id\">\n        {(!signed && <Redirect to=\"/signin\" />)}\n        {(signed && menuReady) && <MkNoteWrapper />}\n      </Route>\n      <Route>\n        <Redirect to=\"/\" />\n      </Route>\n    </Switch>\n  );\n}\n\nconst RootWrapper = (props) => {\n\n  let { rootDir, updateFunction } = props;\n\n  return (\n    <DirModule \n      directory={rootDir} \n      updateFunction={updateFunction}\n      isRoot={true}\n    />\n  );\n}\n\nconst DirWrapper = (props) => {\n\n  let { id } = useParams();\n  let { nodeTable, updateFunction } = props;\n\n  if (!nodeTable[id]) return <Redirect to='/root' />\n  \n  return (\n    <DirModule \n      directory={nodeTable[id]} \n      updateFunction={updateFunction}\n      isRoot={false}\n    />\n  );\n}\n\nconst MkNoteWrapper = () => {\n\n  let { id } = useParams();\n\n  return (\n    <MkNote \n      noteId={id}\n    />\n  );\n}\n\nRoutes.propTypes = {\n  nodeTable: PropTypes.object,\n  rootKey: PropTypes.string,\n  fetchMenuFromRear: PropTypes.func.isRequired,\n  menuReady: PropTypes.bool.isRequired,\n};\n\nexport default Routes;","import React from 'react';\nimport {\n  BackwardFilled,\n  FileAddOutlined,\n  FileMarkdownOutlined,\n  SaveOutlined,\n  FolderOutlined,\n  FolderAddOutlined,\n  HomeOutlined,\n  ExportOutlined\n} from '@ant-design/icons';\nimport { Layout, Menu, Modal } from 'antd';\nimport { getMenu, createDir, updateNote, createNote } from '../api/client';\nimport { notify } from '../notification';\nimport InputPopup from '../inputPopup';\nimport Routes from './Routes';\nimport { withRouter } from \"react-router\";\nimport { isSignedIn, getUserId, logout } from '../auth/util';\n\nimport './style.scss';\n\nconst { Sider } = Layout;\nconst { SubMenu } = Menu;\nconst Item = Menu.Item;\n\nclass App extends React.Component {\n\n  rootKey = null;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isSidebarCollapsed: true,\n      nodeTable: null, // a hash table which contains all the menu nodes \n      renderedMenu: null, // a list of React components\n      newFolderPopupVisible: false,\n      newNotePopupVisible: false,\n      logoutPopupVisible: false,\n      openNotebooks: [], // a list that contains the IDs of all opened folders\n      menuReady: false, // a flag indicates whether the menu data is ready to be displayed.\n    }\n  }\n\n  componentDidMount() {\n    // console.log('--componentDidMount');\n    // console.log(\"isSignedIn\", isSignedIn());\n    if (isSignedIn()) {\n      const userId = getUserId();\n      this.fetchMenuFromRear(userId);\n    }\n  }\n\n  fetchMenuFromRear = (userId) => {\n\n    getMenu(userId).then((menuData) => {\n\n      if (!menuData || typeof menuData !== 'object') {\n        notify('error', 'failed to fetch your notebooks, please refresh');\n        return;\n      }\n\n      const { nodeTable, rootNode } = menuData;\n      console.info('fetch Menu From Rear', nodeTable, rootNode);\n      this.rootKey = rootNode.id;\n      this.setState({\n        menuReady: true,\n        nodeTable: nodeTable,\n        renderedMenu: this.renderMenu(rootNode, true),\n      });\n    }, (e) => {\n      notify('error', 'failed to fetch your notebooks, please refresh');\n      logout();\n    });\n  }\n\n  // construct React menu components from JSON data\n  renderMenu = (node, isRoot) => {\n\n    const { history } = this.props;\n\n    if (isRoot) {\n      const children = node.children.map((child) => this.renderMenu(child, false));\n      const content = (\n        <SubMenu \n          key={node.id} \n          icon={<FolderOutlined />} \n          title='Root'\n          onTitleClick={() => {\n            const { isSidebarCollapsed } = this.state;\n            if (isSidebarCollapsed) {\n              this.moveSideMenu(false);\n            } else {\n              history.push(`/root`)\n            }\n          }}\n          popupClassName='side-bar-popup'\n        >\n          {children}\n        </SubMenu>\n      );\n      return content;\n    } else if (node.type === 'MD') {\n      return <Item key={node.id} icon={<FileMarkdownOutlined />}>{node.name}</Item>;\n    } else {\n      // then the node type must be 'DIR'\n      const children = node.children.map((child) => this.renderMenu(child, false));\n      return (\n        <SubMenu\n          key={node.id}\n          icon={<FolderOutlined />} \n          title={node.name}\n          onTitleClick={() => { history.push(`/dir/${node.id}`) }}\n        >\n          {children}\n        </SubMenu>);\n    }\n  }\n\n  moveSideMenu = collapsed => {\n    this.setState({ isSidebarCollapsed: collapsed });\n  };\n\n  setNewFolderPopupVisibility = visible => {\n    this.setState({ newFolderPopupVisible: visible });\n  }\n\n  setNewNotePopupVisibility = visible => {\n    this.setState({ newNotePopupVisible: visible });\n  }\n\n  setLogoutPopupVisibility = visible => {\n    this.setState({ logoutPopupVisible: visible });\n  }\n  \n  // Event handler when a note file is selected in the menu\n  onItemSelect = ({ item, key, keyPath, selectedKeys, domEvent }) => {\n    const { history } = this.props;\n\n    if (key === 'new_notebook' || key === 'new_note' || key === 'save' || key === 'logout') {\n      // noting need to be done, keep the state unchanged\n    } else if (key === 'home') {\n      history.push(`/`);\n    } else {\n      history.push(`/note/${key}`);\n    }\n  }\n  \n  saveCurrent = () => {\n\n    const { location } = this.props;\n    const doc = window.codeMirror.getDoc();\n    const isNotePage = location.pathname.indexOf('/note/') === 0;\n    const noteId = location.pathname.slice(6);\n\n    if (!isNotePage || !doc || !noteId || noteId.length < 1) return;\n\n    const text = doc.getValue();\n\n    updateNote(noteId, text).then(\n      (res) => {\n        notify('success', res);\n      },\n      () => {\n        notify('error', 'update failed, try again later');\n      }\n    );\n  }\n\n  getOpenKeys = (pathname) => {\n  \n    const { nodeTable } = this.state;\n    \n    if (pathname.indexOf('/root') === 0) {\n      return [this.rootKey];\n    } else if (pathname.indexOf('/dir/') === 0) {\n      // in a directory page\n      const dirId = pathname.slice(5);\n      return [this.rootKey, dirId];\n    } else if (pathname.indexOf('/note/') === 0) {\n      // in a note page\n      const noteId = pathname.slice(6);\n      const parentId = !!nodeTable[noteId] && nodeTable[noteId].parent_id;\n      return [this.rootKey, parentId];\n    } else {\n      // in other page\n      return [];\n    }\n  }\n\n  getDirId = (pathname) => {\n    if (pathname === '/root') {\n      return this.rootKey;\n    } else if (pathname.indexOf('/dir/') === 0){\n      return pathname.slice(5);\n    } else {\n      return null;\n    }\n  }\n\n  render() {\n\n    const { isSidebarCollapsed, renderedMenu, menuReady, nodeTable } = this.state;\n    const { location } = this.props;\n    const isNotePage = location.pathname.indexOf('/note/') === 0;\n    const isDirPage = location.pathname.indexOf('/dir/') === 0 || location.pathname.indexOf('/root') === 0;\n    const noteId = !!isNotePage ? location.pathname.slice(6) : null;\n    const openKeys = menuReady ? this.getOpenKeys(location.pathname) : [];\n    const dirId = this.getDirId(location.pathname);\n    const userId = getUserId();\n\n    // console.log({renderedMenu, nodeTable, rootKey: this.rootKey})\n\n    return (\n      <div className=\"App\">\n        <Layout>\n\n          {/* Menu */}\n          {menuReady && <Sider \n            className=\"side-bar\" \n            collapsible \n            collapsed={isSidebarCollapsed} \n            onCollapse={this.moveSideMenu}\n            width={240}\n            trigger={<BackwardFilled className='forward-arrow icon-btn' style={{ fontSize: '3rem' }}/>}\n            reverseArrow={true}\n          >\n            <Menu\n             mode=\"inline\" selectable={true}\n             onSelect={this.onItemSelect}\n             openKeys={openKeys}\n             selectedKeys={[noteId]}\n            >\n              <Menu.Item key=\"home\" icon={<HomeOutlined />} >\n                Home\n              </Menu.Item>\n              <Menu.Item key=\"new_notebook\" icon={<FolderAddOutlined />} onClick={this.setNewFolderPopupVisibility.bind(this, true)}>\n                New Note Book\n              </Menu.Item>\n              {!!isDirPage && <Menu.Item key=\"new_note\" icon={<FileAddOutlined/>} onClick={this.setNewNotePopupVisibility.bind(this, true)}>\n                New Note\n              </Menu.Item>}\n              {!!isNotePage && <Menu.Item key=\"save\" icon={<SaveOutlined/>} onClick={this.saveCurrent}>\n                Save\n              </Menu.Item>}\n              <Menu.Item key=\"logout\" icon={<ExportOutlined />} onClick={this.setLogoutPopupVisibility.bind(this, true)}>\n                Log out\n              </Menu.Item>\n              {renderedMenu}\n            </Menu>\n          </Sider>}\n\n          {/* Modules */}\n          <Layout className=\"site-layout module-frame\">\n            <Routes\n              nodeTable={nodeTable}\n              rootKey={this.rootKey}\n              fetchMenuFromRear={this.fetchMenuFromRear}\n              menuReady={menuReady}\n            />\n          </Layout>\n        </Layout>\n\n        {/* popups */}\n        <InputPopup \n          visible={this.state.newFolderPopupVisible} \n          title=\"Create a new notebook.\"\n          placeholder=\"Give a name for your new notebook\"\n          onCancel={this.setNewFolderPopupVisibility.bind(this, false)}\n          callback={createDir}\n          async={true}\n          afterSuccess={this.fetchMenuFromRear.bind(this, userId)}\n          key={Math.random()}\n          maxLength={50}\n        />\n\n        <InputPopup \n          visible={this.state.newNotePopupVisible} \n          title=\"Create a new note.\"\n          placeholder=\"Give a name for your new note\"\n          onCancel={this.setNewNotePopupVisibility.bind(this, false)}\n          callback={createNote.bind(this, dirId)}\n          async={true}\n          afterSuccess={this.fetchMenuFromRear.bind(this, userId)}\n          key={Math.random()}\n          maxLength={50}\n        />\n\n        <Modal \n          title=\"Logout\" \n          visible={this.state.logoutPopupVisible} \n          onOk={logout} \n          onCancel={this.setLogoutPopupVisibility.bind(this, false)}\n        >\n          Do you want to log out?\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","/* eslint-disable */\n// WARNING: DO NOT EDIT. This file is automatically generated by AWS Amplify. It will be overwritten.\n\nconst awsmobile = {\n    \"aws_project_region\": \"us-east-1\",\n    \"aws_cognito_identity_pool_id\": \"us-east-1:495cc20c-7c86-4c46-8c62-a1ad0eea9470\",\n    \"aws_cognito_region\": \"us-east-1\",\n    \"aws_user_pools_id\": \"us-east-1_zt3u1aCHq\",\n    \"aws_user_pools_web_client_id\": \"5fasf26m0gjhrb5fa396r37obv\",\n    \"oauth\": {},\n    \"aws_dynamodb_all_tables_region\": \"us-east-1\",\n    \"aws_dynamodb_table_schemas\": [\n        {\n            \"tableName\": \"noteTable-staging\",\n            \"region\": \"us-east-1\"\n        },\n        {\n            \"tableName\": \"todosTable-staging\",\n            \"region\": \"us-east-1\"\n        }\n    ],\n    \"aws_cloud_logic_custom\": [\n        {\n            \"name\": \"noteAPI\",\n            \"endpoint\": \"https://xnl9t1m5ch.execute-api.us-east-1.amazonaws.com/staging\",\n            \"region\": \"us-east-1\"\n        },\n        {\n            \"name\": \"todosApi\",\n            \"endpoint\": \"https://5jqbgohdf9.execute-api.us-east-1.amazonaws.com/staging\",\n            \"region\": \"us-east-1\"\n        }\n    ]\n};\n\n\nexport default awsmobile;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/index.jsx';\nimport { HashRouter as Router } from \"react-router-dom\";\nimport Amplify from 'aws-amplify';\nimport awsconfig from './aws-exports';\n\nimport './index.scss';\nimport 'antd/dist/antd.css'; \n\nAmplify.configure(awsconfig);\n\nReactDOM.render(\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}